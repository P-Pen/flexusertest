import{C as N,o as i,g as p,b as o,w as s,a as d,u as e,c as _,h,F as w,f as r,t as l,n as g,i as v,d as x,D as A}from"./app-BYx064nO.js";import{i as D,c as I}from"./app-DISTCiac.js";import{_ as T}from"./app-266_x6q1.js";import{T as k}from"./app-DNadG4GC.js";import{_ as C}from"./app-DU3b6xa5.js";import{T as B}from"./app-DR284fT9.js";import{_ as E}from"./app-C5GVF480.js";import{L as $,s as u}from"./app-Vf6It1y-.js";import{N as z}from"./app-CxqGeHsb.js";import{N as m}from"./app-Ncl-Sitd.js";import{_ as P}from"./app-B-EzfWu7.js";import"./app-BZMTWmMM.js";import"./app-51hQc1Cd.js";import"./app-CqAVEB_b.js";import"./app-CK9Tk_hc.js";import"./app-Cqxz9tud.js";import"./app-DoRtcMJm.js";import"./app-aIb4ksxL.js";import"./app-DYkSpHuE.js";import"./app-DyIe33QU.js";import"./app-CiA1rHoH.js";import"./app-DPMEyUYH.js";import"./app-DOaxShSm.js";import"./app-RbQF51V8.js";import"./app-tUtHmy3n.js";import"./app-DGM5HqRo.js";import"./app-DG0hMi2p.js";import"./app-CBq6-G9z.js";import"./app-Dj8c2KwC.js";import"./app-cRxw2ZDj.js";import"./app-5V9SnxW6.js";import"./app-DoTJvLi7.js";import"./app-BXiLqtxA.js";import"./app-CqvvE0jO.js";import"./app-CAeEyuA3.js";function V(){const{utils:n,Tea:t}=D(this);this.uploadCert=function(){n.popup("/servers/certs/uploadPopup",{callback:function(){n.success("上传成功",function(){n.reload()})}})},this.uploadBatch=function(){n.popup("/servers/certs/uploadBatchPopup",{callback:function(){n.reload()}})},this.deleteCert=function(f){let y=this;n.confirm("确定要删除此证书吗？",function(){y.$post("/servers/certs/delete").params({certId:f}).refresh()})},this.viewCert=function(f){n.popup("/servers/certs/certPopup?certId="+f,{width:"48em",height:"40em"})},this.updateCert=function(f){n.popup("/servers/certs/updatePopup?certId="+f,{height:n.POPUP_HEIGHT_LG,callback:function(){n.success("修改成功",function(){n.reload()})}})}}const L={class:"ui fields inline"},M={class:"ui field"},S={class:"ui field"},F={key:1,class:"mt-4"},G={key:0,class:"mt-1"},H={key:1,class:"mt-1"},O={key:2,class:"mt-1"},U={key:0},R={class:"label-group"},j=["onClick"],q=["onClick"],J=["onClick"],Te={__name:"index",setup(n){const t=I(new V);return(f,y)=>{const b=N("tooltip");return i(),p(w,null,[o(z,null,{tabs:s(()=>[o(m,{href:"/servers/certs?keyword="+e(t).keyword,active:e(t).type==""},{name:s(()=>[r(" 所有证书("+l(e(t).countAll)+") ",1)]),_:1},8,["href","active"]),o(m,{href:"/servers/certs?type=ca&keyword="+e(t).keyword,active:e(t).type=="ca"},{name:s(()=>[r(" CA证书("+l(e(t).countCA)+") ",1)]),_:1},8,["href","active"]),o(m,{href:"/servers/certs?type=available&keyword="+e(t).keyword,active:e(t).type=="available"},{name:s(()=>[r(" 有效证书("+l(e(t).countAvailable)+") ",1)]),_:1},8,["href","active"]),o(m,{href:"/servers/certs?type=expired&keyword="+e(t).keyword,active:e(t).type=="expired"},{name:s(()=>[r(" 过期证书"),d("span",{class:g({red:e(t).countExpired>0})},"("+l(e(t).countExpired)+")",3)]),_:1},8,["href","active"]),o(m,{href:"/servers/certs?type=7days&keyword="+e(t).keyword,active:e(t).type=="7days"},{name:s(()=>[r(" 7天内过期"),d("span",{class:g({red:e(t).count7Days>0})},"("+l(e(t).count7Days)+")",3)]),_:1},8,["href","active"]),o(m,{href:"/servers/certs?type=30days&keyword="+e(t).keyword,active:e(t).type=="30days"},{name:s(()=>[r(" 30天过期("+l(e(t).count30Days)+") ",1)]),_:1},8,["href","active"]),o(m,{separator:""}),o(m,{static:"",onClick:v(e(t).uploadCert,["prevent"]),name:"上传证书","action-upload":""},null,8,["onClick"]),o(m,{static:"",onClick:v(e(t).uploadBatch,["prevent"]),name:"批量上传","action-upload":""},null,8,["onClick"])]),_:1}),d("form",null,[d("div",L,[d("div",M,[o(E,{name:"keyword",placeholder:"关键词",style:{width:"10em"},modelValue:e(t).keyword,"onUpdate:modelValue":y[0]||(y[0]=a=>e(t).keyword=a)},null,8,["modelValue"])]),d("div",S,[o(B,{type:"submit",secondary:""},{default:s(()=>[r("搜索")]),_:1})])])]),e(t).certs.length==0?(i(),_(P,{key:0},{default:s(()=>[r("暂时还没有相关的证书。")]),_:1})):h("",!0),e(t).certs.length>0?(i(),p("div",F,[o($,{items:e(t).certs},{default:s(()=>[o(e(u),{header:"证书说明",class:"title-column",frozen:""},{body:s(({data:a})=>[r(l(a.name)+" ",1),a.isCA?(i(),p("div",G,[o(C,{class:"olive"},{default:s(()=>[r("CA")]),_:1})])):h("",!0),a.isACME?(i(),p("div",H,[x((i(),_(C,{class:"olive"},{default:s(()=>[r("ACME")]),_:1})),[[b,"通过ACME协议免费申请的证书",void 0,{bottom:!0}]])])):h("",!0),a.isSelfSigned?(i(),p("div",O,[x((i(),_(C,{class:"olive"},{default:s(()=>[r("自签名")]),_:1})),[[b,"通过系统提供的自签名证书生成工具生成的证书",void 0,{bottom:!0}]])])):h("",!0)]),_:1}),o(e(u),{header:"顶级发行组织",class:"title-column"},{body:s(({data:a})=>[a.commonNames!=null&&a.commonNames.length>0?(i(),p("span",U,l(a.commonNames[a.commonNames.length-1]),1)):h("",!0)]),_:1}),o(e(u),{header:"域名",class:"domain-column"},{body:s(({data:a})=>[d("div",R,[(i(!0),p(w,null,A(a.dnsNames,c=>(i(),p("div",null,[o(k,{outlined:""},{default:s(()=>[r(l(c),1)]),_:2},1024)]))),256))])]),_:1}),o(e(u),{header:"生效日期",class:"date-column"},{body:s(({data:a,index:c})=>[r(l(e(t).certInfos[c].beginDay),1)]),_:1}),o(e(u),{header:"过期日期",class:"date-column"},{body:s(({data:a,index:c})=>[r(l(e(t).certInfos[c].endDay),1)]),_:1}),o(e(u),{header:"引用网站",class:"value-column"},{body:s(({data:a,index:c})=>[r(l(e(t).certInfos[c].countServers),1)]),_:1}),o(e(u),{header:"状态",class:"status-column"},{body:s(({data:a,index:c})=>[e(t).certInfos[c].isOn?e(t).certInfos[c].isExpired?(i(),_(k,{key:1,outlined:"",size:"small",class:"red"},{default:s(()=>[r("已过期")]),_:1})):(i(),_(k,{key:2,outlined:"",size:"small",class:"green"},{default:s(()=>[r("有效中")]),_:1})):(i(),_(k,{key:0,outlined:"",size:"small",class:"red"},{default:s(()=>[r("未启用")]),_:1}))]),_:1}),o(e(u),{header:"操作",class:"three op",frozen:"","align-frozen":"right"},{body:s(({data:a})=>[d("a",{href:"",onClick:v(c=>e(t).viewCert(a.id),["prevent"])},"详情",8,j),r("   "),d("a",{href:"",onClick:v(c=>e(t).updateCert(a.id),["prevent"])},"修改",8,q),r("   "),d("a",{href:"",onClick:v(c=>e(t).deleteCert(a.id),["prevent"])},"删除",8,J)]),_:1})]),_:1},8,["items"]),o(T,{data:e(t).page},null,8,["data"])])):h("",!0)],64)}}};export{Te as default};
