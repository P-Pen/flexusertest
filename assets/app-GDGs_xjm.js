import{i as B,c as z}from"./app-DISTCiac.js";import{_ as N}from"./app-BAIc7wsg.js";import{_ as j}from"./app-C7gR9zYq.js";import{_ as M}from"./app-_N2IGwgj.js";import{_ as G,aa as F,r as b,ak as H,o as u,g as p,a as e,u as o,b as i,w as v,c as U,h as f,d as _,e as h,f as r,L as J,F as A,D as Z,t as q,M as K,N as Q}from"./app-BYx064nO.js";import{_ as W}from"./app-CxVImP9a.js";import{_ as O}from"./app-Bg2kbTeB.js";import{_ as $}from"./app-CaWL-qGV.js";import{_ as g}from"./app--BlRpVz_.js";import{_ as X}from"./app-Bx5jiAm1.js";import{_ as L}from"./app-CryyhHYs.js";import{_ as Y}from"./app-EcaQJ64L.js";import{S as ee}from"./app-C0-Qcoum.js";import{D as te}from"./app-D0jdtzyy.js";import{_ as ne}from"./app-57xpzLDR.js";import"./app-BXvxi6wb.js";import"./app-C9w-bzHc.js";import"./app-DyIe33QU.js";import"./app-5V9SnxW6.js";import"./app-DOaxShSm.js";import"./app-DQhYsbJs.js";import"./app-BXiLqtxA.js";import"./app-CqvvE0jO.js";import"./app-CK9Tk_hc.js";import"./app-CAeEyuA3.js";import"./app-DoRtcMJm.js";import"./app-DPMEyUYH.js";import"./app-CHxME8Sw.js";import"./app-DR284fT9.js";import"./app-BuHt2kYS.js";import"./app-51hQc1Cd.js";import"./app-CqAVEB_b.js";import"./app-Cqxz9tud.js";import"./app-aIb4ksxL.js";import"./app-DYkSpHuE.js";import"./app-DNadG4GC.js";import"./app-C5GVF480.js";import"./app-x_fVWXrx.js";import"./app-TBcc1obG.js";import"./app-tUtHmy3n.js";function oe(){B(this),this.success=this.$NotifyReloadSuccess("保存成功")}const a=d=>(K("data-v-5e8effae"),d=d(),Q(),d),se=["value"],le=a(()=>e("td",{class:"title"},"启用内容压缩",-1)),ae=a(()=>e("td",null,"支持的扩展名",-1)),ie=a(()=>e("p",{class:"comment"},"含有这些扩展名的URL将会被压缩，不区分大小写。",-1)),ue=a(()=>e("td",null,"例外扩展名",-1)),ce=a(()=>e("p",{class:"comment"},[r("含有这些扩展名的URL将"),e("strong",null,"不会"),r("被压缩，不区分大小写。")],-1)),re=a(()=>e("td",null,"支持的MimeType",-1)),me=a(()=>e("p",{class:"comment"},"响应的Content-Type里包含这些MimeType的内容将会被压缩。",-1)),pe=a(()=>e("td",null,"压缩算法",-1)),de={key:0},fe=a(()=>e("span",{class:"grey small"},"（zstd、brtoli、gzip、 deflate）",-1)),_e={key:1},he=a(()=>e("i",{class:"icon bars small grey handle"},null,-1)),ge={class:"comment"},ve=a(()=>e("i",{class:"icon bars small grey"},null,-1)),ye=a(()=>e("td",null,"支持已压缩内容",-1)),xe=a(()=>e("p",{class:"comment"},"支持对已压缩内容尝试重新使用新的算法压缩；不选中表示保留当前的压缩格式。",-1)),be=a(()=>e("td",null,"内容最小长度",-1)),Te=a(()=>e("p",{class:"comment"},"0表示不限制，内容长度从文件尺寸或Content-Length中获取。",-1)),Ve=a(()=>e("td",null,"内容最大长度",-1)),Ce=a(()=>e("p",{class:"comment"},"0表示不限制，内容长度从文件尺寸或Content-Length中获取。",-1)),Le=a(()=>e("td",null,[r("支持Partial"),e("br"),r("Content")],-1)),Ue=a(()=>e("p",{class:"comment"},"支持对分片内容（PartialContent）的压缩；除非客户端有特殊要求，一般不需要启用。",-1)),Re=a(()=>e("td",null,"例外URL",-1)),Oe=a(()=>e("p",{class:"comment"},"如果填写了例外URL，表示这些URL跳过不做处理。",-1)),$e=a(()=>e("td",null,"限制URL",-1)),De=a(()=>e("p",{class:"comment"},"如果填写了限制URL，表示只对这些URL进行压缩处理；如果不填则表示支持所有的URL。",-1)),ke=a(()=>e("td",null,"匹配条件",-1)),Ie={__name:"HTTPCompressionConfigBox",props:["v-compression-config","v-is-location","v-is-group"],setup(d){const c=F("$utils"),y=d,{config:t,moreOptionsVisible:T,allTypes:x}=function(){let n=y.vCompressionConfig;n==null&&(n={isPrior:!1,isOn:!1,useDefaultTypes:!0,types:["zstd","brotli","gzip","deflate"],level:0,decompressData:!1,gzipRef:null,deflateRef:null,brotliRef:null,minLength:{count:1,unit:"kb"},maxLength:{count:32,unit:"mb"},mimeTypes:["text/*","application/javascript","application/json","application/atom+xml","application/rss+xml","application/xhtml+xml","image/svg+xml"],extensions:[".js",".json",".html",".htm",".xml",".css",".woff2",".txt"],exceptExtensions:[".apk",".ipa"],conds:null,enablePartialContent:!1,onlyURLPatterns:[],exceptURLPatterns:[]}),n.types==null&&(n.types=[]),n.mimeTypes==null&&(n.mimeTypes=[]),n.extensions==null&&(n.extensions=[]);let l=[{name:"Gzip",code:"gzip",isOn:!0},{name:"Deflate",code:"deflate",isOn:!0},{name:"Brotli",code:"brotli",isOn:!0},{name:"ZSTD",code:"zstd",isOn:!0}],s=[];return n.types.forEach(function(m){l.forEach(function(C){m==C.code&&(C.isOn=!0,s.push(C))})}),l.forEach(function(m){n.types.$contains(m.code)||(m.isOn=!1,s.push(m))}),{config:b(n),moreOptionsVisible:b(!1),allTypes:b(s)}}(),R=b(),V=function(){return(!y.vIsLocation&&!y.vIsGroup||t.value.isPrior)&&t.value.isOn},D=function(n){n.forEach(function(l,s){l.length>0&&l[0]!="."&&(n[s]="."+l)}),t.value.extensions=n},k=function(n){n.forEach(function(l,s){l.length>0&&l[0]!="."&&(n[s]="."+l)}),t.value.exceptExtensions=n},I=function(n){t.value.mimeTypes=n},P=function(){T.value=!T.value},E=function(n){t.value.conds=n},S=function(){t.value.types=[],x.value.forEach(function(n){n.isOn&&t.value.types.push(n.code)})},w=function(){ee.create(R.value,{draggable:".checkbox-wrapper",handle:".icon.handle",chosenClass:"dragging",ghostClass:"placeholder",onStart:function(){},onUpdate:function(n){c.moveElement(x.value,n.oldDraggableIndex,n.newDraggableIndex);const l=[];x.value.forEach(s=>{s.isOn&&l.push(s.code)}),t.value.types=l}})};return H(()=>{w()}),(n,l)=>(u(),p("div",null,[e("input",{type:"hidden",name:"compressionJSON",value:JSON.stringify(o(t))},null,8,se),i(te,null,{default:v(()=>[n.vIsLocation||n.vIsGroup?(u(),U(X,{key:0,"v-config":o(t)},null,8,["v-config"])):f("",!0),_(e("tbody",null,[e("tr",null,[le,e("td",null,[i(g,{value:"1",modelValue:o(t).isOn,"onUpdate:modelValue":l[0]||(l[0]=s=>o(t).isOn=s)},null,8,["modelValue"])])])],512),[[h,!n.vIsLocation&&!n.vIsGroup||o(t).isPrior]]),_(e("tbody",null,[e("tr",null,[ae,e("td",null,[i(L,{values:o(t).extensions,onChange:D,placeholder:"比如 .html"},null,8,["values"]),ie])]),e("tr",null,[ue,e("td",null,[i(L,{values:o(t).exceptExtensions,onChange:k,placeholder:"比如 .html"},null,8,["values"]),ce])]),e("tr",null,[re,e("td",null,[i(L,{values:o(t).mimeTypes,onChange:I,placeholder:"比如 text/*"},null,8,["values"]),me])])],512),[[h,V()]]),V()?(u(),U(Y,{key:1,onChange:P})):f("",!0),_(e("tbody",null,[e("tr",null,[pe,e("td",null,[e("div",null,[i(g,{modelValue:o(t).useDefaultTypes,"onUpdate:modelValue":l[1]||(l[1]=s=>o(t).useDefaultTypes=s)},{default:v(()=>[o(t).useDefaultTypes?(u(),p("span",de,[r("使用默认顺序"),fe])):f("",!0),o(t).useDefaultTypes?f("",!0):(u(),p("span",_e,"使用默认顺序"))]),_:1},8,["modelValue"])]),_(e("div",null,[i(J),e("div",{ref_key:"compressionTypesBoxRef",ref:R,class:"label-group !gap-4"},[(u(!0),p(A,null,Z(o(x),s=>(u(),p("div",{class:"checkbox-wrapper",key:s.code},[i(g,{modelValue:s.isOn,"onUpdate:modelValue":m=>s.isOn=m,id:"compression-type-"+s.code,onChange:S},{default:v(()=>[e("span",null,[r(q(s.name)+"   ",1),he])]),_:2},1032,["modelValue","onUpdate:modelValue","id"])]))),128))],512)],512),[[h,!o(t).useDefaultTypes]]),_(e("p",ge,[r("选择支持的压缩算法和优先顺序，拖动"),ve,r("图标排序。 ")],512),[[h,!o(t).useDefaultTypes]])])]),e("tr",null,[ye,e("td",null,[i(g,{modelValue:o(t).decompressData,"onUpdate:modelValue":l[2]||(l[2]=s=>o(t).decompressData=s)},null,8,["modelValue"]),xe])]),e("tr",null,[be,e("td",null,[i($,{"v-name":"minLength","v-value":o(t).minLength,"v-unit":"kb"},null,8,["v-value"]),Te])]),e("tr",null,[Ve,e("td",null,[i($,{"v-name":"maxLength","v-value":o(t).maxLength,"v-unit":"mb"},null,8,["v-value"]),Ce])]),e("tr",null,[Le,e("td",null,[i(g,{modelValue:o(t).enablePartialContent,"onUpdate:modelValue":l[3]||(l[3]=s=>o(t).enablePartialContent=s)},null,8,["modelValue"]),Ue])]),e("tr",null,[Re,e("td",null,[i(O,{modelValue:o(t).exceptURLPatterns,"onUpdate:modelValue":l[4]||(l[4]=s=>o(t).exceptURLPatterns=s)},null,8,["modelValue"]),Oe])]),e("tr",null,[$e,e("td",null,[i(O,{modelValue:o(t).onlyURLPatterns,"onUpdate:modelValue":l[5]||(l[5]=s=>o(t).onlyURLPatterns=s)},null,8,["modelValue"]),De])]),e("tr",null,[ke,e("td",null,[i(W,{"v-conds":o(t).conds,onChange:E},null,8,["v-conds"])])])],512),[[h,V()&&o(T)]])]),_:1})]))}},Pe=G(Ie,[["__scopeId","data-v-5e8effae"]]),Ee={key:0},Se=["value"],we={key:1},Vt={__name:"index",setup(d){const c=z(new oe);return(y,t)=>(u(),U(N,{ctx:o(c)},{default:v(()=>[o(c).featureIsOn?(u(),p("div",Ee,[i(M,{action:"$",onSuccess:o(c).success},{default:v(()=>[e("input",{type:"hidden",name:"webId",value:o(c).webId},null,8,Se),i(Pe,{"v-compression-config":o(c).compressionConfig},null,8,["v-compression-config"]),i(ne,{class:"mt-4"})]),_:1},8,["onSuccess"])])):f("",!0),o(c).featureIsOn?f("",!0):(u(),p("div",we,[i(j)]))]),_:1},8,["ctx"]))}};export{Vt as default};
