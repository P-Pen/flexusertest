import{_ as z,r as d,o as s,g as o,u as t,F as P,D as O,n as R,i as $,t as x,h as p,aa as U,ak as F,a as e,b as u,w as _,c as D,f as A,d as N,e as E}from"./app-BYx064nO.js";import{P as q}from"./app-BnDFQ2zy.js";import{i as G,u as H,c as K}from"./app-DISTCiac.js";import{_ as Q}from"./app-57xpzLDR.js";import{T as W}from"./app-DNadG4GC.js";import{P as X}from"./app-TBcc1obG.js";import{L as Y}from"./app-Vf6It1y-.js";import{_ as B}from"./app-CfEaOsVA.js";import{D as S}from"./app-D0jdtzyy.js";import{_ as Z}from"./app-_N2IGwgj.js";import"./app-GoR2fTOd.js";import"./app-DR284fT9.js";import"./app-DPMEyUYH.js";import"./app-BZMTWmMM.js";import"./app-51hQc1Cd.js";import"./app-CqAVEB_b.js";import"./app-CK9Tk_hc.js";import"./app-Cqxz9tud.js";import"./app-DoRtcMJm.js";import"./app-aIb4ksxL.js";import"./app-DYkSpHuE.js";import"./app-DyIe33QU.js";import"./app-CiA1rHoH.js";import"./app-DOaxShSm.js";import"./app-RbQF51V8.js";import"./app-tUtHmy3n.js";import"./app-DGM5HqRo.js";import"./app-DG0hMi2p.js";import"./app-CBq6-G9z.js";function ee(){G(this)}const te={key:0,class:"flex flex-wrap gap-2 items-center my-2"},se=["onClick"],ne={__name:"JSPage",props:["v-max"],emits:["change"],setup(C,{expose:a,emit:I}){const h=C,f=I,{max:g,page:l}=function(){let c=h.vMax;return c==null&&(c=0),{max:d(c),page:d(1)}}(),y=function(c){g.value=c},v=function(c){l.value=c,f("change",l.value)};return a({updateMax:y,selectPage:v}),(c,m)=>(s(),o("div",null,[t(g)>1?(s(),o("div",te,[(s(!0),o(P,null,O(t(g),b=>(s(),o("a",{href:"",class:R({active:b==t(l)}),onClick:$(w=>v(b),["prevent"])},x(b),11,se))),256))])):p("",!0)]))}},oe=z(ne,[["__scopeId","data-v-b39b1afd"]]),ae=["value"],ie={key:0},re=e("span",{class:"grey"},"暂时还没有设置任何防护对象。",-1),ce=[re],le={key:1},ue=e("td",{class:"title"},"已选中防护对象",-1),de={class:"label-group"},_e={key:0},pe=["onClick"],me=e("i",{class:"pi pi-remove small"},null,-1),fe=[me],ve=e("div",{class:"margin"},null,-1),he={key:0},ge=e("tr",null,[e("td",{class:"title"},"对象类型"),e("td",null,"网站")],-1),ye=e("td",null,"网站列表",-1),be={key:0},ke={key:1},$e=["onClick"],xe=["onClick"],Ce=e("span",{class:"red"},"取消",-1),Ie=[Ce],je={key:1},Se={__name:"ADInstanceObjectsBox",props:["v-objects","v-user-id"],setup(C){const a=H(),I=U("$Tea"),h=C,f=d(),{userId:g,objects:l,objectCodes:y,isAdding:v,servers:c,serversIsLoading:m}=function(){let n=h.vObjects;n==null&&(n=[]);let i=[];return n.forEach(function(r){i.push(r.code)}),{userId:d(h.vUserId),objects:d(n),objectCodes:d(i),isAdding:d(!0),servers:d([]),serversIsLoading:d(!1)}}(),b=function(){v.value=!0},w=function(n){a.confirm("确定要删除此防护对象吗？",function(){l.value.$remove(n),j()})},M=function(n){let i=-1;y.value.forEach(function(r,k){n==r&&(i=k)}),i>=0&&(l.value.$remove(i),j())},L=function(n){m.value=!0,I.action(".userServers").post().params({userId:g.value,page:n,pageSize:5}).success(function(i){c.value=i.data.servers,f.value.updateMax(i.data.page.max),m.value=!1}).error(function(){m.value=!1})},J=function(n){L(n)},V=function(n){T("server:"+n.id)||(l.value.push({type:"server",code:"server:"+n.id,id:n.id,name:n.name}),j())},j=function(){let n=[];l.value.forEach(function(i){n.push(i.code)}),y.value=n},T=function(n){let i=!1;return l.value.forEach(function(r){r.code==n&&(i=!0)}),i};return F(()=>{L(1)}),(n,i)=>(s(),o("div",null,[e("input",{type:"hidden",name:"objectCodesJSON",value:JSON.stringify(t(y))},null,8,ae),e("div",null,[t(l).length==0?(s(),o("div",ie,ce)):p("",!0),t(l).length>0?(s(),o("div",le,[u(S,null,{default:_(()=>[e("tbody",null,[e("tr",null,[ue,e("td",null,[e("div",de,[(s(!0),o(P,null,O(t(l),(r,k)=>(s(),D(W,{outlined:""},{default:_(()=>[r.type=="server"?(s(),o("span",_e,"网站："+x(r.name),1)):p("",!0),A("   "),e("a",{href:"",title:"删除",onClick:$(Je=>w(k),["prevent"])},fe,8,pe)]),_:2},1024))),256))])])])])]),_:1})])):p("",!0)]),ve,t(v)?(s(),o("div",he,[u(S,null,{default:_(()=>[e("tbody",null,[ge,e("tr",null,[ye,e("td",null,[t(m)?(s(),o("span",be,"加载中...")):p("",!0),!t(m)&&t(c).length==0?(s(),o("div",ke,"暂时还没有可选的网站。")):p("",!0),N(e("div",null,[u(Y,{items:t(c)},{default:_(()=>[u(B,{header:"网站名称"},{body:_(({data:r})=>[A(x(r.name),1)]),_:1}),u(B,{header:"操作",class:"one op"},{body:_(({data:r})=>[T("server:"+r.id)?(s(),o("a",{key:1,href:"",onClick:$(k=>M("server:"+r.id),["prevent"])},Ie,8,xe)):(s(),o("a",{key:0,href:"",onClick:$(k=>V(r),["prevent"])},"选中",8,$e))]),_:1})]),_:1},8,["items"])],512),[[E,!t(m)&&t(c).length>0]]),u(oe,{ref_key:"serverPageRef",ref:f,onChange:J},null,512)])])])]),_:1})])):p("",!0),t(v)?p("",!0):(s(),o("div",je,[u(X,{size:"small",type:"button",onClick:$(b,["prevent"])})]))]))}},Pe=e("header",null,"设置防护对象",-1),Oe=["value"],we=e("td",{class:"title"},"高防产品",-1),Le={key:0},Te={key:1,class:"red"},Ae=e("td",null,"高防IP",-1),Be={key:0},De={key:1,class:"red"},Ne=e("td",null,"防护对象",-1),Ee={key:0},Me={key:1,class:"red"},ft={__name:"updateObjectsPopup",setup(C){const a=K(new ee);return(I,h)=>(s(),D(q,null,{default:_(()=>[Pe,u(Z,{action:"$",onSuccess:t(a).success},{default:_(()=>[e("input",{type:"hidden",name:"userInstanceId",value:t(a).userInstance.id},null,8,Oe),u(S,null,{default:_(()=>[e("tbody",null,[e("tr",null,[we,e("td",null,[t(a).userInstance.package.id>0?(s(),o("div",Le,x(t(a).userInstance.package.summary),1)):(s(),o("span",Te,"已删除"))])]),e("tr",null,[Ae,e("td",null,[t(a).userInstance.instance.id>0?(s(),o("div",Be,[(s(!0),o(P,null,O(t(a).userInstance.instance.ipAddresses,f=>(s(),o("div",null,x(f),1))),256))])):(s(),o("span",De,"已删除"))])]),e("tr",null,[Ne,e("td",null,[t(a).userInstance.isAvailable&&t(a).userInstance.user.id>0?(s(),o("div",Ee,[u(Se,{"v-objects":t(a).userInstance.objects,"v-user-id":t(a).userInstance.user.id},null,8,["v-objects","v-user-id"])])):(s(),o("span",Me,"实例已经失效，无法设置防护对象"))])])])]),_:1}),N(u(Q,null,null,512),[[E,t(a).userInstance.isAvailable&&t(a).userInstance.user.id>0]])]),_:1},8,["onSuccess"])]),_:1}))}};export{ft as default};
