import{P as A}from"./app-BnDFQ2zy.js";import{i as T,c as V}from"./app-DISTCiac.js";import{_ as w}from"./app-_N2IGwgj.js";import{_ as M}from"./app-57xpzLDR.js";import{r as _,J as P,o as S,g as y,a as e,u as n,b as t,w as o,f as l,d as p,e as h,i as H,bb as E,c as $}from"./app-BYx064nO.js";import{C as u}from"./app-IrmNFWm4.js";import{_ as O}from"./app--BlRpVz_.js";import{_ as N}from"./app-1SA4suwN.js";import{_ as x}from"./app-C5GVF480.js";import{_ as v}from"./app-CryyhHYs.js";import{_ as b}from"./app-BllqptDW.js";import{T as I,a as R}from"./app-DRGtcCVV.js";import{D}from"./app-D0jdtzyy.js";import"./app-GoR2fTOd.js";import"./app-DR284fT9.js";import"./app-DNadG4GC.js";import"./app-DPMEyUYH.js";import"./app-tUtHmy3n.js";import"./app-CK9Tk_hc.js";import"./app-DYkSpHuE.js";import"./app-TBcc1obG.js";function q(){T(this)}const U=["value"],B=e("td",{class:"title"},"启用CORS自适应跨域",-1),k={class:"comment"},G={colspan:"2"},L=e("td",null,"允许的请求方法列表",-1),J={class:"comment"},j=e("td",null,"允许的请求报头",-1),z={class:"comment"},F=e("td",null,"预检结果缓存时间",-1),K=e("span",null,"秒",-1),Q={class:"comment"},W=e("td",null,"允许服务器暴露的报头",-1),X={class:"comment"},Y=e("td",null,"实际请求方法",-1),Z={class:"comment"},ee=e("td",null,"仅OPTIONS有效",-1),le=e("p",{class:"comment"},"选中后，表示当前CORS设置仅在OPTIONS方法请求时有效。",-1),te=e("div",{class:"margin"},null,-1),oe={__name:"HTTPCORSHeaderConfigBox",props:["modelValue"],setup(f){const c=f,{config:a,maxAgeSecondsString:i,moreOptionsVisible:m}=function(){let d=c.modelValue;d==null&&(d={isOn:!1,allowMethods:[],allowOrigin:"",allowCredentials:!0,exposeHeaders:[],maxAge:0,requestHeaders:[],requestMethod:"",optionsMethodOnly:!1}),d.allowMethods==null&&(d.allowMethods=[]),d.exposeHeaders==null&&(d.exposeHeaders=[]);let s=d.maxAge.toString();return s=="0"&&(s=""),{config:_(d),maxAgeSecondsString:_(s),moreOptionsVisible:_(!1)}}(),C=function(d){m.value=d},g=function(){["PUT","GET","POST","DELETE","HEAD","OPTIONS","PATCH"].forEach(function(s){a.value.allowMethods.$contains(s)||a.value.allowMethods.push(s)})};return P(i,function(d){let s=parseInt(d);isNaN(s)&&(s=0),a.value.maxAge=s}),(d,s)=>(S(),y("div",null,[e("input",{type:"hidden",name:"corsJSON",value:JSON.stringify(n(a))},null,8,U),t(D,null,{default:o(()=>[e("tbody",null,[e("tr",null,[B,e("td",null,[t(O,{modelValue:n(a).isOn,"onUpdate:modelValue":s[0]||(s[0]=r=>n(a).isOn=r)},null,8,["modelValue"]),e("p",k,[l("启用后，自动在响应报头中增加对应的 "),t(u,null,{default:o(()=>[l("Access-Control-*")]),_:1}),l(" 相关内容。 ")])])])]),p(e("tbody",null,[e("tr",null,[e("td",G,[t(N,{onChange:C})])])],512),[[h,n(a).isOn]]),p(e("tbody",null,[e("tr",null,[L,e("td",null,[t(b,{"v-methods":n(a).allowMethods},null,8,["v-methods"]),e("p",J,[e("a",{href:"",onClick:H(g,["prevent"])},"[添加默认]"),l("。 "),t(u,null,{default:o(()=>[l("Access-Control-Allow-Methods")]),_:1}),l(" 值设置。所访问资源允许使用的方法列表，不设置则表示默认为 "),t(u,null,{default:o(()=>[l("PUT")]),_:1}),l(" 、 "),t(u,null,{default:o(()=>[l("GET")]),_:1}),l(" 、 "),t(u,null,{default:o(()=>[l("POST")]),_:1}),l(" 、 "),t(u,null,{default:o(()=>[l("DELETE")]),_:1}),l(" 、 "),t(u,null,{default:o(()=>[l("HEAD")]),_:1}),l(" 、 "),t(u,null,{default:o(()=>[l("OPTIONS")]),_:1}),l(" 、 "),t(u,null,{default:o(()=>[l("PATCH")]),_:1}),l(" 。 ")])])]),e("tr",null,[j,e("td",null,[t(v,{"v-values":n(a).requestHeaders},null,8,["v-values"]),e("p",z,[t(u,null,{default:o(()=>[l("Access-Control-Allow-Headers")]),_:1}),l("值设置，如果没有填写则自动默认为请求报头中"),t(u,null,{default:o(()=>[l("Access-Control-Request-Headers")]),_:1}),l("的内容。")])])]),e("tr",null,[F,e("td",null,[t(I,null,{default:o(()=>[t(x,{type:"text",style:{width:"6em"},maxlength:"6",modelValue:n(i),"onUpdate:modelValue":s[1]||(s[1]=r=>E(i)?i.value=r:null)},null,8,["modelValue"]),t(R,null,{default:o(()=>[K]),_:1})]),_:1}),e("p",Q,[t(u,null,{default:o(()=>[l("Access-Control-Max-Age")]),_:1}),l(" 值设置。预检结果缓存时间，0或者不填表示使用浏览器默认设置。注意每个浏览器有不同的缓存时间上限。 ")])])]),e("tr",null,[W,e("td",null,[t(v,{"v-values":n(a).exposeHeaders},null,8,["v-values"]),e("p",X,[t(u,null,{default:o(()=>[l("Access-Control-Expose-Headers")]),_:1}),l(" 值设置。允许服务器暴露的报头，请注意报头的大小写。 ")])])]),e("tr",null,[Y,e("td",null,[t(x,{type:"text",modelValue:n(a).requestMethod,"onUpdate:modelValue":s[2]||(s[2]=r=>n(a).requestMethod=r),class:"w-full"},null,8,["modelValue"]),e("p",Z,[t(u,null,{default:o(()=>[l("Access-Control-Request-Method")]),_:1}),l(" 值设置。实际请求服务器时使用的方法，比如 "),t(u,null,{default:o(()=>[l("POST")]),_:1}),l(" 。 ")])])]),e("tr",null,[ee,e("td",null,[t(O,{modelValue:n(a).optionsMethodOnly,"onUpdate:modelValue":s[3]||(s[3]=r=>n(a).optionsMethodOnly=r)},null,8,["modelValue"]),le])])],512),[[h,n(a).isOn&&n(m)]])]),_:1}),te]))}},se=e("header",null,"CORS跨域设置",-1),ne=["value"],Me={__name:"updateCORSPopup",setup(f){const c=V(new q);return(a,i)=>(S(),$(A,null,{default:o(()=>[se,t(w,{action:"$",onSuccess:n(c).success},{default:o(()=>[e("input",{type:"hidden",name:"headerPolicyId",value:n(c).headerPolicyId},null,8,ne),t(oe,{modelValue:n(c).cors,"onUpdate:modelValue":i[0]||(i[0]=m=>n(c).cors=m)},null,8,["modelValue"]),t(M)]),_:1},8,["onSuccess"])]),_:1}))}};export{Me as default};
