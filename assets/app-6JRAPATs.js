import{i as x,c as T}from"./app-DISTCiac.js";import{e as P}from"./app-DUeSaIYz.js";import{W as B}from"./app-DQhYsbJs.js";import{_ as U}from"./app-diI1Q6nu.js";import{_ as L}from"./app-BoQP8Z_5.js";import{C as w}from"./app-D2_aZ1I5.js";import{C as V}from"./app-CnNkgeR8.js";import{C as g}from"./app-DzOFJRH2.js";import{o as d,g as f,u as e,c as m,w as o,h as r,n as F,b,F as v,a as i,t as l,f as c,D as S}from"./app-BYx064nO.js";import"./app-BXiLqtxA.js";import"./app-CqvvE0jO.js";import"./app-CK9Tk_hc.js";import"./app-CAeEyuA3.js";import"./app-DoRtcMJm.js";import"./app-DPMEyUYH.js";function $(){const{utils:u}=x(this);u.setEcharts(P),this.splitFormat=function(t){let h=t.match(/^([0-9.]+)([a-zA-Z]+)$/);return[h[1],h[2]]},this.isLoading=!0,this.dashboard={},this.$delay(function(){this.$post("$").success(function(t){this.isLoading=!1;for(let a in t.data)this[a]=t.data[a];let h=this.uiConfig.bandwidthUnit;(h==null||h.length==0)&&(h="bit"),h=="bit"&&(this.dashboard.monthlyPeekBandwidthBytes=this.dashboard.monthlyPeekBandwidthBytes.replace("B","b"),this.dashboard.dailyPeekBandwidthBytes=this.dashboard.dailyPeekBandwidthBytes.replace("B","b"));{let a=this.splitFormat(this.dashboard.monthlyTrafficBytes);this.dashboard.monthlyTrafficBytes=a[0],this.dashboard.monthlyTrafficBytesUnit=a[1]}{let a=this.splitFormat(this.dashboard.monthlyPeekBandwidthBytes);this.dashboard.monthlyPeekBandwidthBytes=a[0],this.dashboard.monthlyPeekBandwidthBytesUnit=a[1]}{let a=this.splitFormat(this.dashboard.dailyTrafficBytes);this.dashboard.dailyTrafficBytes=a[0],this.dashboard.dailyTrafficBytesUnit=a[1]}{let a=this.splitFormat(this.dashboard.dailyPeekBandwidthBytes);this.dashboard.dailyPeekBandwidthBytes=a[0],this.dashboard.dailyPeekBandwidthBytesUnit=a[1]}this.$delay(function(){this.reloadDailyTrafficChart(),this.reloadDailyPeekBandwidthChart()})})}),this.reloadDailyTrafficChart=function(){if(this.uiConfig.bandwidthUnit,!this.uiConfig.showTrafficCharts)return;let t=this.dailyTrafficStats,h=!1,a=u.bytesAxis(t,function(n){return n.cachedBytes!=null&&(h=!0),n.bytes}),s=[];h&&(s=[{name,type:"line",data:t.map(function(n){return n.cachedBytes/a.divider}),itemStyle:{color:"rgba(97,160,168,0.2)"},areaStyle:{},smooth:!0}]),u.renderLineChart({id:"daily-traffic-chart",values:t,axis:a,x:function(n){return n.day},value:function(n){return n.bytes/a.divider},tooltip:function(n,_){let y=n.dataIndex,C=t[y].cachedBytes!=null,k=0;C&&(k=Math.round(t[y].cachedBytes*1e4/t[y].bytes)/100);let p=_[y].day+"<br/>流量："+u.formatBytes(_[y].bytes);return C&&(p+="<br/>缓存流量："+u.formatBytes(_[y].cachedBytes),p+="<br/>缓存命中率："+k+"%"),p},series:s})},this.reloadDailyPeekBandwidthChart=function(){let t=this.uiConfig.bandwidthUnit;if(!this.uiConfig.showBandwidthCharts)return;let h=this.dailyPeekBandwidthStats,a=u.bitsAxis(h,function(s){let n=s.bytes;return t=="bit"&&(n*=8),n});u.renderLineChart({id:"daily-peek-bandwidth-chart",values:h,axis:a,x:function(s){return s.day},value:function(s){let n=s.bytes;return t=="bit"&&(n*=8),n/a.divider},tooltip:function(s,n){if(s.componentType=="markLine")return s.name;let _=s.dataIndex,y=n[_].bytes;return t=="bit"&&(y*=8),n[_].day+"<br/>峰值带宽："+u.formatBits(y)},left:30,right:40,markLine:{precision:4,data:[{name:this.bandwidthPercentile+"th",yAxis:this.bandwidthPercentileBits/a.divider}],symbol:"none",lineStyle:{color:u.chartColor("red")}}})}}const D={href:"/settings/email-verify"},I={href:"/settings/mobile-verify"},M=i("a",{href:"/settings/identity"},"实名认证",-1),A={class:"ui column"},N=i("h5",null,"加速网站数量",-1),R={class:"value"},z={key:0,class:"ui column"},E=i("h5",null,"本月总流量",-1),W={class:"value"},j={key:1,class:"ui column"},Z=i("h5",null,"本月带宽峰值",-1),q={class:"value"},G={key:2,class:"ui column"},H=i("h5",null,"今日流量",-1),J={class:"value"},K={key:3,class:"ui column"},O=i("h5",null,"今日带宽峰值",-1),Q={class:"value"},X=["href","target"],Y={key:0,class:"gray"},tt={key:1,class:"pi pi-external-link tiny"},et={class:"gray small ml-1"},it={key:1},at=i("span",{class:"text-base gray"},"（单位：字节）",-1),st=i("div",{class:"chart-box",id:"daily-traffic-chart"},null,-1),nt={key:2},dt=i("div",{class:"chart-box",id:"daily-peek-bandwidth-chart"},null,-1),Ct={__name:"index",setup(u){const t=T(new $);return(h,a)=>(d(),f(v,null,[e(t).emailVerificationMessage.length>0?(d(),m(B,{key:0},{default:o(()=>[i("a",D,l(e(t).emailVerificationMessage),1)]),_:1})):r("",!0),e(t).mobileVerificationMessage.length>0?(d(),m(B,{key:1},{default:o(()=>[i("a",I,l(e(t).mobileVerificationMessage),1)]),_:1})):r("",!0),e(t).isVerified?r("",!0):(d(),m(B,{key:2},{default:o(()=>[c("您的账号正在审核中，请耐心等待完成，暂时不能使用相关功能。")]),_:1})),e(t).isIdentified?r("",!0):(d(),m(B,{key:3},{default:o(()=>[M,c("后才能使用相关功能。 ")]),_:1})),e(t).isLoading?(d(),m(L,{key:4},{default:o(()=>[c("数据加载中...")]),_:1})):r("",!0),e(t).isLoading?r("",!0):(d(),m(U,{key:5,class:F(["ui columns grid counter-chart",{"three columns":!e(t).uiConfig.showTrafficCharts||!e(t).uiConfig.showBandwidthCharts,"four columns":e(t).uiConfig.showTrafficCharts&&e(t).uiConfig.showBandwidthCharts}])},{default:o(()=>[i("div",A,[N,i("div",R,[i("span",null,l(e(t).dashboard.countServers),1),c("个")])]),e(t).uiConfig.showTrafficCharts?(d(),f("div",z,[E,i("div",W,[i("span",null,l(e(t).dashboard.monthlyTrafficBytes),1),c(l(e(t).dashboard.monthlyTrafficBytesUnit),1)])])):r("",!0),e(t).uiConfig.showBandwidthCharts?(d(),f("div",j,[Z,i("div",q,[i("span",null,l(e(t).dashboard.monthlyPeekBandwidthBytes),1),c(l(e(t).dashboard.monthlyPeekBandwidthBytesUnit),1)])])):r("",!0),e(t).uiConfig.showTrafficCharts?(d(),f("div",G,[H,i("div",J,[i("span",null,l(e(t).dashboard.dailyTrafficBytes),1),c(l(e(t).dashboard.dailyTrafficBytesUnit),1)])])):r("",!0),e(t).uiConfig.showBandwidthCharts?(d(),f("div",K,[O,i("div",Q,[i("span",null,l(e(t).dashboard.dailyPeekBandwidthBytes),1),c(l(e(t).dashboard.dailyPeekBandwidthBytesUnit),1)])])):r("",!0)]),_:1},8,["class"])),b(V,null,{default:o(()=>[e(t).posts&&e(t).posts.length>0?(d(),m(w,{key:0},{header:o(()=>[c("最新活动")]),default:o(()=>[(d(!0),f(v,null,S(e(t).posts,s=>(d(),m(g,{class:"!pb-1 !pt-0"},{value:o(()=>[i("a",{href:"/posts/post?postId="+s.id,target:s.type=="url"?"_blank":"_self"},[s.category&&s.category.name&&s.category.name.length>0?(d(),f("span",Y,"["+l(s.category.name)+"]",1)):r("",!0),c(" "+l(s.subject)+" ",1),s.type=="url"?(d(),f("i",tt)):r("",!0),c(),i("span",et,l(s.createdTime),1)],8,X)]),_:2},1024))),256))]),_:1})):r("",!0),e(t).uiConfig.showTrafficCharts&&!e(t).isLoading?(d(),f("div",it,[b(w,{cols:"1"},{header:o(()=>[c("近 30 日流量趋势 "),at]),default:o(()=>[b(g,null,{value:o(()=>[st]),_:1})]),_:1})])):r("",!0),e(t).uiConfig.showBandwidthCharts&&!e(t).isLoading?(d(),f("div",nt,[b(w,{cols:"1"},{header:o(()=>[c("近 30 日带宽趋势")]),default:o(()=>[b(g,null,{value:o(()=>[dt]),_:1})]),_:1})])):r("",!0)]),_:1})],64))}};export{Ct as default};
