import{i as ve,c as me}from"./app-DISTCiac.js";import{_ as he}from"./app-BAIc7wsg.js";import{_ as ye}from"./app-C7gR9zYq.js";import{_ as ge,aa as oe,r as m,o as s,g as i,b as n,w as l,f as r,u as a,t as v,h as c,a as o,i as _,L as q,c as f,F as H,D as k,n as ne,M as He,N as ke}from"./app-BYx064nO.js";import{_ as re}from"./app-57xpzLDR.js";import{_ as le}from"./app-Bx5jiAm1.js";import{W as ae}from"./app-DQhYsbJs.js";import{_ as h}from"./app-DU3b6xa5.js";import{T}from"./app-DNadG4GC.js";import{P as w}from"./app-TBcc1obG.js";import{_ as D}from"./app-x_fVWXrx.js";import{C as Pe}from"./app-IrmNFWm4.js";import{D as G}from"./app-D0jdtzyy.js";import{L as ie}from"./app-Vf6It1y-.js";import{_ as S}from"./app-CfEaOsVA.js";import{a as Re,_ as Ce}from"./app-Dj8c2KwC.js";import{T as de}from"./app-DoTJvLi7.js";import{_ as ue}from"./app-AqjyBPEM.js";import{_ as ce}from"./app-B-EzfWu7.js";import"./app-BXvxi6wb.js";import"./app-C9w-bzHc.js";import"./app-DyIe33QU.js";import"./app-5V9SnxW6.js";import"./app-DOaxShSm.js";import"./app-DR284fT9.js";import"./app-BXiLqtxA.js";import"./app-CqvvE0jO.js";import"./app-CK9Tk_hc.js";import"./app-CAeEyuA3.js";import"./app-DoRtcMJm.js";import"./app-DPMEyUYH.js";import"./app-BZMTWmMM.js";import"./app-51hQc1Cd.js";import"./app-CqAVEB_b.js";import"./app-Cqxz9tud.js";import"./app-aIb4ksxL.js";import"./app-DYkSpHuE.js";import"./app-CiA1rHoH.js";import"./app-RbQF51V8.js";import"./app-tUtHmy3n.js";import"./app-DGM5HqRo.js";import"./app-DG0hMi2p.js";import"./app-CBq6-G9z.js";import"./app-cRxw2ZDj.js";function be(){ve(this)}const R=b=>(He("data-v-35d5b8e5"),b=b(),ke(),b),qe={key:0},Se={key:0},$e=["value"],Ie={key:0,class:"mb-4"},Oe=["value"],Ne={key:1},Te={key:0},we=R(()=>o("div",{class:"margin"},null,-1)),De=["href"],Ge={key:1},ze=["onClick"],Le=R(()=>o("i",{class:"icon expand small"},null,-1)),Ve={class:"label-group mt-1"},Be={key:0,class:"label-group"},Ae={key:1,class:"label-group"},Je={key:2},Ue=["onClick"],Me=["onClick"],Fe=R(()=>o("h5",{class:"group-header"},"其他设置",-1)),We={class:"title"},je={key:0,class:"label-group"},Ee={href:""},Ke=["onClick"],Qe={class:"title"},Xe={key:0,class:"label-group"},Ye={href:""},Ze=["onClick"],xe={key:2,class:"mb-4"},es=["value"],ss={key:3},ts={key:0},os=["href"],ns={key:1},rs=["onClick"],ls=R(()=>o("i",{class:"icon expand small"},null,-1)),as={class:"label-group mt-1"},is={key:0,class:"label-group"},ds={key:1,class:"label-group"},us={key:2},cs={key:0},ps=R(()=>o("span",{class:"red small"},'建议使用当前页面下方的"CORS自适应跨域"功能代替Access-Control-*-*相关报头。',-1)),fs=[ps],_s=["onClick"],vs=["onClick"],ms=R(()=>o("h5",{class:"group-header"},"其他设置",-1)),hs={class:"title"},ys={key:0,class:"label-group"},gs={href:""},Hs=["onClick"],ks={key:0,class:"label-group"},Ps={href:""},Rs=["onClick"],Cs=R(()=>o("td",{class:"title"},"CORS自适应跨域",-1)),bs={key:0,class:"green"},qs={key:1,class:"disabled"},Ss={class:"comment"},$s={key:0},Is={key:1},Os=R(()=>o("div",{class:"margin"},null,-1)),Ns={__name:"HTTPHeaderPolicyBox",props:["v-request-header-policy","v-request-header-ref","v-response-header-policy","v-response-header-ref","v-params","v-is-location","v-is-group","v-has-group-request-config","v-has-group-response-config","v-group-setting-url"],setup(b){const p=oe("$utils"),O=oe("$Tea"),y=b,{type:g,typeName:Gs,requestHeaderRef:z,responseHeaderRef:L,requestSettingHeaders:$,requestDeletingHeaders:V,requestNonStandardHeaders:B,responseSettingHeaders:I,responseDeletingHeaders:A,responseNonStandardHeaders:J,responseCORS:U}=function(){let t="response";window.location.hash=="#request"&&(t="request");let e=y.vRequestHeaderRef;e==null&&(e={isPrior:!1,isOn:!0,headerPolicyId:0});let u=y.vResponseHeaderRef;u==null&&(u={isPrior:!1,isOn:!0,headerPolicyId:0});let X=[],Y=[],Z=[],C=y.vRequestHeaderPolicy;C!=null&&(C.setHeaders!=null&&(X=C.setHeaders),C.deleteHeaders!=null&&(Y=C.deleteHeaders),C.nonStandardHeaders!=null&&(Z=C.nonStandardHeaders));let x=[],ee=[],se=[],P=y.vResponseHeaderPolicy;P!=null&&(P.setHeaders!=null&&(x=P.setHeaders),P.deleteHeaders!=null&&(ee=P.deleteHeaders),P.nonStandardHeaders!=null&&(se=P.nonStandardHeaders));let te={isOn:!1};return P.cors!=null&&(te=P.cors),{type:m(t),typeName:m(t=="request"?"请求":"响应"),requestHeaderRef:m(e),responseHeaderRef:m(u),requestSettingHeaders:m(X),requestDeletingHeaders:m(Y),requestNonStandardHeaders:m(Z),responseSettingHeaders:m(x),responseDeletingHeaders:m(ee),responseNonStandardHeaders:m(se),responseCORS:m(te)}}(),M=m(g),pe=function(t){fe(t.value)},fe=function(t){g.value=t,window.location.hash="#"+t},F=function(t){p.popup("/servers/server/settings/headers/createSetPopup?"+y.vParams+"&headerPolicyId="+t+"&type="+g.value,{callback:function(){p.successRefresh("保存成功")}})},W=function(t,d){p.popup("/servers/server/settings/headers/createDeletePopup?"+y.vParams+"&headerPolicyId="+t+"&type="+d,{callback:function(){p.successRefresh("保存成功")}})},j=function(t,d){p.popup("/servers/server/settings/headers/createNonStandardPopup?"+y.vParams+"&headerPolicyId="+t+"&type="+d,{callback:function(){p.successRefresh("保存成功")}})},N=function(t,d){p.popup("/servers/server/settings/headers/updateSetPopup?"+y.vParams+"&headerPolicyId="+t+"&headerId="+d+"&type="+g.value,{callback:function(){p.successRefresh("保存成功")}})},E=function(t,d){p.confirm("确定要删除'"+d+"'吗？",function(){O.action("/servers/server/settings/headers/deleteDeletingHeader").params({headerPolicyId:t,headerName:d}).post().refresh()})},K=function(t,d){p.confirm("确定要删除'"+d+"'吗？",function(){O.action("/servers/server/settings/headers/deleteNonStandardHeader").params({headerPolicyId:t,headerName:d}).post().refresh()})},Q=function(t,d,e){p.confirm("确定要删除此报头吗？",function(){O.action("/servers/server/settings/headers/delete").post().params({headerPolicyId:t,type:d,headerId:e}).refresh()})},_e=function(t){p.popup("/servers/server/settings/headers/updateCORSPopup?"+y.vParams+"&headerPolicyId="+t+"&type="+g.value,{callback:function(){p.successRefresh("保存成功")}})};return(t,d)=>(s(),i("div",null,[n(Ce,{modelValue:M.value,"onUpdate:modelValue":d[0]||(d[0]=e=>M.value=e),onChange:pe,class:"mb-4"},{default:l(()=>[n(Re,null,{default:l(()=>[n(de,{code:"response"},{default:l(()=>[r(" 响应报头"),a(I).length>0?(s(),i("span",qe,"("+v(a(I).length)+")",1)):c("",!0)]),_:1}),n(de,{code:"request"},{default:l(()=>[r(" 请求报头"),a($).length>0?(s(),i("span",Se,"("+v(a($).length)+")",1)):c("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"]),o("input",{type:"hidden",name:"type",value:a(g)},null,8,$e),(t.vIsLocation||t.vIsGroup)&&a(g)=="request"?(s(),i("div",Ie,[o("input",{type:"hidden",name:"requestHeaderJSON",value:JSON.stringify(a(z))},null,8,Oe),n(G,null,{default:l(()=>[n(le,{"v-config":a(z)},null,8,["v-config"])]),_:1}),n(re)])):c("",!0),(!t.vIsLocation&&!t.vIsGroup||a(z).isPrior)&&a(g)=="request"?(s(),i("div",Ne,[t.vHasGroupRequestConfig?(s(),i("div",Te,[we,n(ae,null,{default:l(()=>[r("由于已经在当前"),o("a",{href:t.vGroupSettingUrl+"#request"},"网站分组",8,De),r("中进行了对应的配置，在这里的配置将不会生效。 ")]),_:1})])):c("",!0),o("div",{class:ne({"opacity-mask":t.vHasGroupRequestConfig})},[n(ue,{"action-create":"",onClick:d[1]||(d[1]=_(e=>F(t.vRequestHeaderPolicy.id),["prevent"]))},{default:l(()=>[r("添加新请求报头")]),_:1}),n(q),a($).length==0?(s(),f(ce,{key:0},{default:l(()=>[r("暂时还没有自定义请求报头。")]),_:1})):c("",!0),a($).length>0?(s(),i("div",Ge,[n(ie,{items:a($)},{default:l(()=>[n(S,{header:"名称",class:"name-column",frozen:""},{body:l(({data:e})=>[o("a",{href:"",onClick:_(u=>N(t.vRequestHeaderPolicy.id,e.id),["prevent"])},[r(v(e.name)+" ",1),Le],8,ze),o("div",Ve,[e.status!=null&&e.status.codes!=null&&!e.status.always?(s(),i("span",Be,[(s(!0),i(H,null,k(e.status.codes,u=>(s(),f(h,{key:u},{default:l(()=>[r(v(u),1)]),_:2},1024))),128))])):c("",!0),e.methods!=null&&e.methods.length>0?(s(),i("span",Ae,[(s(!0),i(H,null,k(e.methods,u=>(s(),f(h,{key:u},{default:l(()=>[r(v(u),1)]),_:2},1024))),128))])):c("",!0),e.domains!=null&&e.domains.length>0?(s(),i("span",Je,[(s(!0),i(H,null,k(e.domains,u=>(s(),f(h,{key:u},{default:l(()=>[r(v(u),1)]),_:2},1024))),128))])):c("",!0),e.shouldAppend?(s(),f(h,{key:3},{default:l(()=>[r("附加")]),_:1})):c("",!0),e.disableRedirect?(s(),f(h,{key:4},{default:l(()=>[r("跳转禁用")]),_:1})):c("",!0),e.shouldReplace&&e.replaceValues!=null&&e.replaceValues.length>0?(s(),f(h,{key:5},{default:l(()=>[r("替换")]),_:1})):c("",!0)])]),_:1}),n(S,{header:"值",class:"description-column"},{body:l(({data:e})=>[r(v(e.value),1)]),_:1}),n(S,{header:"操作",class:"two op",frozen:"","align-frozen":"right"},{body:l(({data:e})=>[o("a",{href:"",onClick:_(u=>N(t.vRequestHeaderPolicy.id,e.id),["prevent"])},"修改",8,Ue),r("   "),o("a",{href:"",onClick:_(u=>Q(t.vRequestHeaderPolicy.id,"setHeader",e.id),["prevent"])},"删除",8,Me)]),_:1})]),_:1},8,["items"])])):c("",!0),Fe,n(G,null,{default:l(()=>[o("tbody",null,[o("tr",null,[o("td",We,[r("删除报头 "),n(D,{content:"可以通过此功能删除转发到源站的请求报文中不需要的报头"})]),o("td",null,[a(V).length>0?(s(),i("div",je,[(s(!0),i(H,null,k(a(V),e=>(s(),f(T,{outlined:""},{default:l(()=>[r(v(e)+" ",1),o("a",Ee,[o("i",{class:"icon remove",title:"删除",onClick:_(u=>E(t.vRequestHeaderPolicy.id,e),["prevent"])},null,8,Ke)])]),_:2},1024))),256)),n(q)])):c("",!0),n(w,{secondary:"",size:"small",type:"button",onClick:d[2]||(d[2]=_(e=>W(t.vRequestHeaderPolicy.id,"request"),["prevent"]))})])]),o("tr",null,[o("td",Qe,[r("非标报头 "),n(D,{content:"可以通过此功能设置转发到源站的请求报文中非标准的报头，比如hello_world"})]),o("td",null,[a(B).length>0?(s(),i("div",Xe,[(s(!0),i(H,null,k(a(B),e=>(s(),f(T,{outlined:""},{default:l(()=>[r(v(e)+" ",1),o("a",Ye,[o("i",{class:"icon remove",title:"删除",onClick:_(u=>K(t.vRequestHeaderPolicy.id,e),["prevent"])},null,8,Ze)])]),_:2},1024))),256)),n(q)])):c("",!0),n(w,{secondary:"",size:"small",type:"button",onClick:d[3]||(d[3]=_(e=>j(t.vRequestHeaderPolicy.id,"request"),["prevent"]))})])])])]),_:1})],2)])):c("",!0),(t.vIsLocation||t.vIsGroup)&&a(g)=="response"?(s(),i("div",xe,[o("input",{type:"hidden",name:"responseHeaderJSON",value:JSON.stringify(a(L))},null,8,es),n(G,null,{default:l(()=>[n(le,{"v-config":a(L)},null,8,["v-config"])]),_:1}),n(re)])):c("",!0),(!t.vIsLocation&&!t.vIsGroup||a(L).isPrior)&&a(g)=="response"?(s(),i("div",ss,[t.vHasGroupResponseConfig?(s(),i("div",ts,[n(ae,null,{default:l(()=>[r("由于已经在当前"),o("a",{href:t.vGroupSettingUrl+"#response"},"网站分组",8,os),r("中进行了对应的配置，在这里的配置将不会生效。 ")]),_:1})])):c("",!0),o("div",{class:ne({"opacity-mask":t.vHasGroupResponseConfig})},[n(ue,{"action-create":"",onClick:d[4]||(d[4]=_(e=>F(t.vResponseHeaderPolicy.id),["prevent"]))},{default:l(()=>[r("添加新响应报头")]),_:1}),n(q),a(I).length==0?(s(),f(ce,{key:0},{default:l(()=>[r("暂时还没有自定义响应报头。")]),_:1})):c("",!0),a(I).length>0?(s(),i("div",ns,[n(ie,{items:a(I)},{default:l(()=>[n(S,{header:"名称",class:"name-column",frozen:""},{body:l(({data:e})=>[o("a",{href:"",onClick:_(u=>N(t.vResponseHeaderPolicy.id,e.id),["prevent"])},[r(v(e.name)+" ",1),ls],8,rs),o("div",as,[e.status!=null&&e.status.codes!=null&&!e.status.always?(s(),i("span",is,[(s(!0),i(H,null,k(e.status.codes,u=>(s(),f(h,{key:u},{default:l(()=>[r(v(u),1)]),_:2},1024))),128))])):c("",!0),e.methods!=null&&e.methods.length>0?(s(),i("span",ds,[(s(!0),i(H,null,k(e.methods,u=>(s(),f(h,{key:u},{default:l(()=>[r(v(u),1)]),_:2},1024))),128))])):c("",!0),e.domains!=null&&e.domains.length>0?(s(),i("span",us,[(s(!0),i(H,null,k(e.domains,u=>(s(),f(h,{key:u},{default:l(()=>[r(v(u),1)]),_:2},1024))),128))])):c("",!0),e.shouldAppend?(s(),f(h,{key:3},{default:l(()=>[r("附加")]),_:1})):c("",!0),e.disableRedirect?(s(),f(h,{key:4},{default:l(()=>[r("跳转禁用")]),_:1})):c("",!0),e.shouldReplace&&e.replaceValues!=null&&e.replaceValues.length>0?(s(),f(h,{key:5},{default:l(()=>[r("替换")]),_:1})):c("",!0)]),e.name=="Access-Control-Allow-Origin"&&e.value=="*"?(s(),i("div",cs,fs)):c("",!0)]),_:1}),n(S,{header:"值",class:"description-column"},{body:l(({data:e})=>[r(v(e.value),1)]),_:1}),n(S,{header:"操作",class:"two op",frozen:"","align-frozen":"right"},{body:l(({data:e})=>[o("a",{href:"",onClick:_(u=>N(t.vResponseHeaderPolicy.id,e.id),["prevent"])},"修改",8,_s),r("   "),o("a",{href:"",onClick:_(u=>Q(t.vResponseHeaderPolicy.id,"setHeader",e.id),["prevent"])},"删除",8,vs)]),_:1})]),_:1},8,["items"])])):c("",!0),ms,n(G,null,{default:l(()=>[o("tbody",null,[o("tr",null,[o("td",hs,[r("删除报头 "),n(D,{content:"可以通过此功能删除响应报文中不需要的报头"})]),o("td",null,[a(A).length>0?(s(),i("div",ys,[(s(!0),i(H,null,k(a(A),e=>(s(),f(T,{outlined:""},{default:l(()=>[r(v(e)+"   ",1),o("a",gs,[o("i",{class:"icon remove small",title:"删除",onClick:_(u=>E(t.vResponseHeaderPolicy.id,e),["prevent"])},null,8,Hs)])]),_:2},1024))),256)),n(q)])):c("",!0),n(w,{secondary:"",size:"small",type:"button",onClick:d[5]||(d[5]=_(e=>W(t.vResponseHeaderPolicy.id,"response"),["prevent"]))})])]),o("tr",null,[o("td",null,[r("非标报头 "),n(D,{content:"可以通过此功能设置响应报文中非标准的报头，比如hello_world"})]),o("td",null,[a(J).length>0?(s(),i("div",ks,[(s(!0),i(H,null,k(a(J),e=>(s(),f(T,{outlined:""},{default:l(()=>[r(v(e)+"   ",1),o("a",Ps,[o("i",{class:"icon remove small",title:"删除",onClick:_(u=>K(t.vResponseHeaderPolicy.id,e),["prevent"])},null,8,Rs)])]),_:2},1024))),256)),n(q)])):c("",!0),n(w,{secondary:"",size:"small",type:"button",onClick:d[6]||(d[6]=_(e=>j(t.vResponseHeaderPolicy.id,"response"),["prevent"]))})])]),o("tr",null,[Cs,o("td",null,[a(U).isOn?(s(),i("span",bs,"已启用")):(s(),i("span",qs,"未启用")),r("   "),o("a",{href:"",onClick:d[7]||(d[7]=_(e=>_e(t.vResponseHeaderPolicy.id),["prevent"]))},"[修改]"),o("p",Ss,[a(U).isOn?(s(),i("span",Is,"服务器会")):(s(),i("span",$s,"启用后，服务器可以")),r("自动生成 "),n(Pe,null,{default:l(()=>[r("Access-Control-*-*")]),_:1}),r(" 相关的报头。 ")])])])])]),_:1})],2)])):c("",!0),Os]))}},Ts=ge(Ns,[["__scopeId","data-v-35d5b8e5"]]),ws={key:0},Ds={key:1},qt={__name:"index",setup(b){const p=me(new be);return(O,y)=>(s(),f(he,{ctx:a(p)},{default:l(()=>[a(p).featureIsOn?(s(),i("div",ws,[n(Ts,{"v-request-header-policy":a(p).requestHeaderPolicy,"v-response-header-policy":a(p).responseHeaderPolicy,"v-params":"serverId="+a(p).serverId,"v-has-group-request-config":a(p).hasGroupRequestConfig,"v-has-group-response-config":a(p).hasGroupResponseConfig,"v-group-setting-url":a(p).groupSettingURL},null,8,["v-request-header-policy","v-response-header-policy","v-params","v-has-group-request-config","v-has-group-response-config","v-group-setting-url"])])):c("",!0),a(p).featureIsOn?c("",!0):(s(),i("div",Ds,[n(ye)]))]),_:1},8,["ctx"]))}};export{qt as default};
