import{o as u,c as h,w as n,b as r,a as e,u as l,g as d,f as s,h as i,d as m,e as c,D as V,t as R,F as y}from"./app-BYx064nO.js";import{P as U}from"./app-BnDFQ2zy.js";import{i as v,c as L}from"./app-DISTCiac.js";import{_ as b}from"./app-57xpzLDR.js";import{_ as p}from"./app--BlRpVz_.js";import{_}from"./app-C5GVF480.js";import{_ as w,a as f}from"./app-BuHt2kYS.js";import{_ as k}from"./app-1SA4suwN.js";import{_ as g}from"./app-CxVImP9a.js";import{C as x}from"./app-IrmNFWm4.js";import{_ as $}from"./app-_N2IGwgj.js";import{D}from"./app-D0jdtzyy.js";import"./app-GoR2fTOd.js";import"./app-DR284fT9.js";import"./app-tUtHmy3n.js";import"./app-CK9Tk_hc.js";import"./app-DYkSpHuE.js";import"./app-51hQc1Cd.js";import"./app-CqAVEB_b.js";import"./app-Cqxz9tud.js";import"./app-DoRtcMJm.js";import"./app-aIb4ksxL.js";import"./app-DyIe33QU.js";import"./app-CHxME8Sw.js";import"./app-DNadG4GC.js";import"./app-DPMEyUYH.js";function S(){v(this),this.success=this.$NotifyPopup,this.statusOptions=[{code:301,text:"Moved Permanently"},{code:308,text:"Permanent Redirect"},{code:302,text:"Found"},{code:303,text:"See Other"},{code:307,text:"Temporary Redirect"}]}const B=e("header",null,"修改重写规则",-1),O=["value"],C=["value"],N=e("td",{class:"title"},"匹配规则 *",-1),P={key:0,class:"comment"},F=["href"],H={key:1,class:"comment"},I=["href"],Q=e("td",null,"目标URL *",-1),T={class:"comment"},E=["href"],M=["href"],j=e("td",null,"转发方式",-1),q=e("p",{class:"comment"},"隐式表示不在客户端显示重写后的URL；显式表示在客户端跳转URL，将会显示重写后的URL。",-1),z=e("td",null,"匹配条件",-1),A={colspan:"2"},G=e("td",null,"跳转状态码",-1),J=e("p",{class:"comment"},"通常使用默认的307即可。",-1),K=e("td",null,"代理主机名",-1),W={class:"comment"},X=["href"],Y=["href"],Z=e("td",null,"保留URL参数",-1),ee=e("p",{class:"comment"},"选中此选项，将会把用户输入的URL中的参数部分转发到目标URL上。",-1),te=e("td",null,"终止往下匹配",-1),le=e("p",{class:"comment"},"如果选中了此选项，一旦匹配成功，不会继续匹配其他的重写规则或路由规则。",-1),oe=e("td",null,"启用当前重写规则",-1),Oe={__name:"updatePopup",setup(re){const t=L(new S);return(ae,a)=>(u(),h(U,null,{default:n(()=>[B,r($,{action:"$",onSuccess:l(t).success},{default:n(()=>[e("input",{type:"hidden",name:"webId",value:l(t).webId},null,8,O),e("input",{type:"hidden",name:"rewriteRuleId",value:l(t).rewriteRule.id},null,8,C),r(D,null,{default:n(()=>[e("tbody",null,[e("tr",null,[N,e("td",null,[r(_,{type:"text",name:"pattern",maxlength:"500",placeholder:"比如 /post/(.+)",autofocus:"",modelValue:l(t).rewriteRule.pattern,"onUpdate:modelValue":a[0]||(a[0]=o=>l(t).rewriteRule.pattern=o),class:"w-full"},null,8,["modelValue"]),l(t).teaRole=="admin"?(u(),d("p",P,[s("需要符合正则表达式规范，"),e("a",{href:l(t).teaDocURL+"/docs/appendix/regexp/index",target:"_blank"},"正则表达式语法 »",8,F)])):i("",!0),l(t).teaRole=="user"?(u(),d("p",H,[s("需要符合正则表达式规范，"),e("a",{href:l(t).teaDocURL+"/docs/cdn/regexp.html",target:"_blank"},"正则表达式语法 »",8,I)])):i("",!0)])]),e("tr",null,[Q,e("td",null,[r(_,{type:"text",name:"replace",placeholder:"比如 /post/${1}.html",maxlength:"500",modelValue:l(t).rewriteRule.replace,"onUpdate:modelValue":a[1]||(a[1]=o=>l(t).rewriteRule.replace=o),class:"w-full"},null,8,["modelValue"]),e("p",T,[s("URL中可以包含一些"),l(t).teaRole=="admin"?(u(),d("a",{key:0,href:l(t).teaDocURL+"/docs/server/variables",target:"_blank"},"内置的变量",8,E)):i("",!0),l(t).teaRole=="user"?(u(),d("a",{key:1,href:l(t).teaDocURL+"/docs/cdn/variables.html",target:"_blank"},"内置的变量",8,M)):i("",!0),s("，并且可以用 "),r(x,null,{default:n(()=>[s("${1}")]),_:1}),s(" 、 "),r(x,null,{default:n(()=>[s("${2}")]),_:1}),s(" 等变量形式表示在匹配规则中匹配的第N个括号里的内容，也可以是一个完整的URL，比如：http://example.com/hello。 ")])])]),e("tr",null,[j,e("td",null,[r(w,{name:"mode",modelValue:l(t).rewriteRule.mode,"onUpdate:modelValue":a[2]||(a[2]=o=>l(t).rewriteRule.mode=o)},{default:n(()=>[r(f,{value:"proxy"},{default:n(()=>[s("隐式")]),_:1}),r(f,{value:"redirect"},{default:n(()=>[s("显式")]),_:1})]),_:1},8,["modelValue"]),q])]),e("tr",null,[z,e("td",null,[r(g,{"v-conds":l(t).rewriteRule.conds},null,8,["v-conds"])])]),e("tr",null,[e("td",A,[r(k)])])]),m(e("tbody",null,[m(e("tr",null,[G,e("td",null,[r(w,{name:"redirectStatus",modelValue:l(t).rewriteRule.redirectStatus,"onUpdate:modelValue":a[3]||(a[3]=o=>l(t).rewriteRule.redirectStatus=o)},{default:n(()=>[(u(!0),d(y,null,V(l(t).statusOptions,o=>(u(),h(f,{value:o.code},{default:n(()=>[s(R(o.code)+" "+R(o.text),1)]),_:2},1032,["value"]))),256))]),_:1},8,["modelValue"]),J])],512),[[c,l(t).rewriteRule.mode=="redirect"]]),m(e("tr",null,[K,e("td",null,[r(_,{type:"text",name:"proxyHost",placeholder:"比如 example.com",maxlength:"100",class:"w-full",modelValue:l(t).rewriteRule.proxyHost,"onUpdate:modelValue":a[4]||(a[4]=o=>l(t).rewriteRule.proxyHost=o)},null,8,["modelValue"]),e("p",W,[s("如果转发的方式为隐式而且目标URL为不同的域名时需要用到此选项，用于修改被代理服务接收到的域名，默认和客户端请求的主机名一致，通常不必填写，支持"),l(t).teaRole=="admin"?(u(),d("a",{key:0,href:l(t).teaDocURL+"/docs/server/variables",target:"_blank"},"请求变量",8,X)):i("",!0),l(t).teaRole=="user"?(u(),d("a",{key:1,href:l(t).teaDocURL+"/docs/cdn/variables.html",target:"_blank"},"请求变量",8,Y)):i("",!0),s("。 ")])])],512),[[c,l(t).rewriteRule.mode=="proxy"]]),e("tr",null,[Z,e("td",null,[r(p,{name:"withQuery",value:"1",modelValue:l(t).rewriteRule.withQuery,"onUpdate:modelValue":a[5]||(a[5]=o=>l(t).rewriteRule.withQuery=o)},null,8,["modelValue"]),ee])]),e("tr",null,[te,e("td",null,[r(p,{name:"isBreak",value:"1",modelValue:l(t).rewriteRule.isBreak,"onUpdate:modelValue":a[6]||(a[6]=o=>l(t).rewriteRule.isBreak=o)},null,8,["modelValue"]),le])]),e("tr",null,[oe,e("td",null,[r(p,{name:"isOn",value:"1",modelValue:l(t).rewriteRule.isOn,"onUpdate:modelValue":a[7]||(a[7]=o=>l(t).rewriteRule.isOn=o)},null,8,["modelValue"])])])],512),[[c,l(t).moreOptionsVisible]])]),_:1}),r(b)]),_:1},8,["onSuccess"])]),_:1}))}};export{Oe as default};
