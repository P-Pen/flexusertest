import{i as $,c as S}from"./app-DISTCiac.js";import{_ as w}from"./app-BAIc7wsg.js";import{_ as O}from"./app-C7gR9zYq.js";import{_ as C}from"./app-_N2IGwgj.js";import{_ as N}from"./app-57xpzLDR.js";import{r as p,J as L,o as u,g as h,a as t,u as e,b as l,w as r,c as R,h as P,d as _,e as f,bb as g,f as Q}from"./app-BYx064nO.js";import{_ as y}from"./app-C5GVF480.js";import{_ as T}from"./app-Bx5jiAm1.js";import{_ as B}from"./app-1SA4suwN.js";import{_ as G}from"./app-CxVImP9a.js";import{_ as U}from"./app-Bg2kbTeB.js";import{T as V,a as I}from"./app-DRGtcCVV.js";import{_ as k}from"./app--BlRpVz_.js";import{D}from"./app-D0jdtzyy.js";import"./app-BXvxi6wb.js";import"./app-C9w-bzHc.js";import"./app-DyIe33QU.js";import"./app-5V9SnxW6.js";import"./app-DOaxShSm.js";import"./app-DQhYsbJs.js";import"./app-BXiLqtxA.js";import"./app-CqvvE0jO.js";import"./app-CK9Tk_hc.js";import"./app-CAeEyuA3.js";import"./app-DoRtcMJm.js";import"./app-DPMEyUYH.js";import"./app-DR284fT9.js";import"./app-DYkSpHuE.js";import"./app-CHxME8Sw.js";import"./app-BuHt2kYS.js";import"./app-51hQc1Cd.js";import"./app-CqAVEB_b.js";import"./app-Cqxz9tud.js";import"./app-aIb4ksxL.js";import"./app-DNadG4GC.js";import"./app-x_fVWXrx.js";import"./app-TBcc1obG.js";import"./app-tUtHmy3n.js";function J(){$(this),this.success=this.$NotifyReloadSuccess("保存成功")}const W=["value"],A=t("td",{class:"title"},"启用5秒盾",-1),M=t("p",{class:"comment"}," 启用后，访问网站时，自动检查浏览器环境，阻止非正常访问。 ",-1),q={colspan:"2"},z=t("td",null,"验证有效期",-1),E=t("span",null,"秒",-1),j=t("p",{class:"comment"},"单个客户端验证通过后，在这个有效期内不再重复验证；如果为0则表示系统默认。",-1),F=t("td",null,"单IP最低QPS",-1),H=t("span",null,"请求数/秒",-1),K=t("p",{class:"comment"},"当某个IP在1分钟内平均QPS达到此值时，才会触发5秒盾；如果设置为0，表示任何访问都会触发。",-1),X=t("td",null,"加入IP白名单",-1),Y=t("p",{class:"comment"},"选中后，表示验证通过后，将访问者IP加入到临时白名单中，此IP下次访问时不再校验5秒盾；此白名单只对5秒盾有效，不影响其他规则。此选项主要用于可能无法正常使用Cookie的网站。",-1),Z=t("td",null,"例外URL",-1),tt={class:"bg-white dark:bg-black"},et=t("p",{class:"comment"},"如果填写了例外URL，表示这些URL跳过5秒盾不做处理。",-1),ot=t("td",null,"限制URL",-1),nt={class:"bg-white dark:bg-black"},st=t("p",{class:"comment"},"如果填写了限制URL，表示只对这些URL进行5秒盾处理；如果不填则表示支持所有的URL。",-1),lt=t("td",null,"匹配条件",-1),it={class:"bg-white dark:bg-black"},at={__name:"UAMConfigBox",props:["v-uam-config","v-is-location","v-is-group"],setup(v){const a=v,{config:s,moreOptionsVisible:m,minQPSPerIP:d,keyLife:c}=function(){let n=a.vUamConfig;return n==null&&(n={isPrior:!1,isOn:!1,addToWhiteList:!0,onlyURLPatterns:[],exceptURLPatterns:[],minQPSPerIP:0,keyLife:0}),n.onlyURLPatterns==null&&(n.onlyURLPatterns=[]),n.exceptURLPatterns==null&&(n.exceptURLPatterns=[]),{config:p(n),moreOptionsVisible:p(!1),minQPSPerIP:p(n.minQPSPerIP),keyLife:p(n.keyLife)}}(),b=function(){m.value=!m.value},x=function(n){s.value.conds=n};return L(d,function(n){let o=parseInt(n.toString());(isNaN(o)||o<0)&&(o=0),s.value.minQPSPerIP=o}),L(c,function(n){let o=parseInt(n);(isNaN(o)||o<=0)&&(o=0),s.value.keyLife=o}),(n,o)=>(u(),h("div",null,[t("input",{type:"hidden",name:"uamJSON",value:JSON.stringify(e(s))},null,8,W),l(D,null,{default:r(()=>[n.vIsLocation||n.vIsGroup?(u(),R(T,{key:0,"v-config":e(s)},null,8,["v-config"])):P("",!0),_(t("tbody",null,[t("tr",null,[A,t("td",null,[l(k,{modelValue:e(s).isOn,"onUpdate:modelValue":o[0]||(o[0]=i=>e(s).isOn=i)},null,8,["modelValue"]),M])])],512),[[f,!n.vIsLocation&&!n.vIsGroup||e(s).isPrior]]),_(t("tbody",null,[t("tr",null,[t("td",q,[l(B,{onChange:b})])])],512),[[f,e(s).isOn]]),_(t("tbody",null,[t("tr",null,[z,t("td",null,[l(V,null,{default:r(()=>[l(y,{type:"text",name:"keyLife",modelValue:e(c),"onUpdate:modelValue":o[1]||(o[1]=i=>g(c)?c.value=i:null),maxlength:"6",size:"6",style:{width:"6em"}},null,8,["modelValue"]),l(I,null,{default:r(()=>[E]),_:1})]),_:1}),j])]),t("tr",null,[F,t("td",null,[l(V,null,{default:r(()=>[l(y,{type:"text",name:"minQPSPerIP",maxlength:"6",style:{width:"6em"},modelValue:e(d),"onUpdate:modelValue":o[2]||(o[2]=i=>g(d)?d.value=i:null)},null,8,["modelValue"]),l(I,null,{default:r(()=>[H]),_:1})]),_:1}),K])]),t("tr",null,[X,t("td",null,[l(k,{modelValue:e(s).addToWhiteList,"onUpdate:modelValue":o[3]||(o[3]=i=>e(s).addToWhiteList=i)},null,8,["modelValue"]),Y])]),t("tr",null,[Z,t("td",tt,[l(U,{modelValue:e(s).exceptURLPatterns,"onUpdate:modelValue":o[4]||(o[4]=i=>e(s).exceptURLPatterns=i)},null,8,["modelValue"]),et])]),t("tr",null,[ot,t("td",nt,[l(U,{modelValue:e(s).onlyURLPatterns,"onUpdate:modelValue":o[5]||(o[5]=i=>e(s).onlyURLPatterns=i)},null,8,["modelValue"]),st])]),t("tr",null,[lt,t("td",it,[l(G,{"v-conds":e(s).conds,onChange:x},null,8,["v-conds"])])])],512),[[f,e(m)&&e(s).isOn]])]),_:1})]))}},rt={key:0},ut=["value"],mt={key:1},Ht={__name:"index",setup(v){const a=S(new J);return(s,m)=>(u(),R(w,{ctx:e(a)},{default:r(()=>[e(a).featureIsOn?(u(),h("div",rt,[l(C,{action:"$",onSuccess:e(a).success},{default:r(()=>[t("input",{type:"hidden",name:"serverId",value:e(a).serverId},null,8,ut),l(at,{"v-uam-config":e(a).uamConfig},null,8,["v-uam-config"]),l(N,{class:"mt-4"})]),_:1},8,["onSuccess"])])):P("",!0),e(a).featureIsOn?P("",!0):(u(),h("div",mt,[l(O,null,{default:r(()=>[Q("尚未为当前用户开通此功能。")]),_:1})]))]),_:1},8,["ctx"]))}};export{Ht as default};
