import{i as le,u as ie,c as ae}from"./app-DISTCiac.js";import{_ as ue}from"./app-BAIc7wsg.js";import{_ as se}from"./app-57xpzLDR.js";import{_ as re}from"./app-_N2IGwgj.js";import{r as P,o as l,g as f,u as n,F as q,D as ee,b as u,w as d,a as t,f as i,t as h,h as p,c as k,L as X,n as Y,aa as j,i as I,J as W,d as w,e as V,_ as de,a_ as M,bb as te,M as ce,N as pe}from"./app-BYx064nO.js";import{_ as F}from"./app-C5GVF480.js";import{_ as me,a as ne}from"./app-BuHt2kYS.js";import{T as oe}from"./app-DR284fT9.js";import{a as fe,T as _e}from"./app-DRGtcCVV.js";import{T as K}from"./app-DNadG4GC.js";import"./app-CHxME8Sw.js";import{_ as T}from"./app-DWQaqVg5.js";import{s as A,L as ve}from"./app-Vf6It1y-.js";import{_ as he}from"./app-B-EzfWu7.js";import{_ as ye}from"./app-Bx5jiAm1.js";import{_ as U}from"./app--BlRpVz_.js";import{C as H}from"./app-IrmNFWm4.js";import{_ as ge}from"./app-Bj7S8-QY.js";import{_ as Ce}from"./app-CM0k0GHT.js";import{D as Q}from"./app-D0jdtzyy.js";import{_ as ke}from"./app-BX-kXlvE.js";import"./app-BXvxi6wb.js";import"./app-C9w-bzHc.js";import"./app-DyIe33QU.js";import"./app-5V9SnxW6.js";import"./app-DOaxShSm.js";import"./app-DYkSpHuE.js";import"./app-51hQc1Cd.js";import"./app-CqAVEB_b.js";import"./app-CK9Tk_hc.js";import"./app-Cqxz9tud.js";import"./app-DoRtcMJm.js";import"./app-aIb4ksxL.js";import"./app-DPMEyUYH.js";import"./app-BZMTWmMM.js";import"./app-CiA1rHoH.js";import"./app-RbQF51V8.js";import"./app-tUtHmy3n.js";import"./app-DGM5HqRo.js";import"./app-DG0hMi2p.js";import"./app-CBq6-G9z.js";import"./app-BXiLqtxA.js";import"./app-CqvvE0jO.js";import"./app-CAeEyuA3.js";import"./app-TBcc1obG.js";import"./app-CxqGeHsb.js";import"./app-Dj8c2KwC.js";import"./app-cRxw2ZDj.js";import"./app-Ncl-Sitd.js";import"./app-DoTJvLi7.js";function $e(){le(this),this.success=this.$NotifyReloadSuccess("保存成功")}const xe={key:0},be={class:"label-group"},Se={key:0,style:{"font-style":"normal"}},Oe={key:1,style:{"font-style":"normal"}},we={key:2,title:"不区分大小写"},Ve=t("i",{class:"pi pi-info small"},null,-1),Ie=[Ve],Pe={key:0},Te={key:1},Ee={__name:"HTTPRequestCondsView",props:["v-conds"],setup(S,{expose:b}){const g=S,y=function(_){let $=window.REQUEST_COND_COMPONENTS.$find(function(v,O){return O.type==_.type});return $!=null?$.name:_.param+" "+_.operator},{conds:c}=function(){let _=g.vConds;return _==null&&(_={isOn:!0,connector:"or",groups:[]}),_.groups==null&&(_.groups=[]),_.groups.forEach(function($){$.conds.forEach(function(v){v.typeName=y(v)})}),{conds:P(_)}}();return b({updateConds:function(_){c.value=_},notifyChange:function(){c.value.groups!=null&&c.value.groups.forEach(function(_){_.conds.forEach(function($){$.typeName=y($)})})}}),(_,$)=>(l(),f("div",null,[n(c).groups.length>0?(l(),f("div",xe,[(l(!0),f(q,null,ee(n(c).groups,(v,O)=>(l(),f("div",be,[(l(!0),f(q,null,ee(v.conds,(C,E)=>(l(),f(q,null,[u(K,{outlined:""},{default:d(()=>[t("span",null,[C.type.length==0||C.type=="params"?(l(),f("var",Se,[i(h(C.param)+" ",1),t("var",null,h(C.operator),1)])):p("",!0),C.type.length>0&&C.type!="params"?(l(),f("var",Oe,h(C.typeName)+": ",1)):p("",!0),i(" "+h(C.value)+" ",1),C.isCaseInsensitive?(l(),f("sup",we,Ie)):p("",!0)])]),_:2},1024),E<v.conds.length-1?(l(),k(K,{key:0},{default:d(()=>[v.connector=="or"?(l(),f("span",Pe,"或")):p("",!0),v.connector=="and"?(l(),f("span",Te,"和")):p("",!0)]),_:2},1024)):p("",!0)],64))),256)),O!=n(c).groups.length-1?(l(),k(X,{key:0,style:{"margin-top":"0.3em","margin-bottom":"0.5em"}})):p("",!0),t("div",null,[v.description!=null&&v.description.length>0?(l(),k(K,{key:0,outlined:"",size:"tiny",class:"olive"},{default:d(()=>[i(h(v.description),1)]),_:2},1024)):p("",!0)])]))),256))])):p("",!0)]))}},Ne={key:0,style:{"font-style":"normal"}},Ue={key:1,style:{"font-style":"normal"}},Be={key:2,title:"不区分大小写"},He=t("i",{class:"icon info small"},null,-1),ze=[He],Me={__name:"HTTPRequestCondView",props:["v-cond","isOn","isReverse"],setup(S,{expose:b}){const g=S,{cond:y,components:c}=function(){return{cond:P(g.vCond),components:P(window.REQUEST_COND_COMPONENTS)}}(),a=function($){let v=c.value.$find(function(O,C){return C.type==$.type});return v!=null?v.name:$.param+" "+$.operator};return b({updateConds:function($,v){for(let O in v)v.hasOwnProperty(O)&&(y.value[O]=v[O])},notifyChange:function(){}}),($,v)=>(l(),f("div",null,[u(K,{outlined:"",class:Y({disabled:!S.isOn,red:S.isReverse})},{default:d(()=>[n(y).type.length==0||n(y).type=="params"?(l(),f("var",Ne,[i(h(n(y).param)+" ",1),t("var",null,h(n(y).operator),1)])):p("",!0),n(y).type.length>0&&n(y).type!="params"?(l(),f("var",Ue,h(a(n(y)))+": ",1)):p("",!0),i(" "+h(n(y).value)+" ",1),n(y).isCaseInsensitive?(l(),f("sup",Be,ze)):p("",!0)]),_:1},8,["class"])]))}},Ae=["value"],Ke={key:1},Ge={class:"flex flex-wrap gap-1"},Re={key:0},Le={class:"red"},De={key:0},Je={key:1,class:"red"},qe=["onClick"],Fe=["onClick"],Xe=["onClick"],je=t("span",{class:"red"},"恢复",-1),We=[je],Qe=["onClick"],Ye={key:2,class:"comment flex items-center"},Ze=t("i",{class:"icon pi pi-bars"},null,-1),et={class:"mt-4 flex gap-2"},tt=t("i",{class:"pi pi-pen-to-square"},null,-1),nt={__name:"HTTPCacheRefsConfigBox",props:["v-cache-refs","v-cache-config","v-cache-policy-id","v-web-id","v-max-bytes"],setup(S,{expose:b}){const g=ie(),y=j("$Tea"),c=S,a=P({}),{refs:m,id:_}=function(){let o=c.vCacheRefs;o==null&&(o=[]);let s=c.vMaxBytes,e=0;return o.forEach(function(r){e++,r.id=e,r.visible=!0,r.maxSize!=null&&s!=null&&s.count>0&&g.compareSizeCapacity(r.maxSize,s)>0&&(r.overMaxSize=s)}),{refs:P(o),id:P(e)}}(),$=function(o){window.UPDATING_CACHE_REF=null;let s=window.innerHeight;s>600&&(s=540),g.popup("/servers/server/settings/cache/createPopup?isReverse="+(o?1:0),{height:s+"px",callback:function(e){let r=e.data.cacheRef;if(r.conds!=null){if(_.value++,r.id=_.value,r.isReverse){let N=[],J=!1;m.value.forEach(function(Z){!Z.isReverse&&!J&&(N.push(r),J=!0),N.push(Z)}),J||N.push(r),G(N)}else m.value.push(r);var D=function(){setTimeout(function(){let N=document.querySelector(".right-box");N!=null&&N.scrollTo(0,o?0:1e5)},100)};B(D)}}})},v=function(o){window.UPDATING_CACHE_REF=g.clone(o);let s=window.innerHeight;s>500&&(s=500),g.popup("/servers/server/settings/cache/createPopup",{height:s+"px",callback:function(e){let r=-1;m.value.$each((D,N)=>{N.id==o.id&&(r=D)}),!(r<0)&&(e.data.cacheRef.id=m.value[r].id,m.value[r]=e.data.cacheRef,B(),a.value[o.id].updateConds(e.data.cacheRef.conds,e.data.cacheRef.simpleCond),a.value[o.id].notifyChange())}})},O=function(o){o.isOn=!1,B()},C=function(o){o.isOn=!0,B()},E=function(o){g.confirm("确定要删除此缓存设置吗？",function(){m.value.$removeIf((s,e)=>e.id==o.id),B()})},G=function(o){m.value=o,c.vCacheConfig!=null&&(c.vCacheConfig.cacheRefs=o)},R=function(o){switch(o){case"ms":return"毫秒";case"second":return"秒";case"minute":return"分钟";case"hour":return"小时";case"day":return"天";case"week":return"周 "}return o},B=function(o){c.vCachePolicyId!=null&&c.vCachePolicyId>0?y.action("/servers/components/cache/updateRefs").params({cachePolicyId:c.vCachePolicyId,refsJSON:JSON.stringify(m.value)}).post():c.vWebId!=null&&c.vWebId>0&&y.action("/servers/server/settings/cache/updateRefs").params({webId:c.vWebId,refsJSON:JSON.stringify(m.value)}).success(function(s){s.data.isUpdated&&g.successToast("保存成功",null,function(){typeof o=="function"&&o()})}).post()},L=function(o){typeof o!="string"&&(o=""),m.value.forEach(function(s){if(o.length==0){s.visible=!0;return}if(s.visible=!1,s.simpleCond!=null&&typeof s.simpleCond.value=="string"&&g.match(s.simpleCond.value,o)){s.visible=!0;return}s.conds==null||s.conds.groups==null||s.conds.groups.length==0||s.conds.groups.forEach(function(e){e.conds!=null&&e.conds.forEach(function(r){typeof r.value=="string"&&g.match(r.value,o)&&(s.visible=!0)})})})},z=o=>{const s={};m.value.forEach(r=>{s[r.id]=r});const e=[];o.forEach(r=>{e.push(s[r])}),m.value=e,B()};return b({addRef:$,search:L}),(o,s)=>(l(),f("div",null,[t("input",{type:"hidden",name:"refsJSON",value:JSON.stringify(n(m))},null,8,Ae),t("div",null,[n(m).length==0?(l(),k(he,{key:0},{default:d(()=>[i("暂时还没有缓存条件。")]),_:1})):p("",!0),n(m).length>0?(l(),f("div",Ke,[u(ve,{items:n(m),onSort:z,"row-class":e=>e.visible===!1?"hidden":""},{default:d(()=>[u(n(A),{rowReorder:"",headerStyle:"width: 3em"}),u(n(A),{header:"缓存条件"},{body:d(({data:e})=>[(l(),f("div",{key:"conds:"+e.id},[e.conds!=null&&e.conds.groups!=null?(l(),k(Ee,{key:0,"v-conds":e.conds,ref:r=>{a.value[e.id]=r},class:Y([{disabled:!e.isOn},"mb-2"])},null,8,["v-conds","class"])):p("",!0),e.simpleCond!=null?(l(),k(Me,{key:1,"v-cond":e.simpleCond,ref:r=>{a.value[e.id]=r},class:"mb-2",isOn:e.isOn,isReverse:e.isReverse},null,8,["v-cond","isOn","isReverse"])):p("",!0),t("div",Ge,[e.key!=null&&e.key.indexOf("${args}")<0?(l(),k(T,{key:0},{default:d(()=>[i("忽略URI参数")]),_:1})):p("",!0),e.minSize!=null&&e.minSize.count>0?(l(),k(T,{key:1},{default:d(()=>[i(h(e.minSize.count)+h(e.minSize.unit)+" ",1),e.maxSize!=null&&e.maxSize.count>0?(l(),f("span",Re,"- "+h(e.maxSize.count)+h(e.maxSize.unit.toUpperCase()),1)):p("",!0)]),_:2},1024)):e.maxSize!=null&&e.maxSize.count>0?(l(),k(T,{key:2},{default:d(()=>[i("0 - "+h(e.maxSize.count)+h(e.maxSize.unit.toUpperCase()),1)]),_:2},1024)):p("",!0),e.overMaxSize!=null?(l(),k(T,{key:3},{default:d(()=>[t("span",Le,"系统限制"+h(e.overMaxSize.count)+h(e.overMaxSize.unit.toUpperCase()),1)]),_:2},1024)):p("",!0),e.methods!=null&&e.methods.length>0?(l(),k(T,{key:4},{default:d(()=>[i(h(e.methods.join(", ")),1)]),_:2},1024)):p("",!0),e.expiresTime!=null&&e.expiresTime.isPrior&&e.expiresTime.isOn?(l(),k(T,{key:5},{default:d(()=>[i("Expires")]),_:1})):p("",!0),e.status!=null&&e.status.length>0&&(e.status.length>1||e.status[0]!=200)?(l(),k(T,{key:6},{default:d(()=>[i("状态码："+h(e.status.map(function(r){return r.toString()}).join(", ")),1)]),_:2},1024)):p("",!0),e.allowPartialContent?(l(),k(T,{key:7},{default:d(()=>[i("分片缓存")]),_:1})):p("",!0),e.alwaysForwardRangeRequest?(l(),k(T,{key:8},{default:d(()=>[i("Range回源")]),_:1})):p("",!0),e.enableIfNoneMatch?(l(),k(T,{key:9},{default:d(()=>[i("If-None-Match")]),_:1})):p("",!0),e.enableIfModifiedSince?(l(),k(T,{key:10},{default:d(()=>[i("If-Modified-Since")]),_:1})):p("",!0),e.enableReadingOriginAsync?(l(),k(T,{key:11},{default:d(()=>[i("支持异步")]),_:1})):p("",!0)])]))]),_:1}),u(n(A),{header:"缓存时间",headerStyle:"width: 7em"},{body:d(({data:e})=>[(l(),f("div",{key:"life:"+e.id},[e.isReverse?(l(),f("span",Je,"不缓存")):(l(),f("span",De,h(e.life.count)+" "+h(R(e.life.unit)),1))]))]),_:1}),u(n(A),{header:"操作",headerClass:"three op"},{body:d(({data:e})=>[(l(),f("div",{key:"op:"+e.id},[t("a",{href:"",onClick:I(r=>v(e),["prevent"])},"修改",8,qe),i("   "),e.isOn?(l(),f("a",{key:0,href:"",onClick:I(r=>O(e),["prevent"])},"暂停",8,Fe)):p("",!0),e.isOn?p("",!0):(l(),f("a",{key:1,href:"",onClick:I(r=>C(e),["prevent"])},We,8,Xe)),i("   "),t("a",{href:"",onClick:I(r=>E(e),["prevent"])},"删除",8,Qe)]))]),_:1})]),_:1},8,["items","row-class"])])):p("",!0),n(m).length>1?(l(),f("p",Ye,[i("所有条件匹配顺序为从上到下，可以拖动左侧的"),Ze,i("排序。网站设置的优先级比全局缓存策略设置的优先级要高。 ")])):p("",!0),t("div",et,[u(oe,{outlined:"",onClick:s[0]||(s[0]=I(e=>$(!1),["prevent"])),type:"button"},{default:d(()=>[tt,i("添加缓存条件")]),_:1}),i("     "),t("a",{href:"",onClick:s[1]||(s[1]=I(e=>$(!0),["prevent"])),class:"text-sm flex items-center gap-2",style:{color:"var(--p-text-muted-color)"}},"添加不缓存条件")])])]))}},st=t("td",{class:"title"},"启用过时缓存",-1),ot=t("p",{class:"comment"}," 选中后，在更新缓存失败后会尝试读取过时的缓存。 ",-1),lt=t("td",null,"有效期",-1),it=t("p",{class:"comment"},"缓存在过期之后，仍然保留的时间。",-1),at=t("td",null,"状态码",-1),ut={class:"comment"},rt=t("td",null,"支持stale-if-error",-1),dt={class:"comment"},ct={__name:"HTTPCacheStaleConfig",props:["v-cache-stale-config"],emits:["change"],setup(S,{emit:b}){const g=S,y=b,{config:c}=function(){let a=g.vCacheStaleConfig;return a==null&&(a={isPrior:!1,isOn:!1,status:[],supportStaleIfErrorHeader:!0,life:{count:1,unit:"day"}}),{config:P(a)}}();return W(c,()=>{y("change",c.value)},{deep:!0}),(a,m)=>(l(),k(Q,null,{default:d(()=>[t("tbody",null,[t("tr",null,[st,t("td",null,[u(U,{modelValue:n(c).isOn,"onUpdate:modelValue":m[0]||(m[0]=_=>n(c).isOn=_)},null,8,["modelValue"]),ot])]),w(t("tr",null,[lt,t("td",null,[u(Ce,{"v-value":n(c).life},null,8,["v-value"]),it])],512),[[V,n(c).isOn]]),w(t("tr",null,[at,t("td",null,[u(ge,{"v-status-list":n(c).status},null,8,["v-status-list"]),t("p",ut,[i("在这些状态码出现时使用过时缓存，默认支持 "),u(H,null,{default:d(()=>[i("50x")]),_:1}),i(" 状态码。 ")])])],512),[[V,n(c).isOn]]),w(t("tr",null,[rt,t("td",null,[u(U,{modelValue:n(c).supportStaleIfErrorHeader,"onUpdate:modelValue":m[1]||(m[1]=_=>n(c).supportStaleIfErrorHeader=_)},null,8,["modelValue"]),t("p",dt,[i("选中后，支持在Cache-Control中通过 "),u(H,null,{default:d(()=>[i("stale-if-error")]),_:1}),i(" 指定过时缓存有效期。 ")])])],512),[[V,n(c).isOn]])])]),_:1}))}},x=S=>(ce("data-v-91745e67"),S=S(),pe(),S),pt=["value"],mt=x(()=>t("td",{class:"title"},"启用缓存",-1)),ft=x(()=>t("td",null,"缓存主域名",-1)),_t=x(()=>t("span",{class:"small"},"[修改]",-1)),vt=[_t],ht=x(()=>t("span",{class:"small"},"[修改]",-1)),yt=[ht],gt={style:{"margin-top":"1em"}},Ct=x(()=>t("td",{class:"title"},"启用主域名",-1)),kt=x(()=>t("p",{class:"comment"},"启用主域名后，所有缓存键值中的协议和域名部分都会修改为主域名，用来实现缓存不区分域名。",-1)),$t=x(()=>t("td",null,"主域名 *",-1)),xt={class:"ui fields inline"},bt={class:"ui field"},St={class:"ui field"},Ot=x(()=>t("p",{class:"comment"},[i("此域名"),t("strong",null,"必须"),i("是当前网站已绑定域名，在刷新缓存时也需要使用此域名。 ")],-1)),wt={colspan:"2"},Vt={key:0},It={key:1},Pt=x(()=>t("td",null,"使用默认缓存条件",-1)),Tt=x(()=>t("p",{class:"comment"},"选中后使用系统全局缓存策略中已经定义的默认缓存条件。",-1)),Et=x(()=>t("td",null,"添加X-Cache报头",-1)),Nt={class:"comment"},Ut=x(()=>t("td",null,"添加Age Header",-1)),Bt={class:"comment"},Ht=x(()=>t("td",null,"支持源站控制有效时间",-1)),zt={class:"comment"},Mt=x(()=>t("td",{class:"color-border"},"允许PURGE",-1)),At=x(()=>t("p",{class:"comment"},"允许使用PURGE方法清除某个URL缓存。",-1)),Kt=x(()=>t("td",{class:"color-border"},"PURGE Key *",-1)),Gt={class:"comment"},Rt={key:0},Lt=x(()=>t("h5",{class:"group-header"},"过时缓存策略",-1)),Dt={style:{"margin-top":"1em"}},Jt={class:"group-header relative"},qt=x(()=>t("i",{class:"icon remove small"},null,-1)),Ft=[qt],Xt={__name:"HTTPCacheConfigBox",props:["v-cache-config","v-is-location","v-is-group","v-cache-policy","v-web-id"],setup(S){const b=j("$utils");j("$Tea");const g=S,y=P(),c=P(),{cacheConfig:a,moreOptionsVisible:m,enablePolicyRefs:_,maxBytes:$,searchBoxVisible:v,searchKeyword:O,keyOptionsVisible:C}=function(){let o=g.vCacheConfig;o==null&&(o={isPrior:!1,isOn:!1,addStatusHeader:!0,addAgeHeader:!1,enableCacheControlMaxAge:!1,cacheRefs:[],purgeIsOn:!1,purgeKey:"",disablePolicyRefs:!1}),o.cacheRefs==null&&(o.cacheRefs=[]);let s=null;return g.vCachePolicy!=null&&g.vCachePolicy.maxBytes!=null&&(s=g.vCachePolicy.maxBytes),o.key==null&&(o.key={isOn:!1,scheme:"https",host:""}),{cacheConfig:P(o),moreOptionsVisible:P(!1),enablePolicyRefs:P(!o.disablePolicyRefs),maxBytes:P(s),searchBoxVisible:P(!1),searchKeyword:P(""),keyOptionsVisible:P(!1)}}(),E=function(){return(!g.vIsLocation&&!g.vIsGroup||a.value.isPrior)&&a.value.isOn},G=function(){return b.CURRENT_CTX.teaCommon.teaIsPlus},R=function(){let s=(Math.random().toString()+Math.random().toString()).replace(/0\./g,"").replace(/\./g,""),e="";for(let r=0;r<s.length;r++)e+=String.fromCharCode(parseInt(s.substring(r,r+1))+(Math.random()<.5?"a":"A").charCodeAt(0));a.value.purgeKey=e},B=function(){m.value=!m.value},L=function(o){a.value.stale=o},z=function(){v.value=!v.value,v.value?setTimeout(function(){c.value.focus()}):O.value=""};return W(_,function(o){a.value.disablePolicyRefs=!o}),W(O,function(o){y.value.search(o)}),(o,s)=>(l(),f("div",null,[t("input",{type:"hidden",name:"cacheJSON",value:JSON.stringify(n(a))},null,8,pt),u(Q,null,{default:d(()=>[o.vIsLocation||o.vIsGroup?(l(),k(ye,{key:0,"v-config":n(a)},null,8,["v-config"])):p("",!0),w(t("tbody",null,[t("tr",null,[mt,t("td",null,[u(U,{modelValue:n(a).isOn,"onUpdate:modelValue":s[0]||(s[0]=e=>n(a).isOn=e)},null,8,["modelValue"])])])],512),[[V,!o.vIsLocation&&!o.vIsGroup||n(a).isPrior]]),w(t("tbody",null,[t("tr",null,[ft,t("td",null,[w(t("div",null,[i("默认   "),t("a",{href:"",onClick:s[1]||(s[1]=I(e=>C.value=!n(C),["prevent"]))},vt)],512),[[V,!n(a).key.isOn]]),w(t("div",null,[i("使用主域名："+h(n(a).key.scheme)+"://"+h(n(a).key.host)+"   ",1),t("a",{href:"",onClick:s[2]||(s[2]=I(e=>C.value=!n(C),["prevent"]))},yt)],512),[[V,n(a).key.isOn]]),w(t("div",gt,[u(X),u(Q,null,{default:d(()=>[t("tbody",null,[t("tr",null,[Ct,t("td",null,[u(U,{modelValue:n(a).key.isOn,"onUpdate:modelValue":s[3]||(s[3]=e=>n(a).key.isOn=e)},null,8,["modelValue"]),kt])]),w(t("tr",null,[$t,t("td",null,[t("div",xt,[t("div",bt,[u(me,{modelValue:n(a).key.scheme,"onUpdate:modelValue":s[4]||(s[4]=e=>n(a).key.scheme=e)},{default:d(()=>[u(ne,{value:"https"},{default:d(()=>[i("https://")]),_:1}),u(ne,{value:"http"},{default:d(()=>[i("http://")]),_:1})]),_:1},8,["modelValue"])]),t("div",St,[u(F,{type:"text",modelValue:n(a).key.host,"onUpdate:modelValue":s[5]||(s[5]=e=>n(a).key.host=e),placeholder:"example.com",onKeyup:s[6]||(s[6]=M(e=>C.value=!1,["enter"])),onKeypress:M(I(e=>1,["prevent"]),["enter"])},null,8,["modelValue","onKeypress"])])]),Ot])],512),[[V,n(a).key.isOn]])])]),_:1}),u(oe,{secondary:"",size:"small",type:"button",onClick:s[7]||(s[7]=I(e=>C.value=!1,["prevent"]))},{default:d(()=>[i("完成")]),_:1})],512),[[V,n(C)]])])])],512),[[V,E()&&!o.vIsGroup]]),w(t("tbody",null,[t("tr",null,[t("td",wt,[t("a",{href:"",onClick:I(B,["prevent"])},[n(m)?(l(),f("span",Vt,"收起选项")):(l(),f("span",It,"更多选项")),t("i",{class:Y(["icon angle",{up:n(m),down:!n(m)}])},null,2)])])])],512),[[V,E()]]),w(t("tbody",null,[t("tr",null,[Pt,t("td",null,[u(U,{modelValue:n(_),"onUpdate:modelValue":s[8]||(s[8]=e=>te(_)?_.value=e:null)},null,8,["modelValue"]),Tt])]),t("tr",null,[Et,t("td",null,[u(U,{modelValue:n(a).addStatusHeader,"onUpdate:modelValue":s[9]||(s[9]=e=>n(a).addStatusHeader=e)},null,8,["modelValue"]),t("p",Nt,[i("选中后自动在响应报头中增加 "),u(H,null,{default:d(()=>[i("X-Cache: BYPASS|MISS|HIT|PURGE")]),_:1}),i(" ；在浏览器端查看X-Cache值时请先禁用浏览器缓存，避免影响观察。 ")])])]),t("tr",null,[Ut,t("td",null,[u(U,{modelValue:n(a).addAgeHeader,"onUpdate:modelValue":s[10]||(s[10]=e=>n(a).addAgeHeader=e)},null,8,["modelValue"]),t("p",Bt,[i("选中后自动在响应Header中增加 "),u(H,null,{default:d(()=>[i("Age: [存活时间秒数]")]),_:1}),i(" 。 ")])])]),t("tr",null,[Ht,t("td",null,[u(U,{modelValue:n(a).enableCacheControlMaxAge,"onUpdate:modelValue":s[11]||(s[11]=e=>n(a).enableCacheControlMaxAge=e)},null,8,["modelValue"]),t("p",zt,[i("选中后表示支持源站在Header中设置的 "),u(H,null,{default:d(()=>[i("Cache-Control: max-age=[有效时间秒数]")]),_:1}),i(" 。 ")])])]),t("tr",null,[Mt,t("td",null,[u(U,{modelValue:n(a).purgeIsOn,"onUpdate:modelValue":s[12]||(s[12]=e=>n(a).purgeIsOn=e)},null,8,["modelValue"]),At])]),w(t("tr",null,[Kt,t("td",null,[u(F,{type:"text",maxlength:"200",modelValue:n(a).purgeKey,"onUpdate:modelValue":s[13]||(s[13]=e=>n(a).purgeKey=e),class:"w-full"},null,8,["modelValue"]),t("p",Gt,[t("a",{href:"",onClick:I(R,["prevent"])},"[随机生成]"),i("。需要在PURGE方法调用时加入 "),u(H,null,{default:d(()=>[i("X-Cloud-Purge-Key: "+h(n(a).purgeKey),1)]),_:1}),i(" Header。只能包含字符、数字、下划线。 ")])])],512),[[V,n(a).purgeIsOn]])],512),[[V,E()&&n(m)]])]),_:1}),E()&&n(m)&&G()?(l(),f("div",Rt,[Lt,u(ct,{"v-cache-stale-config":n(a).stale,onChange:L},null,8,["v-cache-stale-config"])])):p("",!0),w(t("div",null,[u(se,{class:"mt-4"}),u(X)],512),[[V,E()]]),w(t("div",Dt,[t("h5",Jt,[i("缓存条件   "),t("a",{href:"",onClick:s[14]||(s[14]=I(e=>y.value.addRef(!1),["prevent"]))},"[添加]"),i("   "),w(t("a",{href:"",onClick:I(z,["prevent"])},"[搜索]",512),[[V,!n(v)]]),w(u(_e,{class:"search-box"},{default:d(()=>[u(F,{type:"text",placeholder:"搜索...",ref_key:"searchBoxRef",ref:c,onKeypress:M(I(e=>1,["prevent"]),["enter"]),onKeydown:M(z,["esc"]),modelValue:n(O),"onUpdate:modelValue":s[15]||(s[15]=e=>te(O)?O.value=e:null),size:"20",style:{width:"14em"}},null,8,["onKeypress","modelValue"]),u(fe,null,{default:d(()=>[t("a",{href:"",onClick:I(z,["prevent"])},Ft)]),_:1})]),_:1},512),[[V,n(v)]])]),u(nt,{ref_key:"cacheRefsConfigBoxRef",ref:y,"v-cache-config":n(a),"v-cache-refs":n(a).cacheRefs,"v-web-id":o.vWebId,"v-max-bytes":n($)},null,8,["v-cache-config","v-cache-refs","v-web-id","v-max-bytes"])],512),[[V,E()]])]))}},jt=de(Xt,[["__scopeId","data-v-91745e67"]]),Wt=["value"],Xn={__name:"index",setup(S){const b=ae(new $e);return(g,y)=>(l(),k(ue,{ctx:n(b)},{default:d(()=>[u(ke,{ctx:n(b),"active-tab":"index"},null,8,["ctx"]),u(re,{action:"$",onSuccess:n(b).success},{default:d(()=>[t("input",{type:"hidden",name:"webId",value:n(b).webId},null,8,Wt),u(jt,{"v-cache-config":n(b).cacheConfig,"v-web-id":n(b).webId,"v-cache-policy":n(b).cachePolicy},null,8,["v-cache-config","v-web-id","v-cache-policy"]),u(se,{class:"mt-4"})]),_:1},8,["onSuccess"])]),_:1},8,["ctx"]))}};export{Xn as default};
