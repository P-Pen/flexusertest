import{o as a,g as i,a as t,b as e,f as o,w as n,h as d,F as T,D as b,c as p,u as s,t as x,d as f,e as y,i as $}from"./app-BYx064nO.js";import{P as K}from"./app-BnDFQ2zy.js";import{i as k,c as H}from"./app-DISTCiac.js";import{_ as c}from"./app-C5GVF480.js";import{C as S}from"./app-IrmNFWm4.js";import{a as h,_}from"./app-BuHt2kYS.js";import{a as P,T as v}from"./app-DRGtcCVV.js";import{_ as O}from"./app-cTrE88AC.js";import{_ as I}from"./app-_N2IGwgj.js";import{_ as A}from"./app-1SA4suwN.js";import{_ as E}from"./app-Clyhl9p_.js";import{_ as C}from"./app-CbPWpFKs.js";import{_ as g}from"./app--BlRpVz_.js";import{_ as V}from"./app-DfipPP5d.js";import{_ as D}from"./app-57xpzLDR.js";import{D as B}from"./app-D0jdtzyy.js";import"./app-GoR2fTOd.js";import"./app-DYkSpHuE.js";import"./app-DNadG4GC.js";import"./app-DPMEyUYH.js";import"./app-51hQc1Cd.js";import"./app-CqAVEB_b.js";import"./app-CK9Tk_hc.js";import"./app-Cqxz9tud.js";import"./app-DoRtcMJm.js";import"./app-aIb4ksxL.js";import"./app-DyIe33QU.js";import"./app-DR284fT9.js";import"./app-kBNY2ZLt.js";import"./app-TBcc1obG.js";import"./app-tUtHmy3n.js";function W(){k(this),this.addr="",this.protocol="",this.isOSS=!1,this.addrError="",this.isHTTP?this.protocol="http":this.serverType=="tcpProxy"?this.protocol="tcp":this.serverType=="udpProxy"&&(this.protocol="udp"),this.changeProtocol=function(){this.isOSS=this.protocol.startsWith("oss:"),this.protocol=="http"?this.detectHTTPS():this.adviceHTTPS=!1,this.checkPort()},this.changeAddr=function(){this.adviceHTTPS=!1,this.serverType=="httpProxy"&&(this.addr.startsWith("http://")?this.protocol="http":this.addr.startsWith("https://")&&(this.protocol="https")),this.checkPort()},this.checkPort=function(){this.addrError="",this.protocol=="http"&&this.addr.endsWith(":443")&&(this.addrError="443通常是HTTPS协议端口，请确认源站协议选择是否正确。"),this.protocol=="https"&&this.addr.endsWith(":80")&&(this.addrError="80通常是HTTP协议端口，请确认源站协议选择是否正确。")},this.adviceHTTPS=!1;var u=!1;this.detectHTTPS=function(){u||(u=!0,this.adviceHTTPS=!1,this.protocol=="http"?this.$post(".detectHTTPS").params({addr:this.addr}).success(function(l){this.adviceHTTPS=l.data.isOk,l.data.isOk&&(this.addr=l.data.addr)}).done(function(){u=!1}):u=!1)},this.switchToHTTPS=function(){this.adviceHTTPS=!1,this.protocol="https",this.addr.endsWith(":80")&&(this.addr=this.addr.substring(0,this.addr.length-3))}}const z={key:0},U=t("td",null,[o("密钥ID *"),t("br"),t("em",null,"(Secret Id)")],-1),q=t("p",{class:"comment"},"访问存储桶需要的密钥ID。",-1),L=t("td",null,[o("密钥Key *"),t("br"),t("em",null,"(Secret Key)")],-1),N=t("p",{class:"comment"},"访问存储桶需要的密钥Key。",-1),R=t("td",null,"所属区域代号 *",-1),j={class:"comment"},F={key:1},G=t("td",null,[o("密钥ID *"),t("br"),t("em",null,"(AccessKey Id)")],-1),M=t("p",{class:"comment"},"访问存储空间需要的密钥ID。",-1),J=t("td",null,[o("密钥Key *"),t("br"),t("em",null,"(AccessKey Secret)")],-1),Q=t("p",{class:"comment"},"访问存储空间需要的密钥Key。",-1),X=t("td",null,"地域节点 *",-1),Y={class:"comment"},Z={key:2},tt=t("td",null,[o("密钥ID *"),t("br"),t("em",null,"(AccessKey Id)")],-1),et=t("p",{class:"comment"},"访问存储桶需要的密钥ID。",-1),lt=t("td",null,[o("密钥Key *"),t("br"),t("em",null,"(AccessKey Secret)")],-1),st=t("p",{class:"comment"},"访问存储桶需要的密钥Key。",-1),ot=t("td",null,"区域Endpoint *",-1),nt=t("span",null,"https://",-1),at={class:"comment"},ct={key:3},dt=t("td",null,"Access Key *",-1),it=t("p",{class:"comment"},"访问Bucket需要的Access Key。",-1),ut=t("td",null,"Secret Key *",-1),rt=t("p",{class:"comment"},"访问存储桶需要的Secret Key。",-1),mt=t("td",null,"区域Endpoint *",-1),ht=t("span",null,"https://",-1),pt={class:"comment"},_t={key:4},ft=t("td",null,[o("AccessKey *"),t("br"),t("em",null,"(AK)")],-1),yt=t("p",{class:"comment"},"访问存储空间需要的AccessKey。",-1),St=t("td",null,[o("SecretKey *"),t("br"),t("em",null,"(SK)")],-1),xt=t("p",{class:"comment"},"访问存储空间需要的SecretKey。",-1),Tt=t("td",null,"访问域名 *",-1),gt={class:"ui fields inline"},Pt={class:"ui field"},vt={class:"ui field"},bt=t("td",null,"访问控制",-1),wt={key:5},$t=t("td",null,[o("密钥ID *"),t("br"),t("em",null,"(AK)")],-1),Kt=t("p",{class:"comment"},"访问存储桶需要的密钥ID。",-1),kt=t("td",null,[o("密钥Key *"),t("br"),t("em",null,"(SK)")],-1),Ht=t("p",{class:"comment"},"访问存储桶需要的密钥Key。",-1),Ot=t("td",null,[o("区域代号 *"),t("br"),t("em",null,"(Region)")],-1),It={class:"comment"},At={key:0},Et=t("p",{class:"comment"},"Endpoint域名或URL，只有非AWS应用时才需要填写。",-1),Ct=t("td",null,"Endpoint中存储桶访问样式",-1),Vt={__name:"addPopup_oss",props:["ctx"],setup(u){return(l,w)=>(a(),i(T,null,[u.ctx.protocol=="oss:tencentCOS"?(a(),i("tbody",z,[t("tr",null,[U,t("td",null,[e(c,{type:"text",name:"tencentCOSSecretId",maxlength:"100",class:"w-full"}),q])]),t("tr",null,[L,t("td",null,[e(c,{type:"text",name:"tencentCOSSecretKey",maxlength:"100",class:"w-full"}),N])]),t("tr",null,[R,t("td",null,[e(c,{type:"text",name:"tencentCOSRegion",maxlength:"100",class:"w-full"}),t("p",j,[o("COS服务所属区域代号，类似于 "),e(S,null,{default:n(()=>[o("ap-beijing")]),_:1}),o(" 。 ")])])])])):d("",!0),u.ctx.protocol=="oss:aliyunOSS"?(a(),i("tbody",F,[t("tr",null,[G,t("td",null,[e(c,{type:"text",name:"aliyunOSSAccessKeyId",maxlength:"100",class:"w-full"}),M])]),t("tr",null,[J,t("td",null,[e(c,{type:"text",name:"aliyunOSSAccessKeySecret",maxlength:"100",class:"w-full"}),Q])]),t("tr",null,[X,t("td",null,[e(c,{type:"text",name:"aliyunOSSEndpoint",maxlength:"100",class:"w-full"}),t("p",Y,[o("地域节点域名（Endpoint），类似于 "),e(S,null,{default:n(()=>[o("oss-cn-shanghai.aliyuncs.com")]),_:1}),o(" 。 ")])])])])):d("",!0),u.ctx.protocol=="oss:huaweiOBS"?(a(),i("tbody",Z,[t("tr",null,[tt,t("td",null,[e(c,{type:"text",name:"huaweiOBSAccessKeyId",maxlength:"100",class:"w-full"}),et])]),t("tr",null,[lt,t("td",null,[e(c,{type:"text",name:"huaweiOBSAccessKeySecret",maxlength:"100",class:"w-full"}),st])]),t("tr",null,[ot,t("td",null,[e(v,null,{default:n(()=>[e(P,null,{default:n(()=>[nt]),_:1}),e(c,{type:"text",name:"huaweiOBSEndpoint",maxlength:"100",class:"w-full"})]),_:1}),t("p",at,[o("区域Endpoint域名，类似于 "),e(S,null,{default:n(()=>[o("obs.cn-north-4.myhuaweicloud.com")]),_:1}),o(" 。 ")])])])])):d("",!0),u.ctx.protocol=="oss:baiduBOS"?(a(),i("tbody",ct,[t("tr",null,[dt,t("td",null,[e(c,{type:"text",name:"baiduBOSAccessKey",maxlength:"100",class:"w-full"}),it])]),t("tr",null,[ut,t("td",null,[e(c,{type:"text",name:"baiduBOSSecretKey",maxlength:"100",class:"w-full"}),rt])]),t("tr",null,[mt,t("td",null,[e(v,null,{default:n(()=>[e(P,null,{default:n(()=>[ht]),_:1}),e(c,{type:"text",name:"baiduBOSEndpoint",maxlength:"100",class:"w-full"})]),_:1}),t("p",pt,[o("区域Endpoint域名，类似于 "),e(S,null,{default:n(()=>[o("bj.bcebos.com")]),_:1}),o(" 。 ")])])])])):d("",!0),u.ctx.protocol=="oss:qiniuKodo"?(a(),i("tbody",_t,[t("tr",null,[ft,t("td",null,[e(c,{type:"text",name:"qiniuKodoAccessKey",maxlength:"100",class:"w-full"}),yt])]),t("tr",null,[St,t("td",null,[e(c,{type:"text",name:"qiniuKodoSecretKey",maxlength:"100",class:"w-full"}),xt])]),t("tr",null,[Tt,t("td",null,[t("div",gt,[t("div",Pt,[e(_,{name:"qiniuKodoProtocol"},{default:n(()=>[e(h,{value:"http"},{default:n(()=>[o("http://")]),_:1}),e(h,{value:"https"},{default:n(()=>[o("https://")]),_:1})]),_:1})]),t("div",vt,[e(c,{type:"text",name:"qiniuKodoDomain",placeholder:"比如 example.com",style:{width:"20em"}})])])])]),t("tr",null,[bt,t("td",null,[e(_,{name:"qiniuKodoIsPublic"},{default:n(()=>[e(h,{value:"0"},{default:n(()=>[o("私有")]),_:1}),e(h,{value:"1"},{default:n(()=>[o("公开")]),_:1})]),_:1})])])])):d("",!0),u.ctx.protocol=="oss:amazonS3"||u.ctx.protocol=="oss:b2"?(a(),i("tbody",wt,[t("tr",null,[$t,t("td",null,[e(c,{type:"text",name:"amazonS3AccessKeyId",maxlength:"100",class:"w-full"}),Kt])]),t("tr",null,[kt,t("td",null,[e(c,{type:"text",name:"amazonS3AccessKeySecret",maxlength:"100",class:"w-full"}),Ht])]),t("tr",null,[Ot,t("td",null,[e(c,{type:"text",name:"amazonS3Region",maxlength:"100",class:"w-full"}),t("p",It,[o("所属区域代号，类似于 "),e(S,null,{default:n(()=>[o("us-east-2")]),_:1}),o(" 。 ")])])]),t("tr",null,[t("td",null,[o("Endpoint "),u.ctx.protocol!="oss:amazonS3"?(a(),i("span",At,"*")):d("",!0)]),t("td",null,[e(c,{type:"text",name:"amazonS3Endpoint",maxlength:"100",class:"w-full"}),Et])]),t("tr",null,[Ct,t("td",null,[e(_,{name:"bucketAddressStyle"},{default:n(()=>[e(h,{value:"path"},{default:n(()=>[o("路径")]),_:1}),e(h,{value:"domain"},{default:n(()=>[o("子域名")]),_:1})]),_:1})])])])):d("",!0),(a(!0),i(T,null,b(u.ctx.ossTypes,r=>(a(),i(T,null,[u.ctx.protocol==r.code?(a(),p(O,{key:0,"v-params":u.ctx.ossBucketParams,name:r.bucketOptionName},null,8,["v-params","name"])):d("",!0)],64))),256))],64))}},Dt=t("header",null,"添加源站",-1),Bt=["value"],Wt=["value"],zt=t("td",{class:"title"},"源站协议",-1),Ut={key:0,label:"对象存储"},qt=t("td",{class:"title"},"源站地址 *",-1),Lt={key:0,class:"comment",style:{"padding-bottom":"0","margin-bottom":"0"}},Nt=t("span",{class:"red"},"系统检测到当前源站有HTTPS协议可用，是否切换到HTTPS协议？",-1),Rt={class:"comment"},jt={key:0,class:"red"},Ft={key:1},Gt={key:0},Mt=t("td",null,"回源主机名",-1),Jt={class:"comment"},Qt={key:0},Xt={colspan:"2"},Yt={key:0},Zt=t("td",null,"专属域名",-1),te=t("p",{class:"comment"},"默认不需要填写，表示支持所有域名。如果填写了专属域名，表示这些源站只会在所列的专属域名被访问时才生效。",-1),ee=t("td",null,"端口跟随",-1),le=t("p",{class:"comment"},"选中后表示源站的端口保持和用户访问的网站端口保持一致；此时的源站地址中的端口号可以任意填写。",-1),se=t("td",null,"支持HTTP/2",-1),oe=t("p",{class:"comment"},"选中后，表示源站支持HTTP/2协议。",-1),ne=t("td",null,"权重",-1),ae=t("p",{class:"comment"},"数字越大，代表分配的请求比例越多。",-1),ce=t("td",null,"名称",-1),de=t("p",{class:"comment"},"给当前源站起一个容易识别的名称。",-1),ie=t("td",null,"备注",-1),ue=t("td",null,"启用当前源站",-1),Le={__name:"addPopup",setup(u){const l=H(new W);return(w,r)=>(a(),p(K,null,{default:n(()=>[Dt,e(I,{action:"$",onSuccess:s(l).success},{default:n(()=>[t("input",{type:"hidden",name:"reverseProxyId",value:s(l).reverseProxyId},null,8,Bt),t("input",{type:"hidden",name:"originType",value:s(l).originType},null,8,Wt),e(B,null,{default:n(()=>[t("tbody",null,[t("tr",null,[zt,t("td",null,[s(l).serverType=="httpProxy"||s(l).serverType=="httpWeb"?(a(),p(_,{key:0,name:"protocol",modelValue:s(l).protocol,"onUpdate:modelValue":r[0]||(r[0]=m=>s(l).protocol=m),onChange:s(l).changeProtocol},{default:n(()=>[e(h,{value:"http"},{default:n(()=>[o("HTTP")]),_:1}),e(h,{value:"https"},{default:n(()=>[o("HTTPS")]),_:1}),s(l).ossTypes.length>0?(a(),i("optgroup",Ut)):d("",!0),(a(!0),i(T,null,b(s(l).ossTypes,m=>(a(),p(h,{value:m.code},{default:n(()=>[o(x(m.name),1)]),_:2},1032,["value"]))),256))]),_:1},8,["modelValue","onChange"])):d("",!0),s(l).serverType=="tcpProxy"?(a(),p(_,{key:1,name:"protocol",modelValue:s(l).protocol,"onUpdate:modelValue":r[1]||(r[1]=m=>s(l).protocol=m)},{default:n(()=>[e(h,{value:"tcp"},{default:n(()=>[o("TCP")]),_:1}),e(h,{value:"tls"},{default:n(()=>[o("TLS")]),_:1})]),_:1},8,["modelValue"])):d("",!0),s(l).serverType=="udpProxy"?(a(),p(_,{key:2,name:"protocol",modelValue:s(l).protocol,"onUpdate:modelValue":r[2]||(r[2]=m=>s(l).protocol=m)},{default:n(()=>[e(h,{value:"udp"},{default:n(()=>[o("UDP")]),_:1})]),_:1},8,["modelValue"])):d("",!0)])]),f(t("tr",null,[qt,t("td",null,[e(v,null,{default:n(()=>[e(P,null,{default:n(()=>[t("span",null,x(s(l).protocol.toLowerCase())+"://",1)]),_:1}),e(c,{name:"addr",autofocus:"",modelValue:s(l).addr,"onUpdate:modelValue":r[3]||(r[3]=m=>s(l).addr=m),onInput:s(l).changeAddr,onChange:s(l).detectHTTPS,class:"w-full"},null,8,["modelValue","onInput","onChange"])]),_:1}),s(l).addrError.length==0&&s(l).adviceHTTPS&&s(l).protocol=="http"?(a(),i("p",Lt,[Nt,t("a",{href:"",onClick:r[4]||(r[4]=$((...m)=>s(l).switchToHTTPS&&s(l).switchToHTTPS(...m),["prevent"]))},"[点此切换]")])):d("",!0),t("p",Rt,[s(l).addrError.length>0?(a(),i("span",jt,x(s(l).addrError),1)):d("",!0),o(" 源站服务器地址，通常是一个IP（或域名）加端口，80和443端口可以省略"),s(l).serverType=="httpProxy"?(a(),i("span",Ft,"，不需要加 http:// 或 https://")):d("",!0),o("。 ")])])],512),[[y,!s(l).isOSS]]),(s(l).isHTTP||s(l).protocol=="tls")&&!s(l).isOSS?(a(),i("tr",Gt,[Mt,t("td",null,[e(c,{name:"host",placeholder:"比如example.com",maxlength:"100",class:"w-full"}),t("p",Jt,[o("可选项。请求源站时的Host，用于设置访问源站的站点域名"),s(l).isHTTP?(a(),i("span",Qt,"，自定义Host内容中支持请求变量")):d("",!0),o("；如果用户实际访问的域名和源站域名不一致，请务必设置为源站域名。 ")])])])):d("",!0)]),s(l).teaCommon.teaIsPlus?(a(),p(Vt,{key:0,ctx:s(l)},null,8,["ctx"])):d("",!0),t("tbody",null,[t("tr",null,[t("td",Xt,[e(A)])])]),f(t("tbody",null,[s(l).protocol=="https"||s(l).protocol=="tls"?(a(),i("tr",Yt,[t("td",null,x(s(l).protocol.toUpperCase())+"证书",1),t("td",null,[e(E,{"v-single-mode":!0,"v-view-size":"mini","v-description":"可以选择连接源站使用的证书；除非源站有特殊需求，否则不需要添加。"})])])):d("",!0),f(t("tr",null,[Zt,t("td",null,[e(C),te])],512),[[y,s(l).protocol!="udp"]]),f(t("tr",null,[ee,t("td",null,[e(g,{name:"followPort"}),le])],512),[[y,!s(l).isOSS]]),f(t("tr",null,[se,t("td",null,[e(g,{name:"http2Enabled"}),oe])],512),[[y,!s(l).isOSS&&s(l).protocol=="https"]]),t("tr",null,[ne,t("td",null,[e(c,{name:"weight",maxlength:"4",value:"10",style:{width:"5em"}}),ae])]),t("tr",null,[ce,t("td",null,[e(c,{name:"name",maxlength:"100",class:"w-full"}),de])]),t("tr",null,[ie,t("td",null,[e(V,{name:"description",rows:"3",maxlength:"100",class:"w-full"})])]),t("tr",null,[ue,t("td",null,[e(g,{name:"isOn",checked:"checked"})])])],512),[[y,s(l).moreOptionsVisible]])]),_:1}),e(D)]),_:1},8,["onSuccess"])]),_:1}))}};export{Le as default};
