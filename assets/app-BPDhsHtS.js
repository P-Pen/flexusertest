import{r as v,o as u,g as d,u as e,h as _,a as t,n as R,i as B,J as H,c as P,w as m,b as l,d as T,f as p,F as C,D as O,t as g,bb as D,e as y}from"./app-BYx064nO.js";import{i as L,c as M}from"./app-DISTCiac.js";import{_ as F}from"./app-BAIc7wsg.js";import{_ as S}from"./app--BlRpVz_.js";import{_ as J}from"./app-_N2IGwgj.js";import{_ as V}from"./app-C5GVF480.js";import{_ as w}from"./app-CbPWpFKs.js";import{_ as E}from"./app-Bx5jiAm1.js";import{_ as k,a as x}from"./app-BuHt2kYS.js";import{D as U}from"./app-D0jdtzyy.js";import{_ as z}from"./app-57xpzLDR.js";import{_ as A}from"./app-BE2q_DFE.js";import"./app-BXvxi6wb.js";import"./app-C9w-bzHc.js";import"./app-DyIe33QU.js";import"./app-5V9SnxW6.js";import"./app-DOaxShSm.js";import"./app-tUtHmy3n.js";import"./app-CK9Tk_hc.js";import"./app-DYkSpHuE.js";import"./app-IrmNFWm4.js";import"./app-DNadG4GC.js";import"./app-DPMEyUYH.js";import"./app-DR284fT9.js";import"./app-DfipPP5d.js";import"./app-TBcc1obG.js";import"./app-51hQc1Cd.js";import"./app-CqAVEB_b.js";import"./app-Cqxz9tud.js";import"./app-DoRtcMJm.js";import"./app-aIb4ksxL.js";function j(){L(this),this.success=this.$NotifyReloadSuccess("保存成功")}const q={key:0},G={key:1},I={__name:"MoreOptionsAngle",emits:["change"],setup($,{emit:o}){const n=o,{isVisible:r}=function(){return{isVisible:v(!1)}}(),c=function(){r.value=!r.value,n("change",r.value)};return(f,h)=>(u(),d("a",{href:"",onClick:h[0]||(h[0]=B(b=>c(),["prevent"]))},[e(r)?_("",!0):(u(),d("span",q,"更多选项")),e(r)?(u(),d("span",G,"收起选项")):_("",!0),t("i",{class:R(["pi",{"pi-angle-down":!e(r),"pi-angle-up":e(r)}])},null,2)]))}},K=["value"],Q=t("td",{class:"title"},"自动跳转到HTTPS",-1),W={class:"comment"},X={class:"ui table definition"},Y=t("td",{class:"title"},"状态码",-1),Z=t("td",null,"域名或IP地址",-1),tt=t("p",{class:"comment"},"默认和用户正在访问的域名或IP地址一致。",-1),et=t("td",null,"端口",-1),nt=t("p",{class:"comment"},"默认端口为443。",-1),ot={key:1},st={class:"comment"},lt={class:"ui table definition"},it=t("td",{class:"title"},"状态码",-1),at=t("td",null,"跳转后域名或IP地址",-1),rt=t("p",{class:"comment"},"默认和用户正在访问的域名或IP地址一致，不填写就表示使用当前的域名。",-1),ut=t("td",null,"端口",-1),dt=t("p",{class:"comment"},"默认端口为443。",-1),mt=t("td",null,"允许的域名",-1),ct=t("p",{class:"comment"},"如果填写了允许的域名，那么只有这些域名可以自动跳转。",-1),pt=t("td",null,"排除的域名",-1),_t=t("p",{class:"comment"},"如果填写了排除的域名，那么这些域名将不跳转。",-1),ft={__name:"HTTPRedirectToHTTPSBox",props:["v-redirect-to-https-config","v-is-location"],setup($){const o=$,{redirectToHttpsConfig:n,portString:r,moreOptionsVisible:c,statusOptions:f}=function(){let i=o.vRedirectToHttpsConfig;return i==null?i={isPrior:!1,isOn:!1,host:"",port:0,status:0,onlyDomains:[],exceptDomains:[]}:(i.onlyDomains==null&&(i.onlyDomains=[]),i.exceptDomains==null&&(i.exceptDomains=[])),{redirectToHttpsConfig:v(i),portString:v(i.port>0?i.port.toString():""),moreOptionsVisible:v(!1),statusOptions:v([{code:301,text:"Moved Permanently"},{code:308,text:"Permanent Redirect"},{code:302,text:"Found"},{code:303,text:"See Other"},{code:307,text:"Temporary Redirect"}])}}(),h=function(i){c.value=i},b=function(i){n.value.onlyDomains=i},N=function(i){n.value.exceptDomains=i};return H(()=>n.value.status,function(){n.value.status=parseInt(n.value.status)}),H(r,function(i){let a=parseInt(i);isNaN(a)?n.value.port=0:n.value.port=a}),(i,a)=>(u(),d("div",null,[t("input",{type:"hidden",name:"redirectToHTTPSJSON",value:JSON.stringify(e(n))},null,8,K),i.vIsLocation?(u(),P(U,{key:0},{default:m(()=>[l(E,{"v-config":e(n)},null,8,["v-config"]),T(t("tbody",null,[t("tr",null,[Q,t("td",null,[l(S,{modelValue:e(n).isOn,"onUpdate:modelValue":a[0]||(a[0]=s=>e(n).isOn=s)},null,8,["modelValue"]),t("p",W,[p("开启后，所有HTTP的请求都会自动跳转到对应的HTTPS URL上， "),l(I,{onChange:h})]),T(t("table",X,[t("tr",null,[Y,t("td",null,[l(k,{modelValue:e(n).status,"onUpdate:modelValue":a[1]||(a[1]=s=>e(n).status=s)},{default:m(()=>[l(x,{value:"0"},{default:m(()=>[p("[使用默认]")]),_:1}),(u(!0),d(C,null,O(e(f),s=>(u(),P(x,{value:s.code},{default:m(()=>[p(g(s.code)+" "+g(s.text),1)]),_:2},1032,["value"]))),256))]),_:1},8,["modelValue"])])]),t("tr",null,[Z,t("td",null,[l(V,{type:"text",name:"host",modelValue:e(n).host,"onUpdate:modelValue":a[2]||(a[2]=s=>e(n).host=s),class:"w-full"},null,8,["modelValue"]),tt])]),t("tr",null,[et,t("td",null,[l(V,{type:"text",name:"port",modelValue:e(r),"onUpdate:modelValue":a[3]||(a[3]=s=>D(r)?r.value=s:null),maxlength:"5",style:{width:"6em"}},null,8,["modelValue"]),nt])])],512),[[y,e(c)]])])])],512),[[y,e(n).isPrior]])]),_:1})):_("",!0),i.vIsLocation?_("",!0):(u(),d("div",ot,[l(S,{modelValue:e(n).isOn,"onUpdate:modelValue":a[4]||(a[4]=s=>e(n).isOn=s)},null,8,["modelValue"]),t("p",st,[p("开启后，所有HTTP的请求都会自动跳转到对应的HTTPS URL上， "),l(I,{onChange:h})]),T(t("table",lt,[t("tr",null,[it,t("td",null,[l(k,{modelValue:e(n).status,"onUpdate:modelValue":a[5]||(a[5]=s=>e(n).status=s)},{default:m(()=>[l(x,{value:"0"},{default:m(()=>[p("[使用默认]")]),_:1}),(u(!0),d(C,null,O(e(f),s=>(u(),P(x,{value:s.code},{default:m(()=>[p(g(s.code)+" "+g(s.text),1)]),_:2},1032,["value"]))),256))]),_:1},8,["modelValue"])])]),t("tr",null,[at,t("td",null,[l(V,{type:"text",name:"host",modelValue:e(n).host,"onUpdate:modelValue":a[6]||(a[6]=s=>e(n).host=s),class:"w-full"},null,8,["modelValue"]),rt])]),t("tr",null,[ut,t("td",null,[l(V,{type:"text",name:"port",modelValue:e(r),"onUpdate:modelValue":a[7]||(a[7]=s=>D(r)?r.value=s:null),maxlength:"5",style:{width:"6em"}},null,8,["modelValue"]),dt])]),t("tr",null,[mt,t("td",null,[l(w,{"v-domains":e(n).onlyDomains,onChange:b},null,8,["v-domains"]),ct])]),t("tr",null,[pt,t("td",null,[l(w,{"v-domains":e(n).exceptDomains,onChange:N},null,8,["v-domains"]),_t])])],512),[[y,e(c)]])]))]))}},ht=["value"],vt=["value"],gt=["value"],Tt=t("td",{class:"title"},"启用HTTP",-1),yt=t("td",{class:"title"},"绑定端口 *",-1),Vt={key:0,class:"red"},xt={class:"comment"},Pt={key:0,class:"red"},$t={key:0},Ct={key:0},Ot=t("td",null,"自动跳转到HTTPS",-1),se={__name:"index",setup($){const o=M(new j);return(n,r)=>(u(),P(F,{ctx:e(o)},{default:m(()=>[l(J,{action:"$",onSuccess:e(o).success},{default:m(()=>[t("input",{type:"hidden",name:"serverId",value:e(o).serverId},null,8,ht),t("input",{type:"hidden",name:"webId",value:e(o).webId},null,8,vt),t("input",{type:"hidden",name:"serverType",value:e(o).serverType},null,8,gt),l(U,null,{default:m(()=>[t("tbody",null,[t("tr",null,[Tt,t("td",null,[l(S,{name:"isOn",value:"1",modelValue:e(o).httpConfig.isOn,"onUpdate:modelValue":r[0]||(r[0]=c=>e(o).httpConfig.isOn=c)},null,8,["modelValue"])])])]),T(t("tbody",null,[t("tr",null,[yt,t("td",null,[e(o).httpConfig.isOn&&(e(o).httpConfig.addresses==null||e(o).httpConfig.addresses.length==0)?(u(),d("span",Vt,"还没有添加端口绑定，会导致HTTP服务无法访问。")):_("",!0),l(A,{"v-server-type":e(o).serverType,"v-addresses":e(o).httpConfig.addresses,"v-protocol":"http","min-port":e(o).minPort,"max-port":e(o).maxPort},null,8,["v-server-type","v-addresses","min-port","max-port"]),t("p",xt,[e(o).conflictingPorts.length>0?(u(),d("span",Pt,[p("配置错误："),(u(!0),d(C,null,O(e(o).conflictingPorts,(c,f)=>(u(),d("span",null,[p(g(c),1),f!=e(o).conflictingPorts.length-1?(u(),d("span",$t,"、")):_("",!0)]))),256)),e(o).conflictingPorts.length>1?(u(),d("span",Ct,"等")):_("",!0),p("端口同HTTPS设置的端口冲突，请删除HTTP或HTTPS中的相关端口。")])):_("",!0)])])])],512),[[y,e(o).httpConfig.isOn&&e(o).canSpecifyPort]]),T(t("tbody",null,[t("tr",null,[Ot,t("td",null,[l(ft,{"v-redirect-to-https-config":e(o).redirectToHTTPSConfig},null,8,["v-redirect-to-https-config"])])])],512),[[y,e(o).httpConfig.isOn]])]),_:1}),l(z)]),_:1},8,["onSuccess"])]),_:1},8,["ctx"]))}};export{se as default};
