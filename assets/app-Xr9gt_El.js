import{o as i,c as x,w as a,u as l,g as u,h as c,b as o,a as e,f as r,d as f,e as _,D as v,t as g,F as y}from"./app-BYx064nO.js";import{P as A}from"./app-BnDFQ2zy.js";import{i as L,c as b}from"./app-DISTCiac.js";import{_ as U}from"./app-CbPWpFKs.js";import{_ as h}from"./app--BlRpVz_.js";import{_ as P}from"./app-57xpzLDR.js";import{_ as R,a as n}from"./app-BuHt2kYS.js";import{_ as w}from"./app-_N2IGwgj.js";import{_ as V}from"./app-C5GVF480.js";import{C as p}from"./app-IrmNFWm4.js";import{_ as k}from"./app-CryyhHYs.js";import{_ as S}from"./app-1SA4suwN.js";import{_ as C}from"./app-CxVImP9a.js";import{D as $}from"./app-D0jdtzyy.js";import"./app-GoR2fTOd.js";import"./app-DR284fT9.js";import"./app-DfipPP5d.js";import"./app-DNadG4GC.js";import"./app-DPMEyUYH.js";import"./app-TBcc1obG.js";import"./app-tUtHmy3n.js";import"./app-CK9Tk_hc.js";import"./app-51hQc1Cd.js";import"./app-CqAVEB_b.js";import"./app-Cqxz9tud.js";import"./app-DoRtcMJm.js";import"./app-aIb4ksxL.js";import"./app-DYkSpHuE.js";import"./app-DyIe33QU.js";import"./app-CHxME8Sw.js";function B(){L(this),this.isCreating=!0,window.parent.UPDATING_REDIRECT!=null?(this.isCreating=!1,this.redirect=window.parent.UPDATING_REDIRECT,(this.redirect.type==null||this.redirect.type.length==0)&&(this.redirect.type="url")):this.redirect={type:"url",status:0,beforeURL:"",afterURL:"",matchPrefix:!1,matchRegexp:!1,keepRequestURI:!1,keepArgs:!0,conds:null,isOn:!0,domainsAll:!1,domainBefore:[],domainBeforeIgnorePorts:!0,domainAfter:"",domainAfterScheme:"",portsAll:!1,portsBefore:[],portAfter:0,portAfterScheme:""},this.mode="",this.redirect.matchPrefix?this.mode="matchPrefix":this.redirect.matchRegexp?this.mode="matchRegexp":this.mode="equal",this.$delay(function(){let m=this;this.$watch("mode",function(t){t=="matchPrefix"?(m.redirect.matchPrefix=!0,m.redirect.matchRegexp=!1):t=="matchRegexp"?(m.redirect.matchPrefix=!1,m.redirect.matchRegexp=!0):(m.redirect.matchPrefix=!1,m.redirect.matchRegexp=!1)})}),this.changeConds=function(m){this.redirect.conds=m}}const T={key:0},D={key:1},I=["value"],N=["value"],q=e("td",{class:"title"},"跳转类型",-1),O=e("td",{class:"color-border"},"跳转前URL *",-1),E={class:"comment"},H=e("td",{class:"color-border"},"匹配模式 *",-1),J={key:0,class:"comment"},F={key:1,class:"comment"},G={key:2,class:"comment"},j=e("td",{class:"color-border"},"跳转后URL *",-1),z={class:"comment"},K={key:0},M=e("td",{class:"color-border"},"保留URL路径参数",-1),Q=e("p",{class:"comment"},"选中后，则跳转之后，保留跳转之前的URL路径和参数。",-1),W={key:1},X=e("td",{class:"color-border"},"保留请求参数",-1),Y=e("p",{class:"comment"},"选中后，则跳转之后，保留跳转之前的URL上的参数（即问号之后的部分）。",-1),Z=e("td",{class:"color-border"},"所有域名都跳转",-1),ee=e("p",{class:"comment"},"选中后，表示所有域名都会跳转（只要跳转前后域名不同）；不选中后可以指定域名跳转。",-1),te=e("td",{class:"color-border"},"指定跳转前域名",-1),le=e("td",{class:"color-border"},"忽略跳转前端口",-1),oe=e("p",{class:"comment"},"选中后，表示忽略跳转前域名端口，只要域名匹配时就跳转；如不选中，则表示只有域名和端口同时匹配时才会跳转。",-1),re=e("td",{class:"color-border"},"跳转后域名 *",-1),de={class:"comment"},se=e("td",{class:"color-border"},"跳转后协议",-1),ae=e("p",{class:"comment"},"跳转后的URL的协议。",-1),ne=e("td",{class:"color-border"},"所有端口都跳转",-1),ie=e("p",{class:"comment"},"选中后，表示所有端口都会跳转（只要跳转前后端口不同）；不选中后可以指定端口跳转。",-1),me=e("td",{class:"color-border"},"指定跳转前端口",-1),ue=e("td",{class:"color-border"},"跳转后端口 *",-1),ce=e("td",{class:"color-border"},"跳转后协议",-1),pe=e("p",{class:"comment"},"跳转后的URL的协议。",-1),fe=e("td",null,"跳转状态码",-1),_e={colspan:"2"},he=e("td",null,"例外域名",-1),Re=e("p",{class:"comment"},[r("这些域名"),e("strong",null,"不"),r("执行跳转。")],-1),Ve=e("td",null,"仅限域名",-1),Ue=e("p",{class:"comment"},"只有这些域名执行跳转。",-1),xe=e("td",null,"匹配条件",-1),ge=e("td",null,"启用当前跳转",-1),Ze={__name:"createPopup",setup(m){const t=b(new B);return(ve,s)=>(i(),x(A,null,{default:a(()=>[l(t).isCreating?(i(),u("header",T,"添加URL跳转")):c("",!0),l(t).isCreating?c("",!0):(i(),u("header",D,"修改URL跳转")),o(w,{onSuccess:l(t).success,action:"$"},{default:a(()=>[e("input",{type:"hidden",name:"matchPrefix",value:l(t).redirect.matchPrefix?1:0},null,8,I),e("input",{type:"hidden",name:"matchRegexp",value:l(t).redirect.matchRegexp?1:0},null,8,N),o($,null,{default:a(()=>[e("tbody",null,[e("tr",null,[q,e("td",null,[o(R,{name:"type",modelValue:l(t).redirect.type,"onUpdate:modelValue":s[0]||(s[0]=d=>l(t).redirect.type=d)},{default:a(()=>[o(n,{value:"url"},{default:a(()=>[r("URL跳转")]),_:1}),o(n,{value:"domain"},{default:a(()=>[r("域名跳转")]),_:1}),o(n,{value:"port"},{default:a(()=>[r("端口跳转")]),_:1})]),_:1},8,["modelValue"])])])]),f(e("tbody",null,[e("tr",null,[O,e("td",null,[o(V,{type:"text",name:"beforeURL",placeholder:"比如 http://www.url1.com",modelValue:l(t).redirect.beforeURL,"onUpdate:modelValue":s[1]||(s[1]=d=>l(t).redirect.beforeURL=d),autofocus:"",class:"w-full"},null,8,["modelValue"]),e("p",E,[r("需要填写完整的URL，包括"),o(p,null,{default:a(()=>[r("http://")]),_:1}),r("或者"),o(p,null,{default:a(()=>[r("https://")]),_:1}),r("，如果有非默认端口，也需要带上端口号。")])])]),e("tr",null,[H,e("td",null,[o(R,{name:"mode",modelValue:l(t).mode,"onUpdate:modelValue":s[2]||(s[2]=d=>l(t).mode=d)},{default:a(()=>[o(n,{value:"equal"},{default:a(()=>[r("精准匹配")]),_:1}),o(n,{value:"matchPrefix"},{default:a(()=>[r("匹配前缀")]),_:1}),o(n,{value:"matchRegexp"},{default:a(()=>[r("正则匹配")]),_:1})]),_:1},8,["modelValue"]),l(t).mode=="equal"?(i(),u("p",J,"精准匹配跳转前的URL，即只有访问完全一样的URL才会跳转。")):c("",!0),l(t).mode=="matchPrefix"?(i(),u("p",F,"只要访问的URL头部部分包含跳转前URL，即可跳转。")):c("",!0),l(t).mode=="matchRegexp"?(i(),u("p",G,[r("可以在跳转前URL中使用正则表达式，然后可以在跳转后URL中使用正则表达式中括号的变量，比如"),o(p,null,{default:a(()=>[r("${1}")]),_:1}),r("、"),o(p,null,{default:a(()=>[r("${2}")]),_:1}),r("分别表示第一个和第二个括号内的变量值。")])):c("",!0)])]),e("tr",null,[j,e("td",null,[o(V,{type:"text",name:"afterURL",placeholder:"比如 https://www.url2.cn",modelValue:l(t).redirect.afterURL,"onUpdate:modelValue":s[3]||(s[3]=d=>l(t).redirect.afterURL=d),class:"w-full"},null,8,["modelValue"]),e("p",z,[r("需要填写完整的URL，包括"),o(p,null,{default:a(()=>[r("http://")]),_:1}),r("或者"),o(p,null,{default:a(()=>[r("https://")]),_:1}),r("，如果有非默认端口，也需要带上端口号。")])])]),l(t).mode=="matchPrefix"?(i(),u("tr",K,[M,e("td",null,[o(h,{name:"keepRequestURI",value:"1",modelValue:l(t).redirect.keepRequestURI,"onUpdate:modelValue":s[4]||(s[4]=d=>l(t).redirect.keepRequestURI=d)},null,8,["modelValue"]),Q])])):c("",!0),l(t).mode=="equal"||l(t).mode=="matchRegexp"?(i(),u("tr",W,[X,e("td",null,[o(h,{name:"keepArgs",value:"1",modelValue:l(t).redirect.keepArgs,"onUpdate:modelValue":s[5]||(s[5]=d=>l(t).redirect.keepArgs=d)},null,8,["modelValue"]),Y])])):c("",!0)],512),[[_,l(t).redirect.type=="url"]]),f(e("tbody",null,[e("tr",null,[Z,e("td",null,[o(h,{name:"domainsAll",modelValue:l(t).redirect.domainsAll,"onUpdate:modelValue":s[6]||(s[6]=d=>l(t).redirect.domainsAll=d)},null,8,["modelValue"]),ee])]),f(e("tr",null,[te,e("td",null,[o(U,{name:"domainsBeforeJSON","v-domains":l(t).redirect.domainsBefore},null,8,["v-domains"])])],512),[[_,!l(t).redirect.domainsAll]]),e("tr",null,[le,e("td",null,[o(h,{name:"domainBeforeIgnorePorts",modelValue:l(t).redirect.domainBeforeIgnorePorts,"onUpdate:modelValue":s[7]||(s[7]=d=>l(t).redirect.domainBeforeIgnorePorts=d)},null,8,["modelValue"]),oe])]),e("tr",null,[re,e("td",null,[o(V,{type:"text",name:"domainAfter",maxlength:"100",class:"w-full",modelValue:l(t).redirect.domainAfter,"onUpdate:modelValue":s[8]||(s[8]=d=>l(t).redirect.domainAfter=d),placeholder:"比如example.com"},null,8,["modelValue"]),e("p",de,[r("这里填写的是网址中的域名部分，不需要添加"),o(p,null,{default:a(()=>[r("https://")]),_:1}),r("部分。")])])]),e("tr",null,[se,e("td",null,[o(R,{name:"domainAfterScheme",modelValue:l(t).redirect.domainAfterScheme,"onUpdate:modelValue":s[9]||(s[9]=d=>l(t).redirect.domainAfterScheme=d)},{default:a(()=>[o(n,{value:""},{default:a(()=>[r("保持")]),_:1}),o(n,{value:"https"},{default:a(()=>[r("HTTPS")]),_:1}),o(n,{value:"http"},{default:a(()=>[r("HTTP")]),_:1})]),_:1},8,["modelValue"]),ae])])],512),[[_,l(t).redirect.type=="domain"]]),f(e("tbody",null,[e("tr",null,[ne,e("td",null,[o(h,{name:"portsAll",modelValue:l(t).redirect.portsAll,"onUpdate:modelValue":s[10]||(s[10]=d=>l(t).redirect.portsAll=d)},null,8,["modelValue"]),ie])]),f(e("tr",null,[me,e("td",null,[o(k,{placeholder:"单个端口 或 端口1-端口2",name:"portsBefore","v-values":l(t).redirect.portsBefore},null,8,["v-values"])])],512),[[_,!l(t).redirect.portsAll]]),e("tr",null,[ue,e("td",null,[o(V,{type:"text",name:"portAfter",maxlength:"5",modelValue:l(t).redirect.portAfter,"onUpdate:modelValue":s[11]||(s[11]=d=>l(t).redirect.portAfter=d),style:{width:"5em"}},null,8,["modelValue"])])]),e("tr",null,[ce,e("td",null,[o(R,{name:"portAfterScheme",modelValue:l(t).redirect.portAfterScheme,"onUpdate:modelValue":s[12]||(s[12]=d=>l(t).redirect.portAfterScheme=d)},{default:a(()=>[o(n,{value:""},{default:a(()=>[r("保持")]),_:1}),o(n,{value:"https"},{default:a(()=>[r("HTTPS")]),_:1}),o(n,{value:"http"},{default:a(()=>[r("HTTP")]),_:1})]),_:1},8,["modelValue"]),pe])])],512),[[_,l(t).redirect.type=="port"]]),e("tr",null,[fe,e("td",null,[o(R,{name:"status",modelValue:l(t).redirect.status,"onUpdate:modelValue":s[13]||(s[13]=d=>l(t).redirect.status=d)},{default:a(()=>[o(n,{value:"0"},{default:a(()=>[r("[默认]")]),_:1}),(i(!0),u(y,null,v(l(t).statusList,d=>(i(),x(n,{value:d.code},{default:a(()=>[r(g(d.code)+" - "+g(d.text),1)]),_:2},1032,["value"]))),256))]),_:1},8,["modelValue"])])]),e("tr",null,[e("td",_e,[o(S)])]),f(e("tbody",null,[e("tr",null,[he,e("td",null,[o(U,{name:"exceptDomainsJSON","v-domains":l(t).redirect.exceptDomains},null,8,["v-domains"]),Re])]),e("tr",null,[Ve,e("td",null,[o(U,{name:"onlyDomainsJSON","v-domains":l(t).redirect.onlyDomains},null,8,["v-domains"]),Ue])]),e("tr",null,[xe,e("td",null,[o(C,{"v-conds":l(t).redirect.conds,onChange:l(t).changeConds},null,8,["v-conds","onChange"])])]),e("tr",null,[ge,e("td",null,[o(h,{name:"isOn",value:"1",modelValue:l(t).redirect.isOn,"onUpdate:modelValue":s[14]||(s[14]=d=>l(t).redirect.isOn=d)},null,8,["modelValue"])])])],512),[[_,l(t).moreOptionsVisible]])]),_:1}),o(P)]),_:1},8,["onSuccess"])]),_:1}))}};export{Ze as default};
