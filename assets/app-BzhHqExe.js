import{r as k,o as t,g as i,u as e,c as $,L as x,h as o,f as d,t as l,a as _,b as m,F as b,D as P,w as h,i as L}from"./app-BYx064nO.js";import{i as g,u as w,c as z}from"./app-DISTCiac.js";import{_ as S,a as C}from"./app-D0Fxxkoj.js";import{_ as B}from"./app-266_x6q1.js";import{L as M,s as f}from"./app-Vf6It1y-.js";import{_ as N}from"./app-B-EzfWu7.js";import{_ as U}from"./app-DU3b6xa5.js";import"./app-CxqGeHsb.js";import"./app-Dj8c2KwC.js";import"./app-cRxw2ZDj.js";import"./app-DOaxShSm.js";import"./app-5V9SnxW6.js";import"./app-Ncl-Sitd.js";import"./app-DoTJvLi7.js";import"./app-BZMTWmMM.js";import"./app-51hQc1Cd.js";import"./app-CqAVEB_b.js";import"./app-CK9Tk_hc.js";import"./app-Cqxz9tud.js";import"./app-DoRtcMJm.js";import"./app-aIb4ksxL.js";import"./app-DYkSpHuE.js";import"./app-DyIe33QU.js";import"./app-CiA1rHoH.js";import"./app-RbQF51V8.js";import"./app-tUtHmy3n.js";import"./app-DGM5HqRo.js";import"./app-DG0hMi2p.js";import"./app-CBq6-G9z.js";import"./app-BXiLqtxA.js";import"./app-CqvvE0jO.js";import"./app-CAeEyuA3.js";import"./app-DPMEyUYH.js";import"./app-DNadG4GC.js";function R(){const{utils:p}=g(this);this.deleteUserPlan=function(c){p.confirm("确定要删除此套餐吗？",function(){this.$post(".delete").params({userPlanId:c}).refresh()})},this.renewUserPlan=function(c){p.popupSuccess(".renewPopup?userPlanId="+c)}}const T={style:{"font-size":"0.8em",color:"grey"}},V={key:1},W={key:0},q=_("br",null,null,-1),I={key:1},D=_("br",null,null,-1),F={key:2},O={key:3},E={key:4},G={key:5},j={key:6},A={__name:"PlanLimitView",props:["value","v-single-mode"],setup(p){const c=w(),r=p,{config:a,hasLimit:n}=function(){let u=r.value,y=!1;return r.vSingleMode||(u.trafficLimit!=null&&u.trafficLimit.isOn&&(u.trafficLimit.dailySize!=null&&u.trafficLimit.dailySize.count>0||u.trafficLimit.monthlySize!=null&&u.trafficLimit.monthlySize.count>0)||u.dailyRequests>0||u.monthlyRequests>0)&&(y=!0),{config:k(u),hasLimit:k(y)}}(),s=function(u){return c.formatNumber(u)},v=function(u){return c.convertSizeCapacityToString(u)};return(u,y)=>(t(),i("div",T,[e(n)?(t(),$(x,{key:0})):o("",!0),e(a).trafficLimit!=null&&e(a).trafficLimit.isOn?(t(),i("div",V,[e(a).trafficLimit.dailySize!=null&&e(a).trafficLimit.dailySize.count>0?(t(),i("span",W,[d("日流量限制："+l(v(e(a).trafficLimit.dailySize)),1),q])):o("",!0),e(a).trafficLimit.monthlySize!=null&&e(a).trafficLimit.monthlySize.count>0?(t(),i("span",I,[d("月流量限制："+l(v(e(a).trafficLimit.monthlySize)),1),D])):o("",!0)])):o("",!0),e(a).dailyRequests>0?(t(),i("div",F,"单日请求数限制："+l(s(e(a).dailyRequests)),1)):o("",!0),e(a).monthlyRequests>0?(t(),i("div",O,"单月请求数限制："+l(s(e(a).monthlyRequests)),1)):o("",!0),e(a).dailyWebsocketConnections>0?(t(),i("div",E,"单日Websocket限制："+l(s(e(a).dailyWebsocketConnections)),1)):o("",!0),e(a).monthlyWebsocketConnections>0?(t(),i("div",G,"单月Websocket限制："+l(s(e(a).monthlyWebsocketConnections)),1)):o("",!0),e(a).maxUploadSize!=null&&e(a).maxUploadSize.count>0?(t(),i("div",j,"文件上传限制："+l(v(e(a).maxUploadSize)),1)):o("",!0)]))}},H={key:0,style:{"font-size":"0.8em",color:"grey"}},J={__name:"PlanBandwidthLimitView",props:["value"],setup(p){return(c,r)=>p.value!=null&&p.value.bandwidthLimitPerNode!=null&&p.value.bandwidthLimitPerNode.count>0?(t(),i("div",H,[d(" 带宽限制： "),m(S,{"v-value":p.value.bandwidthLimitPerNode},null,8,["v-value"])])):o("",!0)}},K={key:0},Q={class:"grey small"},X={key:0},Y=_("br",null,null,-1),Z={key:1},ee=_("br",null,null,-1),te={key:2},ie={key:1},ne={class:"grey small"},se={key:2},oe={class:"small grey"},ae={key:0},le={key:1},re={key:2},ce={key:3},de={__name:"PlanPriceView",props:["v-plan"],setup(p){const c=p,{plan:r}=function(){return{plan:k(c.vPlan)}}();return(a,n)=>(t(),i("div",null,[e(r).priceType=="period"?(t(),i("div",K,[d(" 按时间周期计费 "),_("div",null,[_("span",Q,[e(r).monthlyPrice>0?(t(),i("span",X,[d("月度：￥"+l(e(r).monthlyPrice)+"元",1),Y])):o("",!0),e(r).seasonallyPrice>0?(t(),i("span",Z,[d("季度：￥"+l(e(r).seasonallyPrice)+"元",1),ee])):o("",!0),e(r).yearlyPrice>0?(t(),i("span",te,"年度：￥"+l(e(r).yearlyPrice)+"元",1)):o("",!0)])])])):o("",!0),e(r).priceType=="traffic"?(t(),i("div",ie,[d(" 按流量计费 "),_("div",null,[_("span",ne,"基础价格：￥"+l(e(r).trafficPrice.base)+"元/GiB",1)])])):o("",!0),e(r).priceType=="bandwidth"&&e(r).bandwidthPrice!=null&&e(r).bandwidthPrice.percentile>0?(t(),i("div",se,[d(" 按"+l(e(r).bandwidthPrice.percentile)+"th带宽计费 ",1),_("div",null,[(t(!0),i(b,null,P(e(r).bandwidthPrice.ranges,s=>(t(),i("div",null,[_("span",oe,[d(l(s.minMB)+" - ",1),s.maxMB>0?(t(),i("span",ae,l(s.maxMB)+"MiB",1)):(t(),i("span",le,"∞")),d("： "),s.totalPrice>0?(t(),i("span",re,l(s.totalPrice)+"元",1)):(t(),i("span",ce,l(s.pricePerMB)+"元/MiB",1))])]))),256))])])):o("",!0)]))}},ue={key:1},me={key:0},_e={key:1,class:"red"},pe={key:0},he={key:1,class:"disabled"},fe={key:0},ye={key:0},ve=["href"],ke=["href"],$e={key:1,class:"disabled"},be=["onClick"],Le=["onClick"],nt={__name:"index",setup(p){const c=z(new R);return(r,a)=>(t(),i(b,null,[m(C,{ctx:e(c)},null,8,["ctx"]),e(c).userPlans.length==0?(t(),$(N,{key:0,"disable-spacing":""},{default:h(()=>[d("暂时还没有已购套餐。")]),_:1})):o("",!0),e(c).userPlans.length>0?(t(),i("div",ue,[m(M,{items:e(c).userPlans},{default:h(()=>[m(e(f),{header:"套餐",class:"name-column",frozen:""},{body:h(({data:n})=>[n.plan.id>0?(t(),i("span",me,[d(l(n.plan.name)+" ",1),_("div",null,[n.plan.lbMode=="on"?(t(),$(U,{key:0},{default:h(()=>[d("负载均衡")]),_:1})):o("",!0)])])):(t(),i("span",_e,"[已删除]"))]),_:1}),m(e(f),{header:"备注名",class:"name-column"},{body:h(({data:n})=>[n.name.length>0?(t(),i("span",pe,l(n.name),1)):(t(),i("span",he,"-"))]),_:1}),m(e(f),{header:"价格",class:"name-column"},{body:h(({data:n})=>[n.plan!=null?(t(),i("div",fe,[m(de,{"v-plan":n.plan},null,8,["v-plan"]),m(A,{value:n.plan},null,8,["value"]),m(J,{value:n.plan},null,8,["value"])])):o("",!0)]),_:1}),m(e(f),{header:"有效期",class:"date-column"},{body:h(({data:n})=>[d(l(n.dayTo),1)]),_:1}),m(e(f),{header:"网站",class:"name-column"},{body:h(({data:n})=>[n.servers!=null&&n.servers.length>0?(t(),i("div",ye,[(t(!0),i(b,null,P(n.servers,s=>(t(),i("div",null,[s.type=="httpProxy"||s.type=="httpWeb"?(t(),i("a",{key:0,href:"/servers/server/settings/plan?serverId="+s.id},l(s.name),9,ve)):o("",!0),s.type=="tcpProxy"||s.type=="udpProxy"?(t(),i("a",{key:1,href:"/lb/server/settings/plan?serverId="+s.id},l(s.name),9,ke)):o("",!0)]))),256))])):(t(),i("span",$e,"尚未绑定"))]),_:1}),m(e(f),{header:"操作",class:"two op",frozen:"","align-frozen":"right"},{body:h(({data:n})=>[_("a",{href:"",onClick:L(s=>e(c).renewUserPlan(n.id),["prevent"])},"续费",8,be),d("   "),_("a",{href:"",onClick:L(s=>e(c).deleteUserPlan(n.id),["prevent"])},"删除",8,Le)]),_:1})]),_:1},8,["items"]),m(B,{data:e(c).page},null,8,["data"])])):o("",!0)],64))}};export{nt as default};
