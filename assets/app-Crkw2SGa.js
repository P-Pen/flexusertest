import{o as n,g as o,t as y,b as i,u as t,w as _,F as c,a as l,D as r,n as m,i as h,f,h as p,d as T,e as U}from"./app-BYx064nO.js";import{i as g,c as x}from"./app-DISTCiac.js";import{a as N,_ as L}from"./app-D0Fxxkoj.js";import{_ as z}from"./app-_N2IGwgj.js";import{T as S}from"./app-DR284fT9.js";import{_ as D}from"./app-1SA4suwN.js";import{_ as I,a as C}from"./app-BuHt2kYS.js";import{_ as V}from"./app-C5GVF480.js";import{T as b,a as $}from"./app-DRGtcCVV.js";import{_ as M}from"./app-57xpzLDR.js";import{T as w}from"./app-2Kq8vdz-.js";import{D as Y}from"./app-D0jdtzyy.js";import"./app-CxqGeHsb.js";import"./app-Dj8c2KwC.js";import"./app-cRxw2ZDj.js";import"./app-DOaxShSm.js";import"./app-5V9SnxW6.js";import"./app-Ncl-Sitd.js";import"./app-DoTJvLi7.js";import"./app-51hQc1Cd.js";import"./app-CqAVEB_b.js";import"./app-CK9Tk_hc.js";import"./app-Cqxz9tud.js";import"./app-DoRtcMJm.js";import"./app-aIb4ksxL.js";import"./app-DYkSpHuE.js";import"./app-DyIe33QU.js";import"./app-kBNY2ZLt.js";import"./app-BTsdkGUZ.js";function F(){const{utils:v,Tea:e}=g(this);this.success=this.$NotifySuccess("购买成功","."),this.$delay(function(){if(this.planId>0){let u=this,a=this.plans.$find(function(s,d){return d.id==u.planId});a!=null&&this.selectPlan(a,!0)}}),this.selectedPlan=null,this.period="monthly",this.fee=0,this.planDescription="",this.selectPlan=function(u,a){this.planId=u.id,this.selectedPlan=u,this.period="monthly",this.fee=u.monthlyPrice,a&&setTimeout(function(){window.scrollTo(0,1e6)})},this.countMonths=1,this.countSeasons=1,this.countYears=1,this.$delay(function(){this.$watch("period",function(u){switch(this.countMonths=1,this.countSeasons=1,this.countYears=1,u){case"monthly":this.fee=this.countMonths*this.selectedPlan.monthlyPrice;break;case"seasonally":this.fee=this.countSeasons*this.selectedPlan.seasonallyPrice;break;case"yearly":this.fee=this.countYears*this.selectedPlan.yearlyPrice;break}}),this.$watch("countMonths",function(u){let a=parseInt(u);(isNaN(a)||a<1)&&(a=1),this.fee=this.selectedPlan.monthlyPrice*a}),this.$watch("countSeasons",function(u){let a=parseInt(u);(isNaN(a)||a<1)&&(a=1),this.fee=this.selectedPlan.seasonallyPrice*a}),this.$watch("countYears",function(u){let a=parseInt(u);(isNaN(a)||a<1)&&(a=1),this.fee=this.selectedPlan.yearlyPrice*a})}),this.composeCapacity=function(u){return v.convertSizeCapacityToString(u)}}const W={key:0},O={key:1,class:"disabled"},P={__name:"PlanQuotaValue",props:["modelValue"],setup(v){return(e,u)=>(n(),o("span",null,[v.modelValue>0?(n(),o("span",W,y(v.modelValue),1)):(n(),o("span",O,"无限制"))]))}},R=["value"],q={class:"ui table selectable celled structured plans-table"},B=l("th",null,null,-1),A=l("th",{class:"two wide"},[l("span",{class:"small"},"用量/功能")],-1),G=["onClick"],E={class:"plan-name"},Q={class:"small grey"},j=l("td",null,null,-1),H=l("td",null,null,-1),J=l("td",{rowspan:"2",class:"value-category-name"},"流量配额",-1),K=l("td",{class:"value-name"},"日流量限制",-1),X=["onClick"],Z={key:0},ee={key:1},te=l("td",{class:"value-name"},"月流量限制",-1),le=["onClick"],se={key:0},ne={key:1},oe=l("td",{class:"value-category-name"},"带宽限制",-1),ae=l("td",{class:"value-name"},"单节点带宽限制",-1),de=["onClick"],ie={key:0},ce={key:1},ue=l("td",{rowspan:"8",class:"value-category-name"},"用量配额",-1),re=l("td",{class:"value-name"},"总网站数限制",-1),_e=["onClick"],me=l("td",{class:"value-name"},"总域名数限制",-1),he=["onClick"],pe=l("td",{class:"value-name"},"每个网站最多域名数",-1),ye=["onClick"],fe=l("td",{class:"value-name"},"单日请求数限制",-1),Pe=["onClick"],ve=l("td",{class:"value-name"},"单月请求数限制",-1),ke=["onClick"],Ve=l("td",{class:"value-name"},"单日Websocket连接数限制",-1),Ce=["onClick"],be=l("td",{class:"value-name"},"单月Websocket连接数限制",-1),$e=["onClick"],Se=l("td",{class:"value-name"},"文件上传限制",-1),we=["onClick"],Te={key:0},Ue={key:1},ge=l("td",{rowspan:"0",class:"value-category-name"},"系统功能",-1),xe=l("td",{class:"value-name"},"负载均衡",-1),Ne=["onClick"],Le={key:0},ze=l("i",{class:"icon check green"},null,-1),De=[ze],Ie=["colspan"],Me={key:0},Ye={key:1},Fe=["rowspan"],We={class:"value-name"},Oe=["onClick"],Re={key:0},qe=l("i",{class:"icon check green"},null,-1),Be=[qe],Ae={key:1},Ge=l("td",null,null,-1),Ee=l("td",null,null,-1),Qe={key:0},je=l("td",null,"已选择套餐",-1),He=l("td",{class:"title"},"账户余额",-1),Je={key:0},Ke={key:1},Xe=l("a",{href:"/finance/charge"},[l("span",{class:"small"},"[充值]")],-1),Ze={key:1},et=l("td",null,"计费方式",-1),tt={key:0},lt={key:1},st={key:2},nt={key:0},ot=l("td",null,"周期 *",-1),at={key:0},dt=l("td",null,"月数 *",-1),it=l("span",null,"月",-1),ct={key:1},ut=l("td",null,"季度数 *",-1),rt=l("span",null,"季度",-1),_t={key:2},mt=l("td",null,"年数 *",-1),ht=l("span",null,"年",-1),pt=l("td",null,"预计费用",-1),yt={key:0},ft={key:1},Pt={key:1},vt=l("td",null,"结束日期",-1),kt=l("tr",null,[l("td",null,"预计费用"),l("td",null,"月结")],-1),Vt={key:2},Ct=l("td",null,"结束日期",-1),bt=l("tr",null,[l("td",null,"预计费用"),l("td",null,"月结")],-1),$t=l("td",null,"备注名称",-1),St=l("p",{class:"comment"},"用于识别不同的套餐，默认为套餐名称。",-1),ll={__name:"buy",setup(v){const e=x(new F);return(u,a)=>(n(),o(c,null,[i(N,{ctx:t(e),"active-tab":"buy"},null,8,["ctx"]),i(z,{action:"$",onSuccess:t(e).success},{default:_(()=>[l("input",{type:"hidden",name:"planId",value:t(e).planId},null,8,R),l("table",q,[l("thead",null,[l("tr",null,[B,A,(n(!0),o(c,null,r(t(e).plans,s=>(n(),o("th",{class:m({selected:t(e).selectedPlan!=null&&s.id==t(e).selectedPlan.id}),onClick:h(d=>t(e).selectPlan(s),["prevent"])},[l("div",E,y(s.name),1),l("div",null,[l("span",Q,y(s.description),1),f(" ")])],10,G))),256))])]),l("tbody",null,[l("tr",null,[j,H,(n(!0),o(c,null,r(t(e).plans,s=>(n(),o("td",{class:m(["",{selected:t(e).selectedPlan!=null&&s.id==t(e).selectedPlan.id}])},[i(S,{secondary:t(e).selectedPlan==null||s.id!=t(e).selectedPlan.id,type:"button",onClick:h(d=>t(e).selectPlan(s,!0),["prevent"])},{default:_(()=>[f("选择")]),_:2},1032,["secondary","onClick"])],2))),256))]),l("tr",null,[J,K,(n(!0),o(c,null,r(t(e).plans,s=>(n(),o("td",{class:m({selected:t(e).selectedPlan!=null&&s.id==t(e).selectedPlan.id}),onClick:h(d=>t(e).selectPlan(s),["prevent"])},[s.trafficLimit!=null&&s.trafficLimit.isOn&&s.trafficLimit.dailySize!=null&&s.trafficLimit.dailySize.count>0?(n(),o("div",Z,y(t(e).composeCapacity(s.trafficLimit.dailySize)),1)):(n(),o("div",ee,"无限制"))],10,X))),256))]),l("tr",null,[te,(n(!0),o(c,null,r(t(e).plans,s=>(n(),o("td",{class:m({selected:t(e).selectedPlan!=null&&s.id==t(e).selectedPlan.id}),onClick:h(d=>t(e).selectPlan(s),["prevent"])},[s.trafficLimit!=null&&s.trafficLimit.isOn&&s.trafficLimit.monthlySize!=null&&s.trafficLimit.monthlySize.count>0?(n(),o("div",se,y(t(e).composeCapacity(s.trafficLimit.monthlySize)),1)):(n(),o("div",ne,"无限制"))],10,le))),256))]),l("tr",null,[oe,ae,(n(!0),o(c,null,r(t(e).plans,s=>(n(),o("td",{class:m({selected:t(e).selectedPlan!=null&&s.id==t(e).selectedPlan.id}),onClick:h(d=>t(e).selectPlan(s),["prevent"])},[s.bandwidthLimitPerNode!=null&&s.bandwidthLimitPerNode.count>0?(n(),o("div",ie,[i(L,{"v-value":s.bandwidthLimitPerNode},null,8,["v-value"])])):(n(),o("div",ce,"无限制"))],10,de))),256))]),l("tr",null,[ue,re,(n(!0),o(c,null,r(t(e).plans,s=>(n(),o("td",{class:m({selected:t(e).selectedPlan!=null&&s.id==t(e).selectedPlan.id}),onClick:h(d=>t(e).selectPlan(s),["prevent"])},[i(P,{modelValue:s.totalServers,"onUpdate:modelValue":d=>s.totalServers=d},null,8,["modelValue","onUpdate:modelValue"])],10,_e))),256))]),l("tr",null,[me,(n(!0),o(c,null,r(t(e).plans,s=>(n(),o("td",{class:m({selected:t(e).selectedPlan!=null&&s.id==t(e).selectedPlan.id}),onClick:h(d=>t(e).selectPlan(s),["prevent"])},[i(P,{modelValue:s.totalServerNames,"onUpdate:modelValue":d=>s.totalServerNames=d},null,8,["modelValue","onUpdate:modelValue"])],10,he))),256))]),l("tr",null,[pe,(n(!0),o(c,null,r(t(e).plans,s=>(n(),o("td",{class:m({selected:t(e).selectedPlan!=null&&s.id==t(e).selectedPlan.id}),onClick:h(d=>t(e).selectPlan(s),["prevent"])},[i(P,{modelValue:s.totalServerNamesPerServer,"onUpdate:modelValue":d=>s.totalServerNamesPerServer=d},null,8,["modelValue","onUpdate:modelValue"])],10,ye))),256))]),l("tr",null,[fe,(n(!0),o(c,null,r(t(e).plans,s=>(n(),o("td",{class:m({selected:t(e).selectedPlan!=null&&s.id==t(e).selectedPlan.id}),onClick:h(d=>t(e).selectPlan(s),["prevent"])},[i(P,{modelValue:s.dailyRequests,"onUpdate:modelValue":d=>s.dailyRequests=d},null,8,["modelValue","onUpdate:modelValue"])],10,Pe))),256))]),l("tr",null,[ve,(n(!0),o(c,null,r(t(e).plans,s=>(n(),o("td",{class:m({selected:t(e).selectedPlan!=null&&s.id==t(e).selectedPlan.id}),onClick:h(d=>t(e).selectPlan(s),["prevent"])},[i(P,{modelValue:s.monthlyRequests,"onUpdate:modelValue":d=>s.monthlyRequests=d},null,8,["modelValue","onUpdate:modelValue"])],10,ke))),256))]),l("tr",null,[Ve,(n(!0),o(c,null,r(t(e).plans,s=>(n(),o("td",{class:m({selected:t(e).selectedPlan!=null&&s.id==t(e).selectedPlan.id}),onClick:h(d=>t(e).selectPlan(s),["prevent"])},[i(P,{modelValue:s.dailyWebsocketConnections,"onUpdate:modelValue":d=>s.dailyWebsocketConnections=d},null,8,["modelValue","onUpdate:modelValue"])],10,Ce))),256))]),l("tr",null,[be,(n(!0),o(c,null,r(t(e).plans,s=>(n(),o("td",{class:m({selected:t(e).selectedPlan!=null&&s.id==t(e).selectedPlan.id}),onClick:h(d=>t(e).selectPlan(s),["prevent"])},[i(P,{modelValue:s.monthlyWebsocketConnections,"onUpdate:modelValue":d=>s.monthlyWebsocketConnections=d},null,8,["modelValue","onUpdate:modelValue"])],10,$e))),256))]),l("tr",null,[Se,(n(!0),o(c,null,r(t(e).plans,s=>(n(),o("td",{class:m({selected:t(e).selectedPlan!=null&&s.id==t(e).selectedPlan.id}),onClick:h(d=>t(e).selectPlan(s),["prevent"])},[s.maxUploadSize!=null&&s.maxUploadSize.count>0?(n(),o("span",Te,y(t(e).composeCapacity(s.maxUploadSize)),1)):(n(),o("span",Ue,"无限制"))],10,we))),256))]),l("tr",null,[ge,xe,(n(!0),o(c,null,r(t(e).plans,s=>(n(),o("td",{class:m({selected:t(e).selectedPlan!=null&&s.id==t(e).selectedPlan.id}),onClick:h(d=>t(e).selectPlan(s),["prevent"])},[s.lbMode=="on"?(n(),o("span",Le,De)):p("",!0)],10,Ne))),256))])]),l("tbody",null,[l("tr",null,[l("td",{colspan:t(e).plans.length+2},[i(D,null,{default:_(()=>[t(e).moreOptionsVisible?p("",!0):(n(),o("span",Me,"查看网站功能支持")),t(e).moreOptionsVisible?(n(),o("span",Ye,"收起网站功能支持")):p("",!0)]),_:1})],8,Ie)])]),T(l("tbody",null,[(n(!0),o(c,null,r(t(e).allFeatures,(s,d)=>(n(),o("tr",null,[d==0?(n(),o("td",{key:0,rowspan:t(e).allFeatures.length,class:"value-category-name"},"网站功能",8,Fe)):p("",!0),l("td",We,y(s.name),1),(n(!0),o(c,null,r(t(e).plans,k=>(n(),o("td",{class:m({selected:t(e).selectedPlan!=null&&k.id==t(e).selectedPlan.id}),onClick:h(wt=>t(e).selectPlan(k),["prevent"])},[k.hasFullFeatures||k.featureCodes!=null&&k.featureCodes.$contains(s.code)?(n(),o("span",Re,Be)):(n(),o("span",Ae,"/"))],10,Oe))),256))]))),256))],512),[[U,t(e).moreOptionsVisible]]),l("tbody",null,[l("tr",null,[Ge,Ee,(n(!0),o(c,null,r(t(e).plans,s=>(n(),o("td",{class:m(["bottom",{selected:t(e).selectedPlan!=null&&s.id==t(e).selectedPlan.id}])},[i(S,{secondary:t(e).selectedPlan==null||s.id!=t(e).selectedPlan.id,type:"button",onClick:h(d=>t(e).selectPlan(s),["prevent"])},{default:_(()=>[f("选择")]),_:2},1032,["secondary","onClick"])],2))),256))])])]),i(Y,null,{default:_(()=>[l("tbody",null,[t(e).selectedPlan!=null?(n(),o("tr",Qe,[je,l("td",null,[l("strong",null,y(t(e).selectedPlan.name),1)])])):p("",!0),l("tr",null,[He,l("td",null,[t(e).userAccount!=null?(n(),o("span",Je,y(t(e).userAccount.total)+"元",1)):(n(),o("span",Ke,"0元")),f("   "),Xe])]),t(e).selectedPlan!=null?(n(),o("tr",Ze,[et,l("td",null,[t(e).selectedPlan.priceType=="period"?(n(),o("span",tt,"按时间周期付费，"+y(t(e).selectedPlan.monthlyPrice)+"元/月，"+y(t(e).selectedPlan.seasonallyPrice)+"元/季度，"+y(t(e).selectedPlan.yearlyPrice)+"元/年。",1)):p("",!0),t(e).selectedPlan.priceType=="traffic"?(n(),o("span",lt,"按流量付费。")):p("",!0),t(e).selectedPlan.priceType=="bandwidth"?(n(),o("span",st,"按带宽付费。")):p("",!0)])])):p("",!0)]),t(e).selectedPlan!=null&&t(e).selectedPlan.priceType=="period"?(n(),o("tbody",nt,[l("tr",null,[ot,l("td",null,[i(I,{name:"period",modelValue:t(e).period,"onUpdate:modelValue":a[0]||(a[0]=s=>t(e).period=s)},{default:_(()=>[i(C,{value:"monthly"},{default:_(()=>[f("按月")]),_:1}),i(C,{value:"seasonally"},{default:_(()=>[f("按季度")]),_:1}),i(C,{value:"yearly"},{default:_(()=>[f("按年")]),_:1})]),_:1},8,["modelValue"])])]),t(e).period=="monthly"?(n(),o("tr",at,[dt,l("td",null,[i(b,null,{default:_(()=>[i(V,{name:"countMonths",value:"1",style:{width:"5em"},maxlength:"4",modelValue:t(e).countMonths,"onUpdate:modelValue":a[1]||(a[1]=s=>t(e).countMonths=s)},null,8,["modelValue"]),i($,null,{default:_(()=>[it]),_:1})]),_:1})])])):p("",!0),t(e).period=="seasonally"?(n(),o("tr",ct,[ut,l("td",null,[i(b,null,{default:_(()=>[i(V,{name:"countSeasons",value:"1",style:{width:"5em"},maxlength:"4",modelValue:t(e).countSeasons,"onUpdate:modelValue":a[2]||(a[2]=s=>t(e).countSeasons=s)},null,8,["modelValue"]),i($,null,{default:_(()=>[rt]),_:1})]),_:1})])])):p("",!0),t(e).period=="yearly"?(n(),o("tr",_t,[mt,l("td",null,[i(b,null,{default:_(()=>[i(V,{name:"countYears",value:"1",style:{width:"5em"},maxlength:"4",modelValue:t(e).countYears,"onUpdate:modelValue":a[3]||(a[3]=s=>t(e).countYears=s)},null,8,["modelValue"]),i($,null,{default:_(()=>[ht]),_:1})]),_:1})])])):p("",!0),l("tr",null,[pt,l("td",null,[t(e).fee>0?(n(),o("span",yt,y(t(e).fee)+"元",1)):(n(),o("span",ft,"-"))])])])):p("",!0),t(e).selectedPlan!=null&&t(e).selectedPlan.priceType=="traffic"?(n(),o("tbody",Pt,[l("tr",null,[vt,l("td",null,[i(w,{name:"dayTo",modelValue:t(e).defaultDayTo,"onUpdate:modelValue":a[4]||(a[4]=s=>t(e).defaultDayTo=s)},null,8,["modelValue"])])]),kt])):p("",!0),t(e).selectedPlan!=null&&t(e).selectedPlan.priceType=="bandwidth"?(n(),o("tbody",Vt,[l("tr",null,[Ct,l("td",null,[i(w,{name:"dayTo",modelValue:t(e).defaultDayTo,"onUpdate:modelValue":a[5]||(a[5]=s=>t(e).defaultDayTo=s)},null,8,["modelValue"])])]),bt])):p("",!0),l("tbody",null,[l("tr",null,[$t,l("td",null,[i(V,{name:"name",maxlength:"50",class:"w-full"}),St])])])]),_:1}),i(M,null,{default:_(()=>[f("确定购买")]),_:1})]),_:1},8,["onSuccess"])],64))}};export{ll as default};
