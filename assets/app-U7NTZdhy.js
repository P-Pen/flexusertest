import{g as _}from"./app-CqkleIqs.js";import{o as B,c as k,w as y,d as S,a as v,v as M,t as z,b as F,e as O,i as G,f as w,n as L,h as T,g as V}from"./app-BYx064nO.js";import{_ as C}from"./app-Bx8FsPui.js";import{_ as W}from"./app--BlRpVz_.js";import{T as U}from"./app-DR284fT9.js";import{_ as Z}from"./app-_N2IGwgj.js";import{_ as I}from"./app-C5GVF480.js";var N={exports:{}},D={exports:{}};(function(){var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",g={rotl:function(s,u){return s<<u|s>>>32-u},rotr:function(s,u){return s<<32-u|s>>>u},endian:function(s){if(s.constructor==Number)return g.rotl(s,8)&16711935|g.rotl(s,24)&4278255360;for(var u=0;u<s.length;u++)s[u]=g.endian(s[u]);return s},randomBytes:function(s){for(var u=[];s>0;s--)u.push(Math.floor(Math.random()*256));return u},bytesToWords:function(s){for(var u=[],c=0,l=0;c<s.length;c++,l+=8)u[l>>>5]|=s[c]<<24-l%32;return u},wordsToBytes:function(s){for(var u=[],c=0;c<s.length*32;c+=8)u.push(s[c>>>5]>>>24-c%32&255);return u},bytesToHex:function(s){for(var u=[],c=0;c<s.length;c++)u.push((s[c]>>>4).toString(16)),u.push((s[c]&15).toString(16));return u.join("")},hexToBytes:function(s){for(var u=[],c=0;c<s.length;c+=2)u.push(parseInt(s.substr(c,2),16));return u},bytesToBase64:function(s){for(var u=[],c=0;c<s.length;c+=3)for(var l=s[c]<<16|s[c+1]<<8|s[c+2],f=0;f<4;f++)c*8+f*6<=s.length*8?u.push(i.charAt(l>>>6*(3-f)&63)):u.push("=");return u.join("")},base64ToBytes:function(s){s=s.replace(/[^A-Z0-9+\/]/ig,"");for(var u=[],c=0,l=0;c<s.length;l=++c%4)l!=0&&u.push((i.indexOf(s.charAt(c-1))&Math.pow(2,-2*l+8)-1)<<l*2|i.indexOf(s.charAt(c))>>>6-l*2);return u}};D.exports=g})();var q=D.exports,A={utf8:{stringToBytes:function(i){return A.bin.stringToBytes(unescape(encodeURIComponent(i)))},bytesToString:function(i){return decodeURIComponent(escape(A.bin.bytesToString(i)))}},bin:{stringToBytes:function(i){for(var g=[],s=0;s<i.length;s++)g.push(i.charCodeAt(s)&255);return g},bytesToString:function(i){for(var g=[],s=0;s<i.length;s++)g.push(String.fromCharCode(i[s]));return g.join("")}}},$=A;/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var J=function(i){return i!=null&&(E(i)||K(i)||!!i._isBuffer)};function E(i){return!!i.constructor&&typeof i.constructor.isBuffer=="function"&&i.constructor.isBuffer(i)}function K(i){return typeof i.readFloatLE=="function"&&typeof i.slice=="function"&&E(i.slice(0,0))}(function(){var i=q,g=$.utf8,s=J,u=$.bin,c=function(l,f){l.constructor==String?f&&f.encoding==="binary"?l=u.stringToBytes(l):l=g.stringToBytes(l):s(l)?l=Array.prototype.slice.call(l,0):!Array.isArray(l)&&l.constructor!==Uint8Array&&(l=l.toString());for(var o=i.bytesToWords(l),p=l.length*8,n=1732584193,t=-271733879,r=-1732584194,e=271733878,a=0;a<o.length;a++)o[a]=(o[a]<<8|o[a]>>>24)&16711935|(o[a]<<24|o[a]>>>8)&4278255360;o[p>>>5]|=128<<p%32,o[(p+64>>>9<<4)+14]=p;for(var d=c._ff,h=c._gg,x=c._hh,m=c._ii,a=0;a<o.length;a+=16){var P=n,R=t,b=r,H=e;n=d(n,t,r,e,o[a+0],7,-680876936),e=d(e,n,t,r,o[a+1],12,-389564586),r=d(r,e,n,t,o[a+2],17,606105819),t=d(t,r,e,n,o[a+3],22,-1044525330),n=d(n,t,r,e,o[a+4],7,-176418897),e=d(e,n,t,r,o[a+5],12,1200080426),r=d(r,e,n,t,o[a+6],17,-1473231341),t=d(t,r,e,n,o[a+7],22,-45705983),n=d(n,t,r,e,o[a+8],7,1770035416),e=d(e,n,t,r,o[a+9],12,-1958414417),r=d(r,e,n,t,o[a+10],17,-42063),t=d(t,r,e,n,o[a+11],22,-1990404162),n=d(n,t,r,e,o[a+12],7,1804603682),e=d(e,n,t,r,o[a+13],12,-40341101),r=d(r,e,n,t,o[a+14],17,-1502002290),t=d(t,r,e,n,o[a+15],22,1236535329),n=h(n,t,r,e,o[a+1],5,-165796510),e=h(e,n,t,r,o[a+6],9,-1069501632),r=h(r,e,n,t,o[a+11],14,643717713),t=h(t,r,e,n,o[a+0],20,-373897302),n=h(n,t,r,e,o[a+5],5,-701558691),e=h(e,n,t,r,o[a+10],9,38016083),r=h(r,e,n,t,o[a+15],14,-660478335),t=h(t,r,e,n,o[a+4],20,-405537848),n=h(n,t,r,e,o[a+9],5,568446438),e=h(e,n,t,r,o[a+14],9,-1019803690),r=h(r,e,n,t,o[a+3],14,-187363961),t=h(t,r,e,n,o[a+8],20,1163531501),n=h(n,t,r,e,o[a+13],5,-1444681467),e=h(e,n,t,r,o[a+2],9,-51403784),r=h(r,e,n,t,o[a+7],14,1735328473),t=h(t,r,e,n,o[a+12],20,-1926607734),n=x(n,t,r,e,o[a+5],4,-378558),e=x(e,n,t,r,o[a+8],11,-2022574463),r=x(r,e,n,t,o[a+11],16,1839030562),t=x(t,r,e,n,o[a+14],23,-35309556),n=x(n,t,r,e,o[a+1],4,-1530992060),e=x(e,n,t,r,o[a+4],11,1272893353),r=x(r,e,n,t,o[a+7],16,-155497632),t=x(t,r,e,n,o[a+10],23,-1094730640),n=x(n,t,r,e,o[a+13],4,681279174),e=x(e,n,t,r,o[a+0],11,-358537222),r=x(r,e,n,t,o[a+3],16,-722521979),t=x(t,r,e,n,o[a+6],23,76029189),n=x(n,t,r,e,o[a+9],4,-640364487),e=x(e,n,t,r,o[a+12],11,-421815835),r=x(r,e,n,t,o[a+15],16,530742520),t=x(t,r,e,n,o[a+2],23,-995338651),n=m(n,t,r,e,o[a+0],6,-198630844),e=m(e,n,t,r,o[a+7],10,1126891415),r=m(r,e,n,t,o[a+14],15,-1416354905),t=m(t,r,e,n,o[a+5],21,-57434055),n=m(n,t,r,e,o[a+12],6,1700485571),e=m(e,n,t,r,o[a+3],10,-1894986606),r=m(r,e,n,t,o[a+10],15,-1051523),t=m(t,r,e,n,o[a+1],21,-2054922799),n=m(n,t,r,e,o[a+8],6,1873313359),e=m(e,n,t,r,o[a+15],10,-30611744),r=m(r,e,n,t,o[a+6],15,-1560198380),t=m(t,r,e,n,o[a+13],21,1309151649),n=m(n,t,r,e,o[a+4],6,-145523070),e=m(e,n,t,r,o[a+11],10,-1120210379),r=m(r,e,n,t,o[a+2],15,718787259),t=m(t,r,e,n,o[a+9],21,-343485551),n=n+P>>>0,t=t+R>>>0,r=r+b>>>0,e=e+H>>>0}return i.endian([n,t,r,e])};c._ff=function(l,f,o,p,n,t,r){var e=l+(f&o|~f&p)+(n>>>0)+r;return(e<<t|e>>>32-t)+f},c._gg=function(l,f,o,p,n,t,r){var e=l+(f&p|o&~p)+(n>>>0)+r;return(e<<t|e>>>32-t)+f},c._hh=function(l,f,o,p,n,t,r){var e=l+(f^o^p)+(n>>>0)+r;return(e<<t|e>>>32-t)+f},c._ii=function(l,f,o,p,n,t,r){var e=l+(o^(f|~p))+(n>>>0)+r;return(e<<t|e>>>32-t)+f},c._blocksize=16,c._digestsize=16,N.exports=function(l,f){if(l==null)throw new Error("Illegal argument "+l);var o=i.wordsToBytes(c(l,f));return f&&f.asBytes?o:f&&f.asString?u.bytesToString(o):i.bytesToHex(o)}})();var Q=N.exports;const gt=_(Q),X={class:"header"},Y={class:"field"},j={class:"field"},tt={class:"field"},et={class:"field"},nt={class:"field"},rt={class:"flex gap-2 items-center"},ot={key:2,class:"register-box"},at={href:"/register"},st={key:0},it={key:0},ut=v("span",{class:"disabled"},"|",-1),ct=v("a",{href:"/account/reset"},"找回密码",-1),pt={__name:"LoginForm",props:["ctx"],setup(i){return(g,s)=>(B(),k(Z,{action:"$",onBefore:i.ctx.submitBefore,onDone:i.ctx.submitDone,onSuccess:i.ctx.submitSuccess,autocomplete:"off",class:"flex flex-col gap-4 border-gray-200 border p-4 rounded-xl",disbleCSRF:""},{default:y(()=>[S(v("input",{type:"hidden",name:"password","onUpdate:modelValue":s[0]||(s[0]=u=>i.ctx.passwordMd5=u)},null,512),[[M,i.ctx.passwordMd5]]),S(v("input",{type:"hidden",name:"token","onUpdate:modelValue":s[1]||(s[1]=u=>i.ctx.token=u)},null,512),[[M,i.ctx.token]]),v("div",X,[v("h6",null,"登录"+z(i.ctx.systemName),1)]),v("div",Y,[F(C,{beginIcon:"pi pi-user"},{default:y(()=>[F(I,{name:"username",modelValue:i.ctx.username,"onUpdate:modelValue":s[2]||(s[2]=u=>i.ctx.username=u),placeholder:i.ctx.usernamePlaceholder,maxlength:"200",onInput:i.ctx.changeUsername,class:"w-full",autofocus:""},null,8,["modelValue","placeholder","onInput"])]),_:1})]),v("div",j,[F(C,{beginIcon:"pi pi-lock"},{default:y(()=>[F(I,{fieldName:"password",type:"password",modelValue:i.ctx.password,"onUpdate:modelValue":s[3]||(s[3]=u=>i.ctx.password=u),placeholder:"请输入密码",maxlength:"200",onInput:s[4]||(s[4]=u=>i.ctx.changePassword()),class:"w-full"},null,8,["modelValue"])]),_:1})]),S(v("div",tt,[F(C,{beginIcon:"pi pi-bars"},{default:y(()=>[F(I,{name:"otpCode",placeholder:"请输入OTP动态密码",maxlength:"6",class:"w-full"})]),_:1})],512),[[O,i.ctx.showOTP]]),v("div",et,[v("a",{href:"",onClick:s[5]||(s[5]=G(u=>i.ctx.showMoreOptions(),["prevent"]))},[w("更多选项 "),v("i",{class:L(["icon angle",{down:!i.ctx.moreOptionsVisible,up:i.ctx.moreOptionsVisible}])},null,2)])]),S(v("div",nt,[v("div",rt,[F(W,{name:"remember",value:"1",checked:"checked"},{default:y(()=>[w("在这个电脑上记住登录（14天）")]),_:1})])],512),[[O,i.ctx.moreOptionsVisible]]),i.ctx.isSubmitting?T("",!0):(B(),k(U,{key:0,class:"w-full",type:"submit"},{default:y(()=>[w("登录")]),_:1})),i.ctx.isSubmitting?(B(),k(U,{key:1,disabled:"",class:"w-full",type:"submit"},{default:y(()=>[w("登录中...")]),_:1})):T("",!0),i.ctx.canRegister?(B(),V("div",ot,[v("a",at,[w("注册新用户"),i.ctx.canResetPassword?T("",!0):(B(),V("span",st,"  »"))]),i.ctx.canResetPassword?(B(),V("span",it,[w("   "),ut,w("   "),ct])):T("",!0)])):T("",!0)]),_:1},8,["onBefore","onDone","onSuccess"]))}};export{pt as _,gt as m};
