import{i as x,c as L}from"./app-DISTCiac.js";import{_ as $}from"./app-BAIc7wsg.js";import{_ as C}from"./app-C7gR9zYq.js";import{_ as I}from"./app-57xpzLDR.js";import{_ as k}from"./app-_N2IGwgj.js";import{r as V,o as c,g as h,a as o,u as e,b as n,w as m,c as O,h as v,d as _,e as f,f as i}from"./app-BYx064nO.js";import{_ as y}from"./app-Bg2kbTeB.js";import{C as u}from"./app-IrmNFWm4.js";import{_ as D}from"./app-CbPWpFKs.js";import{_ as p}from"./app--BlRpVz_.js";import{_ as S}from"./app-Bx5jiAm1.js";import{_ as P}from"./app-1SA4suwN.js";import{D as N}from"./app-D0jdtzyy.js";import"./app-BXvxi6wb.js";import"./app-C9w-bzHc.js";import"./app-DyIe33QU.js";import"./app-5V9SnxW6.js";import"./app-DOaxShSm.js";import"./app-DQhYsbJs.js";import"./app-BXiLqtxA.js";import"./app-CqvvE0jO.js";import"./app-CK9Tk_hc.js";import"./app-CAeEyuA3.js";import"./app-DoRtcMJm.js";import"./app-DPMEyUYH.js";import"./app-DR284fT9.js";import"./app-BuHt2kYS.js";import"./app-51hQc1Cd.js";import"./app-CqAVEB_b.js";import"./app-Cqxz9tud.js";import"./app-aIb4ksxL.js";import"./app-DYkSpHuE.js";import"./app-C5GVF480.js";import"./app-x_fVWXrx.js";import"./app-DNadG4GC.js";import"./app-TBcc1obG.js";import"./app-DfipPP5d.js";import"./app-tUtHmy3n.js";function B(){x(this),this.success=this.$NotifyReloadSuccess("保存成功")}const E=["value"],T=o("td",{class:"title"},"启用防盗链",-1),G=o("p",{class:"comment"},"选中后表示开启防盗链。",-1),H=o("td",{class:"title"},"允许直接访问网站",-1),j=o("p",{class:"comment"},"允许用户直接访问网站，用户第一次访问网站时来源域名通常为空。",-1),J=o("td",null,"来源域名允许一致",-1),A=o("p",{class:"comment"},"允许来源域名和当前访问的域名一致，相当于在站内访问。",-1),M=o("td",null,"允许的来源域名",-1),q={class:"bg-white"},z={class:"comment"},F=o("td",null,"禁止的来源域名",-1),K={class:"bg-white"},Q={class:"comment"},W={colspan:"2"},X=o("td",null,"同时检查Origin",-1),Y=o("p",{class:"comment"},"如果请求没有指定Referer Header，则尝试检查Origin Header，多用于跨站调用。",-1),Z=o("td",null,"例外URL",-1),oo={class:"bg-white"},eo=o("p",{class:"comment"},"如果填写了例外URL，表示这些URL跳过不做处理。",-1),to=o("td",null,"限制URL",-1),no={class:"bg-white"},lo=o("p",{class:"comment"},"如果填写了限制URL，表示只对这些URL进行处理；如果不填则表示支持所有的URL。",-1),so={__name:"HTTPReferersConfigBox",props:["v-referers-config","v-is-location","v-is-group"],setup(g){const r=g,{config:t,moreOptionsVisible:d}=function(){let l=r.vReferersConfig;return l==null&&(l={isPrior:!1,isOn:!1,allowEmpty:!0,allowSameDomain:!0,allowDomains:[],denyDomains:[],checkOrigin:!0}),l.allowDomains==null&&(l.allowDomains=[]),l.denyDomains==null&&(l.denyDomains=[]),{config:V(l),moreOptionsVisible:V(!1)}}(),w=function(){return(!r.vIsLocation&&!r.vIsGroup||t.value.isPrior)&&t.value.isOn},U=function(l){typeof l=="object"&&(t.value.allowDomains=l)},b=function(l){typeof l=="object"&&(t.value.denyDomains=l)},R=function(){d.value=!d.value};return(l,s)=>(c(),h("div",null,[o("input",{type:"hidden",name:"referersJSON",value:JSON.stringify(e(t))},null,8,E),n(N,null,{default:m(()=>[l.vIsLocation||l.vIsGroup?(c(),O(S,{key:0,"v-config":e(t)},null,8,["v-config"])):v("",!0),_(o("tbody",null,[o("tr",null,[T,o("td",null,[n(p,{value:"1",modelValue:e(t).isOn,"onUpdate:modelValue":s[0]||(s[0]=a=>e(t).isOn=a)},null,8,["modelValue"]),G])])],512),[[f,!l.vIsLocation&&!l.vIsGroup||e(t).isPrior]]),_(o("tbody",null,[o("tr",null,[H,o("td",null,[n(p,{modelValue:e(t).allowEmpty,"onUpdate:modelValue":s[1]||(s[1]=a=>e(t).allowEmpty=a)},null,8,["modelValue"]),j])]),o("tr",null,[J,o("td",null,[n(p,{modelValue:e(t).allowSameDomain,"onUpdate:modelValue":s[2]||(s[2]=a=>e(t).allowSameDomain=a)},null,8,["modelValue"]),A])]),o("tr",null,[M,o("td",q,[n(D,{"v-domains":e(t).allowDomains,onChange:U},null,8,["v-domains"]),o("p",z,[i("允许的其他来源域名列表，比如 "),n(u,null,{default:m(()=>[i("example.com")]),_:1}),i(" 、 "),n(u,null,{default:m(()=>[i("*.example.com")]),_:1}),i(" 。单个星号 "),n(u,null,{default:m(()=>[i("*")]),_:1}),i(" 表示允许所有域名。 ")])])]),o("tr",null,[F,o("td",K,[n(D,{"v-domains":e(t).denyDomains,onChange:b},null,8,["v-domains"]),o("p",Q,[i("禁止的来源域名列表，比如 "),n(u,null,{default:m(()=>[i("example.org")]),_:1}),i(" 、 "),n(u,null,{default:m(()=>[i("*.example.org")]),_:1}),i(" ；除了这些禁止的来源域名外，其他域名都会被允许，除非限定了允许的来源域名。 ")])])]),o("tr",null,[o("td",W,[n(P,{onChange:R})])])],512),[[f,w()]]),_(o("tbody",null,[o("tr",null,[X,o("td",null,[n(p,{modelValue:e(t).checkOrigin,"onUpdate:modelValue":s[3]||(s[3]=a=>e(t).checkOrigin=a)},null,8,["modelValue"]),Y])]),o("tr",null,[Z,o("td",oo,[n(y,{modelValue:e(t).exceptURLPatterns,"onUpdate:modelValue":s[4]||(s[4]=a=>e(t).exceptURLPatterns=a)},null,8,["modelValue"]),eo])]),o("tr",null,[to,o("td",no,[n(y,{modelValue:e(t).onlyURLPatterns,"onUpdate:modelValue":s[5]||(s[5]=a=>e(t).onlyURLPatterns=a)},null,8,["modelValue"]),lo])])],512),[[f,e(d)&&w()]])]),_:1})]))}},io={key:0},ao=["value"],ro={key:1},Ko={__name:"index",setup(g){const r=L(new B);return(t,d)=>(c(),O($,{ctx:e(r)},{default:m(()=>[e(r).featureIsOn?(c(),h("div",io,[n(k,{action:"$",onSuccess:e(r).success},{default:m(()=>[o("input",{type:"hidden",name:"webId",value:e(r).webId},null,8,ao),n(so,{"v-referers-config":e(r).referersConfig},null,8,["v-referers-config"]),n(I,{class:"mt-4"})]),_:1},8,["onSuccess"])])):v("",!0),e(r).featureIsOn?v("",!0):(c(),h("div",ro,[n(C)]))]),_:1},8,["ctx"]))}};export{Ko as default};
